(self.webpackChunksleact_ts_front=self.webpackChunksleact_ts_front||[]).push([[506],{6023:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>he});var a=n(6809),r=n.n(a);const l={},o=e=>{if(!e)return[void 0,t];function t(){e&&l[e]&&(l[e].disconnect(),delete l[e])}return l[e]||(l[e]=r()("https://sleact.nodebird.com/ws-"+e,{transports:["websocket"]}),console.info("create socket",e,l[e].id)),[l[e],t]};var c=n(8517);const i=(0,c.Z)("div",{target:"e1yu0210"})({name:"146q31f",styles:"float:right;"}),s=(0,c.Z)("header",{target:"e1yu0211"})({name:"z7c3yo",styles:"height:38px;background:#350d36;color:#ffffff;box-shadow:0 1px 0 0 rgba(255,255,255,0.1);padding:5px;text-align:center;"}),d=(0,c.Z)("img",{target:"e1yu0212"})({name:"sw188w",styles:"width:28px;height:28px;position:absolute;top:5px;right:16px;"}),p=(0,c.Z)("div",{target:"e1yu0213"})({name:"1yfii4x",styles:"padding:20px;& img{display:flex;}& #profile-name{font-weight:bold;display:inline-flex;}& #profile-active{font-size:13px;display:inline-flex;}"}),m=(0,c.Z)("button",{target:"e1yu0214"})({name:"xsdsuh",styles:"border:none;width:100%;border-top:1px solid rgb(29,28,29);background:transparent;display:block;height:33px;padding:5px 20px 5px;outline:none;cursor:pointer;"}),u=(0,c.Z)("div",{target:"e1yu0215"})({name:"13pmxen",styles:"display:flex;flex:1;"}),g=(0,c.Z)("div",{target:"e1yu0216"})({name:"kbjkj2",styles:"width:65px;display:inline-flex;flex-direction:column;align-items:center;background:#3f0e40;border-top:1px solid rgb(82,38,83);border-right:1px solid rgb(82,38,83);vertical-align:top;text-align:center;padding:15px 0 0;"}),h=(0,c.Z)("nav",{target:"e1yu0217"})({name:"1o7bixd",styles:"width:260px;display:inline-flex;flex-direction:column;background:#3f0e40;color:rgb(188,171,188);vertical-align:top;& a{padding-left:36px;color:inherit;text-decoration:none;height:28px;line-height:28px;display:flex;align-items:center;&.selected{color:white;}}& .bold{color:white;font-weight:bold;}& .count{margin-left:auto;background:#cd2553;border-radius:16px;display:inline-block;font-size:12px;font-weight:700;height:18px;line-height:18px;padding:0 9px;color:white;margin-right:16px;}& h2{height:36px;line-height:36px;margin:0;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:15px;}"}),b=(0,c.Z)("button",{target:"e1yu0218"})({name:"mf88dq",styles:"height:64px;line-height:64px;border:none;width:100%;text-align:left;border-top:1px solid rgb(82,38,83);border-bottom:1px solid rgb(82,38,83);font-weight:900;font-size:24px;background:transparent;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;padding:0;padding-left:16px;margin:0;color:white;cursor:pointer;"}),x=(0,c.Z)("div",{target:"e1yu0219"})({name:"177dxab",styles:"flex:1;overflow-y:auto;"}),f=(0,c.Z)("div",{target:"e1yu02110"})({name:"1gcspn6",styles:"padding:10px 0 0;& h2{padding-left:20px;}& > button{width:100%;height:28px;padding:4px;border:none;background:transparent;border-top:1px solid rgb(28,29,28);cursor:pointer;&:last-of-type{border-bottom:1px solid rgb(28,29,28);}}"}),k=(0,c.Z)("div",{target:"e1yu02111"})({name:"1rr4qq7",styles:"flex:1;"}),E=(0,c.Z)("button",{target:"e1yu02112"})({name:"1u5ecpm",styles:"color:white;font-size:24px;display:inline-block;width:40px;height:40px;background:transparent;border:none;cursor:pointer;"}),y=(0,c.Z)("button",{target:"e1yu02113"})({name:"1uwj8s5",styles:"display:inline-block;width:40px;height:40px;border-radius:10px;background:white;border:3px solid #3f0e40;margin-bottom:15px;font-size:18px;font-weight:700;color:black;cursor:pointer;"}),w=(0,c.Z)("button",{target:"e1yu02114"})("background:transparent;border:none;width:26px;height:26px;display:inline-flex;justify-content:center;align-items:center;color:white;margin-left:10px;cursor:pointer;",(({collapse:e})=>e&&"\n    & i {\n      transform: none;\n    }\n  "),";");var v=n(7294),_=n(5977),C=n(3727);const Z=({userData:e,channelData:t})=>{const{workspace:n}=(0,_.UO)(),[a]=o(n),[r,l]=(0,v.useState)(!1),[c,i]=(0,v.useState)({}),s=(0,v.useCallback)((()=>{l((e=>!e))}),[]),d=(0,v.useCallback)((e=>()=>{i((t=>({...t,[e]:void 0})))}),[]);(0,v.useEffect)((()=>{console.log("workspace 바꼈다",n),i({})}),[n]);const p=(0,v.useCallback)((t=>{console.log("message왔다",t);const n=t.content.match(/@\[(.+?)\]\((\d)\)/g);if(n?.find((t=>t.match(/@\[(.+?)\]\((\d)\)/)[2]===e?.id.toString())))return i((e=>({...e,["c-"+t.ChannelId]:(e["c-"+t.ChannelId]||0)+1})));i((e=>({...e,["c-"+t.ChannelId]:e["c-"+t.ChannelId]||0})))}),[e]);return(0,v.useEffect)((()=>(a?.on("message",p),console.log("socket on message",a?.hasListeners("message"),a),()=>{a?.off("message",p),console.log("socket off message",a?.hasListeners("message"))})),[a,e]),v.createElement(v.Fragment,null,v.createElement("h2",null,v.createElement(w,{collapse:r,onClick:s},v.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),v.createElement("span",null,"Channels")),v.createElement("div",null,!r&&t?.map((e=>{const t=c[`c-${e.id}`];return v.createElement(C.OL,{key:e.name,activeClassName:"selected",to:`/workspace/${n}/channel/${e.name}`,onClick:d(`c-${e.id}`)},v.createElement("span",{className:t!==undefined&&t>=0?"bold":undefined},"# ",e.name),t!==undefined&&t>0&&v.createElement("span",{className:"count"},t))}))))};var S=n(3564),$=n(6848);const z=({userData:e})=>{const{workspace:t}=(0,_.UO)(),{data:n}=(0,$.ZP)(e?`/api/workspace/${t}/members`:null,S.Z),[a]=o(t),[r,l]=(0,v.useState)(!1),[c,i]=(0,v.useState)({}),[s,d]=(0,v.useState)([]),p=(0,v.useCallback)((()=>{l((e=>!e))}),[]),m=(0,v.useCallback)((e=>()=>{i((t=>({...t,[e]:0})))}),[]);(0,v.useEffect)((()=>{console.log("workspace 바꼈다",t),d([]),i({})}),[t]);const u=(0,v.useCallback)((e=>{console.log("dm왔다",e),i((t=>({...t,[e.SenderId]:t[e.SenderId]?t[e.SenderId]+1:1})))}),[]);return(0,v.useEffect)((()=>(a?.on("onlineList",(e=>{d(e)})),a?.on("dm",u),console.log("socket on dm",a?.hasListeners("dm"),a),()=>{a?.off("dm",u),console.log("socket off dm",a?.hasListeners("dm")),a?.off("onlineList")})),[a]),v.createElement(v.Fragment,null,v.createElement("h2",null,v.createElement(w,{collapse:r,onClick:p},v.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),v.createElement("span",null,"Direct Messages")),v.createElement("div",null,!r&&n?.map((n=>{const a=s.includes(n.id);const r=c[n.id]||0;return v.createElement(C.OL,{key:n.id,activeClassName:"selected",to:`/workspace/${t}/dm/${n.id}`,onClick:m(n.id)},v.createElement("i",{className:`c-icon p-channel_sidebar__presence_icon p-channel_sidebar__presence_icon--dim_enabled c-presence ${a?"c-presence--active c-icon--presence-online":"c-icon--presence-offline"}`,"aria-hidden":"true","data-qa":"presence_indicator","data-qa-presence-self":"false","data-qa-presence-active":"false","data-qa-presence-dnd":"false"}),v.createElement("span",{className:r>0?"bold":undefined},n.nickname),n.id===e?.id&&v.createElement("span",null," (나)"),r>0&&v.createElement("span",{className:"count"},r))}))))},I=(0,c.Z)("div",{target:"eus8aqr0"})({name:"lwth7x",styles:"position:fixed;top:0;right:0;left:0;bottom:0;z-index:1000;& > div{position:absolute;display:inline-block;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 0 0 1px var(--saf-0),0 4px 12px 0 rgba(0,0,0,0.12);background-color:rgba(var(--sk_foreground_min_solid,248,248,248),1);border-radius:6px;user-select:none;min-width:360px;z-index:512;max-height:calc(100vh - 20px);color:rgb(29,28,29);}"}),q=(0,c.Z)("button",{target:"eus8aqr1"})({name:"87xlfi",styles:"position:absolute;right:10px;top:6px;background:transparent;border:none;font-size:30px;cursor:pointer;"}),D=({closeButton:e,style:t,show:n,children:a,onCloseModal:r})=>{const l=(0,v.useCallback)((e=>{e.stopPropagation()}),[]);return n?v.createElement(I,{onClick:r},v.createElement("div",{onClick:l,style:t},e&&v.createElement(q,{onClick:r},"×"),a)):null};D.defaultProps={closeButton:!0};const A=D,B=(0,c.Z)("div",{target:"e1q3ybao0"})({name:"1ol8hdt",styles:"position:fixed;text-align:center;left:0;bottom:0;top:0;right:0;z-index:1022;& > div{margin-top:200px;display:inline-block;width:440px;background:white;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 0 0 1px var(--saf-0),0 4px 12px 0 rgba(0,0,0,0.12);background-color:rgba(var(--sk_foreground_min_solid,248,248,248),1);border-radius:6px;user-select:none;max-width:440px;padding:30px 40px 0;z-index:1012;position:relative;}"}),T=(0,c.Z)("button",{target:"e1q3ybao1"})({name:"87xlfi",styles:"position:absolute;right:10px;top:6px;background:transparent;border:none;font-size:30px;cursor:pointer;"}),N=({show:e,children:t,onCloseModal:n})=>{const a=(0,v.useCallback)((e=>{e.stopPropagation()}),[]);return e?v.createElement(B,{onClick:n},v.createElement("div",{onClick:a},v.createElement(T,{onClick:n},"×"),t)):null};var j=n(8678),M=n(1039);const P=(0,c.Z)("div",{target:"e298qi10"})({name:"136i1lu",styles:"display:flex;width:100%;padding:20px;padding-top:0;"}),U=(0,c.Z)("form",{target:"e298qi11"})({name:"1128hi6",styles:"color:rgb(29,28,29);font-size:15px;width:100%;border-radius:4px;border:1px solid rgb(29,28,29);"}),O=(0,c.Z)(M.r,{target:"e298qi12"})({name:"bvwju5",styles:"width:100%;border:none;font-family:Slack-Lato,appleLogo,sans-serif;font-size:15px;padding:9px 10px;background:white;border-radius:4px;& textarea{height:44px;padding:9px 10px !important;outline:none !important;border-radius:4px !important;resize:none !important;line-height:22px;border:none;}& ul{border:1px solid lightgray;max-height:200px;overflow-y:auto;padding:9px 10px;background:white;border-radius:4px;width:150px;}"}),L=(0,c.Z)("div",{target:"e298qi13"})({name:"10ldyej",styles:"position:relative;background:rgb(248,248,248);height:41px;display:flex;border-top:1px solid rgb(221,221,221);align-items:center;border-radius:4px;"}),R=(0,c.Z)("button",{target:"e298qi14"})({name:"b9l5gg",styles:"position:absolute;right:5px;top:5px;"}),W=(0,c.Z)("button",{target:"e298qi15"})("padding:4px 20px;background:transparent;border:none;display:flex;align-items:center;color:rgb(28,29,28);width:100%;& img{margin-right:5px;}",(({focus:e})=>e&&"\n    background: #1264a3;\n    color: white;\n  "),";&:hover{background:#1264a3;color:white;}");var F=n(9367),H=n.n(F),Y=n(6182),K=n.n(Y);const G=({onSubmitForm:e,chat:t,onChangeChat:n,placeholder:a,data:r})=>{(0,v.useEffect)((()=>{H()(document.querySelector("#editor-chat"))}),[t]);const l=(0,v.useCallback)((t=>{"Enter"===t.key&&(t.shiftKey||(t.preventDefault(),e(t)))}),[t]),o=(0,v.useCallback)(((e,t,n,a,l)=>r?v.createElement(W,{focus:l},v.createElement("img",{src:K().url(r[a].email,{s:"20px"}),alt:r[a].nickname}),v.createElement("span",null,r[a].nickname)):null),[r]);return v.createElement(P,null,v.createElement(U,{onSubmit:e},v.createElement(O,{id:"editor-chat",value:t,onChange:n,onKeyDown:l,placeholder:a},v.createElement(M.p,{appendSpaceOnAdd:!0,style:{background:"rgba(29, 155, 209, .1)",color:"rgb(18, 100, 163)"},trigger:"@",data:r?.map((e=>({id:e.id,display:e.nickname})))||[],renderSuggestion:o})),v.createElement(L,null,v.createElement(R,{className:"c-button-unstyled c-icon_button c-icon_button--light c-icon_button--size_medium c-texty_input__button c-texty_input__button--send"+(t?.trim()?"":" c-texty_input__button--disabled"),"data-qa":"texty_send_button","aria-label":"Send message","data-sk":"tooltip_parent",type:"submit",disabled:!t?.trim()},v.createElement("i",{className:"c-icon c-icon--paperplane-filled","aria-hidden":"true"})))))},J=(0,c.Z)("div",{target:"ec89ap00"})({name:"13fa69t",styles:"display:flex;padding:8px 20px;&:hover{background:#eee;}& > div:first-of-type{display:flex;width:36px;margin-right:8px;& img{width:36px;height:36px;}}& > div:last-of-type{display:flex;flex:1;}& a{text-decoration:none;color:deepskyblue;}"});var Q=n(7484),V=n.n(Q),X=n(8817);const ee=({data:e})=>{const{workspace:t}=(0,_.UO)(),n="Sender"in e?e.Sender:e.User,a=(0,X.Z)({pattern:/@\[(.+?)\]\((\d)\)/g,decorator(e,n){const a=e.match(/@\[(.+?)\]\((\d)\)/);return v.createElement(C.rU,{key:e+n,to:`/workspace/${t}/dm/${a[2]}`},"@",a[1])},input:e.content});return v.createElement(J,null,v.createElement("div",null,v.createElement("img",{src:K().url(n.email,{s:"36px"}),alt:n.nickname})),v.createElement("div",{style:{flexWrap:"wrap"}},v.createElement("div",{style:{display:"flex",flex:"0 0 100%",alignItems:"center"}},v.createElement("b",{style:{marginRight:5}},n.nickname),v.createElement("span",{style:{fontSize:12}},V()(e.createdAt).format("h:mm A"))),v.createElement("p",{style:{flex:"0 0 100%",margin:0}},a)))},te=(0,c.Z)("div",{target:"e1jqbxcr0"})({name:"1dpnw7g",styles:"width:100%;display:flex;flex:1;"}),ne=(0,c.Z)("section",{target:"e1jqbxcr1"})({name:"j6nott",styles:"margin-top:20px;border-top:1px solid #eee;"}),ae=(0,c.Z)("div",{target:"e1jqbxcr2"})({name:"8ji0yp",styles:"display:flex;justify-content:center;flex:1;width:100%;position:sticky;top:14px;& button{font-weight:bold;font-size:13px;height:28px;line-height:27px;padding:0 16px;z-index:2;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 0 0 1px var(--saf-0),0 1px 3px 0 rgba(0,0,0,0.08);border-radius:24px;position:relative;top:-13px;background:white;border:none;outline:none;}"});var re=n(1298);const le=({scrollbarRef:e,isReachingEnd:t,isEmpty:n,chatSections:a,setSize:r})=>{const l=(0,v.useCallback)((a=>{0!==a.scrollTop||t||n||r((e=>e+1)).then((()=>{e.current?.scrollTop(e.current?.getScrollHeight()-a.scrollHeight)}))}),[t,n]);return v.createElement(te,null,v.createElement(re.$B,{autoHide:!0,ref:e,onScrollFrame:l},Object.entries(a).map((([e,t])=>v.createElement(ne,{className:"section-"+e,key:e},v.createElement(ae,null,v.createElement("button",null,e)),t.map((e=>v.createElement(ee,{key:e.id,data:e}))))))))},oe=(0,c.Z)("header",{target:"exhfy1p0"})({name:"10in16a",styles:"height:64px;display:flex;width:100%;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 1px 0 var(--saf-0);padding:20px 16px 20px 20px;font-weight:bold;align-items:center;"});var ce=n(3046);function ie(e){const t={};return e.forEach((e=>{const n=V()(e.createdAt).format("YYYY-MM-DD");Array.isArray(t[n])?t[n].push(e):t[n]=[e]})),t}var se=n(9669),de=n.n(se),pe=n(4723);const me=()=>{const{workspace:e,channel:t}=(0,_.UO)(),[n]=o(e),{data:a,revalidate:r}=(0,$.ZP)("/api/user",S.Z),{data:l}=(0,$.ZP)(`/api/workspace/${e}/channels`,S.Z),c=l?.find((e=>e.name===t)),{data:i,revalidate:s,mutate:d,setSize:p}=(0,$.g_)((n=>`/api/workspace/${e}/channel/${t}/chats?perPage=20&page=${n+1}`),S.Z),{data:m,revalidate:u}=(0,$.ZP)(a?`/api/workspace/${e}/channel/${t}/members`:null,S.Z),[g,h,b]=(0,j.Z)(""),[x,f,k]=(0,j.Z)(""),[E,y]=(0,v.useState)(!1),w=(0,v.useRef)(null),C=0===i?.[0]?.length,Z=C||i&&i[i.length-1]?.length<20,z=(0,v.useCallback)((n=>{n.preventDefault(),x&&x.trim()&&de().post(`/api/workspace/${e}/channel/${t}/member`,{email:x}).then((()=>{u(),y(!1),k("")})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[x]),I=(0,v.useCallback)((()=>{y(!1)}),[]),q=(0,v.useCallback)((n=>{if(n.preventDefault(),g?.trim()&&i&&c&&a){const n=g;d((e=>(e[0].unshift({id:(i[0][0]?.id||0)+1,content:n,UserId:a.id,User:a,createdAt:new Date,ChannelId:c.id,Channel:c}),e)),!1).then((()=>{b(""),w.current&&(console.log("scrollToBottom!"),w.current.scrollToBottom())})),de().post(`/api/workspace/${e}/channel/${t}/chat`,{content:n}).catch(console.error)}}),[g,e,t,c,w.current,a,i]),D=(0,v.useCallback)((e=>{e.Channel.name===t&&e.UserId!==a?.id&&d((t=>(t[0].unshift(e),t)),!1).then((()=>{w.current&&(w.current.getScrollHeight()<w.current.getClientHeight()+w.current.getScrollTop()+150?(console.log("scrollToBottom!"),w.current.scrollToBottom()):pe.Am.success("새 메시지가 도착했습니다.",{onClick(){w.current?.scrollToBottom()},closeOnClick:!0}))}))}),[w.current,a]);(0,v.useEffect)((()=>(n?.on("message",D),()=>{n?.off("message",D)})),[w.current,n,a]),(0,v.useEffect)((()=>{1===i?.length&&(console.log("toBottom",i),w.current?.scrollToBottom())}),[i,w.current]);const A=(0,v.useCallback)((()=>{y(!0)}),[]);if(l&&!c)return v.createElement(_.l_,{to:`/workspace/${e}/channel/일반`});const B=ie(i?[].concat(...i).reverse():[]);return v.createElement("div",{style:{display:"flex",flexWrap:"wrap",height:"calc(100vh - 38px)",flexFlow:"column"}},v.createElement(oe,null,v.createElement("span",null,"#",t),v.createElement("div",{style:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"center"}},v.createElement("span",null,m?.length),v.createElement("button",{onClick:A,className:"c-button-unstyled p-ia__view_header__button","aria-label":"Add people to #react-native","data-sk":"tooltip_parent",type:"button"},v.createElement("i",{className:"c-icon p-ia__view_header__button_icon c-icon--add-user","aria-hidden":"true"})))),v.createElement(le,{scrollbarRef:w,isReachingEnd:Z,isEmpty:C,chatSections:B,setSize:p}),v.createElement(G,{onSubmitForm:q,chat:g,onChangeChat:h,placeholder:"Message #"+t,data:m}),v.createElement(N,{show:E,onCloseModal:I},v.createElement("form",{onSubmit:z},v.createElement(ce.__,{id:"member-label"},v.createElement("span",null,"채널 멤버 초대"),v.createElement(ce.II,{id:"member",value:x,onChange:f})),v.createElement(ce.zx,{type:"submit"},"생성하기"))),v.createElement(pe.Ix,{position:"bottom-center"}))},ue=(0,c.Z)("header",{target:"egh2dki0"})({name:"i5rome",styles:"height:64px;display:flex;width:100%;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 1px 0 var(--saf-0);padding:20px 16px 20px 20px;font-weight:bold;align-items:center;& img{margin-right:5px;}"}),ge=()=>{const{workspace:e,id:t}=(0,_.UO)(),[n]=o(e),{data:a}=(0,$.ZP)("/api/user",S.Z),{data:r}=(0,$.ZP)(`/api/workspace/${e}/user/${t}`,S.Z),{data:l,revalidate:c,mutate:i,setSize:s}=(0,$.g_)((n=>`/api/workspace/${e}/dm/${t}/chats?perPage=20&page=${n+1}`),S.Z),[d,p,m]=(0,j.Z)(""),u=(0,v.useRef)(null),g=0===l?.[0]?.length,h=g||l&&l[l.length-1]?.length<20,b=(0,v.useCallback)((n=>{if(n.preventDefault(),d?.trim()&&l){const n=d;i((e=>(e[0].unshift({id:(l[0][0]?.id||0)+1,content:n,SenderId:a.id,Sender:a,ReceiverId:r.id,Receiver:r,createdAt:new Date}),e)),!1).then((()=>{m(""),u.current&&(console.log("scrollToBottom!"),u.current.scrollToBottom())})),de().post(`/api/workspace/${e}/dm/${t}/chat`,{content:d}).catch(console.error)}}),[d,e,t,u.current,r,l]),x=(0,v.useCallback)((e=>{e.SenderId===Number(t)&&a.id!==Number(t)&&i((t=>(t[0].unshift(e),t)),!1).then((()=>{u.current&&(u.current.getScrollHeight()<u.current.getClientHeight()+u.current.getScrollTop()+150?(console.log("scrollToBottom!"),u.current.scrollToBottom()):pe.Am.success("새 메시지가 도착했습니다.",{onClick(){u.current?.scrollToBottom()},closeOnClick:!0}))}))}),[u.current,t]);if((0,v.useEffect)((()=>(n?.on("dm",x),()=>{n?.off("dm",x)})),[u.current,n,t]),(0,v.useEffect)((()=>{1===l?.length&&(console.log("toBottom",l),u.current?.scrollToBottom())}),[l,u.current]),!r||!a)return null;const f=ie(l?[].concat(...l).reverse():[]);return v.createElement("div",{style:{display:"flex",flexWrap:"wrap",height:"calc(100vh - 38px)",flexFlow:"column"}},v.createElement(ue,null,v.createElement("img",{src:K().url(r.email,{s:"24px"}),alt:r.nickname}),v.createElement("span",null,r.nickname)),v.createElement(le,{scrollbarRef:u,isReachingEnd:h,isEmpty:g,chatSections:f,setSize:s}),v.createElement(G,{onSubmitForm:b,chat:d,onChangeChat:p,placeholder:"Message "+r.nickname,data:[]}))};n(5202);const he=()=>{const e=(0,_.UO)(),{workspace:t}=((0,_.TH)(),(0,_.$B)(),(0,_.k6)(),e),[n,a]=o(t),{data:r,revalidate:l}=(0,$.ZP)("/api/user",S.Z),{data:c,revalidate:w}=(0,$.ZP)(r?`/api/workspace/${t}/channels`:null,S.Z);console.log("rerender","userData",r,"channelData",c);const[I,q]=(0,v.useState)(!1),[D,B]=(0,v.useState)(!1),[T,M]=(0,v.useState)(!1),[P,U]=(0,v.useState)(!1),[O,L]=(0,v.useState)(!1),[R,W,F]=(0,j.Z)(""),[H,Y,G]=(0,j.Z)(""),[J,Q,V]=(0,j.Z)(""),[X,ee,te]=(0,j.Z)(""),ne=(0,v.useCallback)((()=>{de().post("/api/logout").then((()=>{l()})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[]),ae=(0,v.useCallback)((e=>{e.preventDefault(),R&&R.trim()&&H&&H.trim()&&de().post("/api/workspace",{workspace:R,url:H}).then((()=>{l(),q(!1),F(""),G("")})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[R,H]),re=(0,v.useCallback)((e=>{e.preventDefault(),J&&J.trim()&&de().post(`/api/workspace/${t}/channel`,{name:J}).then((()=>{w(),M(!1),V("")})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[J]),le=(0,v.useCallback)((e=>{e.preventDefault(),X&&X.trim()&&de().post(`/api/workspace/${t}/member`,{email:X}).then((()=>{w(),B(!1),te("")})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[X]),oe=(0,v.useCallback)((()=>{q(!0)}),[]),ie=(0,v.useCallback)((()=>{M(!0)}),[]),se=(0,v.useCallback)((()=>{B(!0)}),[]),ue=(0,v.useCallback)((()=>{q(!1),M(!1),B(!1)}),[]),he=(0,v.useCallback)((()=>{U((e=>!e))}),[]),be=(0,v.useCallback)((()=>{L((e=>!e))}),[]);return(0,v.useEffect)((()=>()=>{console.info("disconnect socket",t),a()}),[t]),(0,v.useEffect)((()=>{c&&r&&(console.info("로그인하자"),n?.emit("login",{id:r?.id,channels:c.map((e=>e.id))}))}),[r,c]),!1===r?v.createElement(_.l_,{to:"/login"}):r&&!r.Workspaces.find((e=>e.url===t))?v.createElement(_.l_,{to:"/workspace/sleact/channel/일반"}):v.createElement("div",null,v.createElement(s,null,r&&v.createElement(i,null,v.createElement("span",{onClick:he},v.createElement(d,{src:K().url(r.email,{s:"28px"}),alt:r.nickname})),P&&v.createElement(A,{style:{right:0,top:38},show:P,onCloseModal:he},v.createElement(p,{style:{display:"flex"}},v.createElement("img",{src:K().url(r.email,{s:"36px"}),alt:r.nickname}),v.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:10}},v.createElement("span",{id:"profile-name"},r.nickname),v.createElement("span",{id:"profile-active"},"Active"))),v.createElement(m,{onClick:ne},"로그아웃")))),v.createElement(u,null,v.createElement(g,null,r?.Workspaces.map((e=>v.createElement(C.rU,{key:e.id,to:`/workspace/${e.url}/channel/일반`},v.createElement(y,null,e.name.slice(0,1).toUpperCase())))),v.createElement(E,{onClick:oe},"+")),v.createElement(h,null,v.createElement(b,{onClick:be},r?.Workspaces.find((e=>e.url===t))?.name),v.createElement(x,null,v.createElement(A,{show:O,onCloseModal:be,style:{top:95,left:80}},v.createElement(f,null,v.createElement("h2",null,r?.Workspaces.find((e=>e.url===t))?.name),v.createElement("button",{onClick:se},"워크스페이스에 사용자 초대"),v.createElement("button",{onClick:ie},"채널 만들기"),v.createElement("button",{onClick:ne},"로그아웃"))),v.createElement(Z,{userData:r,channelData:c}),v.createElement(z,{userData:r}))),v.createElement(k,null,v.createElement(_.rs,null,v.createElement(_.AW,{path:"/workspace/:workspace/channel/:channel",component:me}),v.createElement(_.AW,{path:"/workspace/:workspace/dm/:id",component:ge})))),v.createElement(N,{show:I,onCloseModal:ue},v.createElement("form",{onSubmit:ae},v.createElement(ce.__,{id:"workspace-label"},v.createElement("span",null,"워크스페이스 이름"),v.createElement(ce.II,{id:"workspace",value:R,onChange:W})),v.createElement(ce.__,{id:"workspace-url-label"},v.createElement("span",null,"워크스페이스 url"),v.createElement(ce.II,{id:"workspace-url",value:H,onChange:Y})),v.createElement(ce.zx,{type:"submit"},"생성하기"))),v.createElement(N,{show:T,onCloseModal:ue},v.createElement("form",{onSubmit:re},v.createElement(ce.__,{id:"channel-label"},v.createElement("span",null,"채널 이름"),v.createElement(ce.II,{id:"channel",value:J,onChange:Q})),v.createElement(ce.zx,null,"생성하기"))),v.createElement(N,{show:D,onCloseModal:ue},v.createElement("form",{onSubmit:le},v.createElement(ce.__,{id:"member-label"},v.createElement("span",null,"이메일"),v.createElement(ce.II,{id:"member",type:"email",value:X,onChange:ee})),v.createElement(ce.zx,{type:"submit"},"초대하기"))),v.createElement(pe.Ix,{position:"bottom-center"}))}},418:()=>{}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9ob29rcy91c2VTb2NrZXQudHMiLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vbGF5b3V0cy9Xb3Jrc3BhY2Uvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYW5uZWxMaXN0L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0RNTGlzdC9pbmRleC50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9NZW51L3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9NZW51L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL01vZGFsL3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9Nb2RhbC9pbmRleC50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9DaGF0Qm94L3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9DaGF0Qm94L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXQvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXQvaW5kZXgudHN4Iiwid2VicGFjazovL3NsZWFjdC10cy1mcm9udC8uL2NvbXBvbmVudHMvQ2hhdExpc3Qvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXRMaXN0L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9wYWdlcy9DaGFubmVsL3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vdXRpbHMvbWFrZVNlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vcGFnZXMvQ2hhbm5lbC9pbmRleC50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vcGFnZXMvRGlyZWN0TWVzc2FnZS9zdHlsZXMudHN4Iiwid2VicGFjazovL3NsZWFjdC10cy1mcm9udC8uL3BhZ2VzL0RpcmVjdE1lc3NhZ2UvaW5kZXgudHN4Iiwid2VicGFjazovL3NsZWFjdC10cy1mcm9udC8uL2xheW91dHMvV29ya3NwYWNlL2luZGV4LnRzeCJdLCJuYW1lcyI6WyJzb2NrZXRzIiwid29ya3NwYWNlIiwidW5kZWZpbmVkIiwiZGlzY29ubmVjdCIsImlvIiwidHJhbnNwb3J0cyIsImNvbnNvbGUiLCJpbmZvIiwiaWQiLCJSaWdodE1lbnUiLCJIZWFkZXIiLCJQcm9maWxlSW1nIiwiUHJvZmlsZU1vZGFsIiwiTG9nT3V0QnV0dG9uIiwiV29ya3NwYWNlV3JhcHBlciIsIldvcmtzcGFjZXMiLCJDaGFubmVscyIsIldvcmtzcGFjZU5hbWUiLCJNZW51U2Nyb2xsIiwiV29ya3NwYWNlTW9kYWwiLCJDaGF0cyIsIkFkZEJ1dHRvbiIsIldvcmtzcGFjZUJ1dHRvbiIsIkNvbGxhcHNlQnV0dG9uIiwiY29sbGFwc2UiLCJ1c2VyRGF0YSIsImNoYW5uZWxEYXRhIiwidXNlUGFyYW1zIiwic29ja2V0IiwidXNlU29ja2V0IiwiY2hhbm5lbENvbGxhcHNlIiwic2V0Q2hhbm5lbENvbGxhcHNlIiwidXNlU3RhdGUiLCJjb3VudExpc3QiLCJzZXRDb3VudExpc3QiLCJ0b2dnbGVDaGFubmVsQ29sbGFwc2UiLCJ1c2VDYWxsYmFjayIsInByZXYiLCJyZXNldENvdW50IiwibGlzdCIsInVzZUVmZmVjdCIsImxvZyIsIm9uTWVzc2FnZSIsImRhdGEiLCJtZW50aW9ucyIsImNvbnRlbnQiLCJtYXRjaCIsImZpbmQiLCJ2IiwidG9TdHJpbmciLCJDaGFubmVsSWQiLCJvbiIsImhhc0xpc3RlbmVycyIsIm9mZiIsIm9uQ2xpY2siLCJjbGFzc05hbWUiLCJkYXRhLXFhIiwiYXJpYS1oaWRkZW4iLCJtYXAiLCJjaGFubmVsIiwiY291bnQiLCJrZXkiLCJuYW1lIiwiYWN0aXZlQ2xhc3NOYW1lIiwidG8iLCJtZW1iZXJEYXRhIiwidXNlU1dSIiwiZmV0Y2hlciIsIm9ubGluZUxpc3QiLCJzZXRPbmxpbmVMaXN0IiwiU2VuZGVySWQiLCJtZW1iZXIiLCJpc09ubGluZSIsImluY2x1ZGVzIiwiZGF0YS1xYS1wcmVzZW5jZS1zZWxmIiwiZGF0YS1xYS1wcmVzZW5jZS1hY3RpdmUiLCJkYXRhLXFhLXByZXNlbmNlLWRuZCIsIm5pY2tuYW1lIiwiQ3JlYXRlTWVudSIsIkNsb3NlTW9kYWxCdXR0b24iLCJNZW51IiwiY2xvc2VCdXR0b24iLCJzdHlsZSIsInNob3ciLCJjaGlsZHJlbiIsIm9uQ2xvc2VNb2RhbCIsInN0b3BQcm9wYWdhdGlvbiIsImUiLCJkZWZhdWx0UHJvcHMiLCJDcmVhdGVNb2RhbCIsIkNoYXRBcmVhIiwiRm9ybSIsIk1lbnRpb25zVGV4dGFyZWEiLCJNZW50aW9uc0lucHV0IiwiVG9vbGJveCIsIlNlbmRCdXR0b24iLCJFYWNoTWVudGlvbiIsImZvY3VzIiwib25TdWJtaXRGb3JtIiwiY2hhdCIsIm9uQ2hhbmdlQ2hhdCIsInBsYWNlaG9sZGVyIiwiYXV0b3NpemUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJvbktleWRvd25DaGF0Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsInJlbmRlclVzZXJTdWdnZXN0aW9uIiwic2VhcmNoIiwiaGlnaGxpZ2h0ZWREaXNwbGF5IiwiaW5kZXgiLCJzcmMiLCJncmF2YXRhciIsImVtYWlsIiwicyIsImFsdCIsIm9uU3VibWl0IiwidmFsdWUiLCJvbkNoYW5nZSIsIm9uS2V5RG93biIsImFwcGVuZFNwYWNlT25BZGQiLCJiYWNrZ3JvdW5kIiwiY29sb3IiLCJ0cmlnZ2VyIiwiZGlzcGxheSIsInJlbmRlclN1Z2dlc3Rpb24iLCJ0cmltIiwiYXJpYS1sYWJlbCIsImRhdGEtc2siLCJ0eXBlIiwiZGlzYWJsZWQiLCJDaGF0V3JhcHBlciIsInVzZXIiLCJTZW5kZXIiLCJVc2VyIiwicmVzdWx0IiwicmVnZXhpZnlTdHJpbmciLCJwYXR0ZXJuIiwiZGVjb3JhdG9yIiwiYXJyIiwiaW5wdXQiLCJmbGV4V3JhcCIsImZsZXgiLCJhbGlnbkl0ZW1zIiwibWFyZ2luUmlnaHQiLCJmb250U2l6ZSIsImRheWpzIiwiY3JlYXRlZEF0IiwiZm9ybWF0IiwibWFyZ2luIiwiQ2hhdFpvbmUiLCJTZWN0aW9uIiwiU3RpY2t5SGVhZGVyIiwic2Nyb2xsYmFyUmVmIiwiaXNSZWFjaGluZ0VuZCIsImlzRW1wdHkiLCJjaGF0U2VjdGlvbnMiLCJzZXRTaXplIiwib25TY3JvbGwiLCJ2YWx1ZXMiLCJzY3JvbGxUb3AiLCJzaXplIiwidGhlbiIsImN1cnJlbnQiLCJnZXRTY3JvbGxIZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJhdXRvSGlkZSIsInJlZiIsIm9uU2Nyb2xsRnJhbWUiLCJPYmplY3QiLCJlbnRyaWVzIiwiZGF0ZSIsImNoYXRzIiwibWFrZVNlY3Rpb24iLCJjaGF0TGlzdCIsInNlY3Rpb25zIiwiZm9yRWFjaCIsIm1vbnRoRGF0ZSIsIkFycmF5IiwiaXNBcnJheSIsInB1c2giLCJyZXZhbGlkYXRlIiwiY2hhbm5lbHNEYXRhIiwiY2hhdERhdGEiLCJyZXZhbGlkYXRlQ2hhdCIsIm11dGF0ZSIsIm11dGF0ZUNoYXQiLCJ1c2VTV1JJbmZpbml0ZSIsImNoYW5uZWxNZW1iZXJzRGF0YSIsInJldmFsaWRhdGVNZW1iZXJzIiwic2V0Q2hhdCIsInVzZUlucHV0IiwibmV3TWVtYmVyIiwib25DaGFuZ2VOZXdNZW1iZXIiLCJzZXROZXdNZW1iZXIiLCJzaG93SW52aXRlQ2hhbm5lbE1vZGFsIiwic2V0U2hvd0ludml0ZUNoYW5uZWxNb2RhbCIsInVzZVJlZiIsImxlbmd0aCIsIm9uSW52aXRlTWVtYmVyIiwiYXhpb3MiLCJjYXRjaCIsImVycm9yIiwiZGlyIiwidG9hc3QiLCJyZXNwb25zZSIsInBvc2l0aW9uIiwic2F2ZWRDaGF0IiwicHJldkNoYXREYXRhIiwidW5zaGlmdCIsIlVzZXJJZCIsIkRhdGUiLCJDaGFubmVsIiwic2Nyb2xsVG9Cb3R0b20iLCJnZXRDbGllbnRIZWlnaHQiLCJnZXRTY3JvbGxUb3AiLCJjbG9zZU9uQ2xpY2siLCJvbkNsaWNrSW52aXRlQ2hhbm5lbCIsImNvbmNhdCIsInJldmVyc2UiLCJoZWlnaHQiLCJmbGV4RmxvdyIsImp1c3RpZnlDb250ZW50IiwibXlEYXRhIiwiUmVjZWl2ZXJJZCIsIlJlY2VpdmVyIiwiTnVtYmVyIiwicGFyYW1zIiwidXNlTG9jYXRpb24iLCJ1c2VSb3V0ZU1hdGNoIiwidXNlSGlzdG9yeSIsImRpc2Nvbm5lY3RTb2NrZXQiLCJyZXZhbGlkYXRlVXNlciIsInJldmFsaWRhdGVDaGFubmVsIiwic2hvd0NyZWF0ZVdvcmtzcGFjZU1vZGFsIiwic2V0U2hvd0NyZWF0ZVdvcmtzcGFjZU1vZGFsIiwic2hvd0ludml0ZVdvcmtzcGFjZU1vZGFsIiwic2V0U2hvd0ludml0ZVdvcmtzcGFjZU1vZGFsIiwic2hvd0NyZWF0ZUNoYW5uZWxNb2RhbCIsInNldFNob3dDcmVhdGVDaGFubmVsTW9kYWwiLCJzaG93VXNlck1lbnUiLCJzZXRTaG93VXNlck1lbnUiLCJzaG93V29ya3NwYWNlTW9kYWwiLCJzZXRTaG93V29ya3NwYWNlTW9kYWwiLCJuZXdXb3Jrc3BhY2UiLCJvbkNoYW5nZU5ld1dvcmtzcGFjZSIsInNldE5ld1dvcmtzcGFjZSIsIm5ld1VybCIsIm9uQ2hhbmdlTmV3VXJsIiwic2V0TmV3VXJsIiwibmV3Q2hhbm5lbCIsIm9uQ2hhbmdlTmV3Q2hhbm5lbCIsInNldE5ld0NoYW5uZWwiLCJvbkxvZ091dCIsIm9uQ3JlYXRlV29ya3NwYWNlIiwidXJsIiwib25DcmVhdGVDaGFubmVsIiwib25DbGlja0NyZWF0ZVdvcmtzcGFjZSIsIm9uQ2xpY2tBZGRDaGFubmVsIiwib25DbGlja0ludml0ZVdvcmtzcGFjZSIsIm9uQ2xpY2tVc2VyUHJvZmlsZSIsInRvZ2dsZVdvcmtzcGFjZU1vZGFsIiwiZW1pdCIsImNoYW5uZWxzIiwicmlnaHQiLCJ0b3AiLCJmbGV4RGlyZWN0aW9uIiwibWFyZ2luTGVmdCIsIndzIiwic2xpY2UiLCJ0b1VwcGVyQ2FzZSIsImxlZnQiLCJwYXRoIiwiY29tcG9uZW50IiwiRGlyZWN0TWVzc2FnZSJdLCJtYXBwaW5ncyI6InVLQUdBLE1BRU1BLEVBQW9ELEdBb0IxRCxFQW5CbUJDLElBQ2pCLElBQUtBLEVBQ0gsTUFBTyxNQUFDQyxFQUFXQyxHQVFyQixTQUFTQSxJQUNIRixHQUFhRCxFQUFRQyxLQUN2QkQsRUFBUUMsR0FBV0Usb0JBQ1pILEVBQVFDLElBR25CLE9BWktELEVBQVFDLEtBQ1hELEVBQVFDLEdBQWFHLElBQUksa0NBQWdCSCxFQUFhLENBQ3BESSxXQUFZLENBQUMsZUFFZkMsUUFBUUMsS0FBSyxnQkFBaUJOLEVBQVdELEVBQVFDLEdBQVdPLEtBUXZELENBQUNSLEVBQVFDLEdBQVlFLEksY0NwQnZCLE1BQU1NLEdBQVksY0FBSCxtQkFBRyxDQUFILHdDQUlUQyxHQUFTLGlCQUFILG1CQUFHLENBQUgsaUpBU05DLEdBQWEsY0FBSCxtQkFBRyxDQUFILHVGQVFWQyxHQUFlLGNBQUgsbUJBQUcsQ0FBSCx5S0FrQlpDLEdBQWUsaUJBQUgsbUJBQUcsQ0FBSCx1TEFZWkMsR0FBbUIsY0FBSCxtQkFBRyxDQUFILGdEQUtoQkMsR0FBYSxjQUFILG1CQUFHLENBQUgsb1BBYVZDLEdBQVcsY0FBSCxtQkFBRyxDQUFILHVuQkFvRFJDLEdBQWdCLGlCQUFILG1CQUFHLENBQUgsd1ZBcUJiQyxHQUFhLGNBQUgsbUJBQUcsQ0FBSCxtREFLVkMsR0FBaUIsY0FBSCxvQkFBRyxDQUFILCtQQXNCZEMsR0FBUSxjQUFILG9CQUFHLENBQUgsbUNBSUxDLEdBQVksaUJBQUgsb0JBQUcsQ0FBSCxxSkFXVEMsR0FBa0IsaUJBQUgsb0JBQUcsQ0FBSCxrTkFjZkMsR0FBaUIsaUJBQUgsb0JBQUcs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QUFXMUUsU0FBVTJFLE1BRTlELGdCQUFDLE1BQUQsQ0FBUWhFLEtBQUssVUFBYixVQUdKLGdCQUFDLE1BQUQsQ0FBZ0I2RSxTQUFTLHFCIiwiZmlsZSI6IjUwNi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBpbyBmcm9tICdzb2NrZXQuaW8tY2xpZW50JztcblxuY29uc3QgYmFja1VybCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnaHR0cHM6Ly9zbGVhY3Qubm9kZWJpcmQuY29tJyA6ICdodHRwOi8vbG9jYWxob3N0OjMwOTUnO1xuXG5jb25zdCBzb2NrZXRzOiB7IFtrZXk6IHN0cmluZ106IFNvY2tldElPQ2xpZW50LlNvY2tldCB9ID0ge307XG5jb25zdCB1c2VTb2NrZXQgPSAod29ya3NwYWNlPzogc3RyaW5nKTogW1NvY2tldElPQ2xpZW50LlNvY2tldCB8IHVuZGVmaW5lZCwgKCkgPT4gdm9pZF0gPT4ge1xuICBpZiAoIXdvcmtzcGFjZSkge1xuICAgIHJldHVybiBbdW5kZWZpbmVkLCBkaXNjb25uZWN0XTtcbiAgfVxuICBpZiAoIXNvY2tldHNbd29ya3NwYWNlXSkge1xuICAgIHNvY2tldHNbd29ya3NwYWNlXSA9IGlvKGAke2JhY2tVcmx9L3dzLSR7d29ya3NwYWNlfWAsIHtcbiAgICAgIHRyYW5zcG9ydHM6IFsnd2Vic29ja2V0J10sXG4gICAgfSk7XG4gICAgY29uc29sZS5pbmZvKCdjcmVhdGUgc29ja2V0Jywgd29ya3NwYWNlLCBzb2NrZXRzW3dvcmtzcGFjZV0uaWQpO1xuICB9XG4gIGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7XG4gICAgaWYgKHdvcmtzcGFjZSAmJiBzb2NrZXRzW3dvcmtzcGFjZV0pIHtcbiAgICAgIHNvY2tldHNbd29ya3NwYWNlXS5kaXNjb25uZWN0KCk7XG4gICAgICBkZWxldGUgc29ja2V0c1t3b3Jrc3BhY2VdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gW3NvY2tldHNbd29ya3NwYWNlXSwgZGlzY29ubmVjdF07XG59O1xuXG5leHBvcnQgZGVmYXVsdCB1c2VTb2NrZXQ7XG4iLCJpbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5cbmV4cG9ydCBjb25zdCBSaWdodE1lbnUgPSBzdHlsZWQuZGl2YFxuICBmbG9hdDogcmlnaHQ7XG5gO1xuXG5leHBvcnQgY29uc3QgSGVhZGVyID0gc3R5bGVkLmhlYWRlcmBcbiAgaGVpZ2h0OiAzOHB4O1xuICBiYWNrZ3JvdW5kOiAjMzUwZDM2O1xuICBjb2xvcjogI2ZmZmZmZjtcbiAgYm94LXNoYWRvdzogMCAxcHggMCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTtcbiAgcGFkZGluZzogNXB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG5gO1xuXG5leHBvcnQgY29uc3QgUHJvZmlsZUltZyA9IHN0eWxlZC5pbWdgXG4gIHdpZHRoOiAyOHB4O1xuICBoZWlnaHQ6IDI4cHg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA1cHg7XG4gIHJpZ2h0OiAxNnB4O1xuYDtcblxuZXhwb3J0IGNvbnN0IFByb2ZpbGVNb2RhbCA9IHN0eWxlZC5kaXZgXG4gIHBhZGRpbmc6IDIwcHg7XG5cbiAgJiBpbWcge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gIH1cblxuICAmICNwcm9maWxlLW5hbWUge1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICB9XG5cbiAgJiAjcHJvZmlsZS1hY3RpdmUge1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgfVxuYDtcblxuZXhwb3J0IGNvbnN0IExvZ091dEJ1dHRvbiA9IHN0eWxlZC5idXR0b25gXG4gIGJvcmRlcjogbm9uZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2IoMjksIDI4LCAyOSk7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBkaXNwbGF5OiBibG9jaztcbiAgaGVpZ2h0OiAzM3B4O1xuICBwYWRkaW5nOiA1cHggMjBweCA1cHg7XG4gIG91dGxpbmU6IG5vbmU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbmA7XG5cbmV4cG9ydCBjb25zdCBXb3Jrc3BhY2VXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleDogMTtcbmA7XG5cbmV4cG9ydCBjb25zdCBXb3Jrc3BhY2VzID0gc3R5bGVkLmRpdmBcbiAgd2lkdGg6IDY1cHg7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBiYWNrZ3JvdW5kOiAjM2YwZTQwO1xuICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiKDgyLCAzOCwgODMpO1xuICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCByZ2IoODIsIDM4LCA4Myk7XG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcGFkZGluZzogMTVweCAwIDA7XG5gO1xuXG5leHBvcnQgY29uc3QgQ2hhbm5lbHMgPSBzdHlsZWQubmF2YFxuICB3aWR0aDogMjYwcHg7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBiYWNrZ3JvdW5kOiAjM2YwZTQwO1xuICBjb2xvcjogcmdiKDE4OCwgMTcxLCAxODgpO1xuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuXG4gICYgYSB7XG4gICAgcGFkZGluZy1sZWZ0OiAzNnB4O1xuICAgIGNvbG9yOiBpbmhlcml0O1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICBoZWlnaHQ6IDI4cHg7XG4gICAgbGluZS1oZWlnaHQ6IDI4cHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuXG4gICAgJi5zZWxlY3RlZCB7XG4gICAgICBjb2xvcjogd2hpdGU7XG4gICAgfVxuICB9XG5cbiAgJiAuYm9sZCB7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICB9XG5cbiAgJiAuY291bnQge1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIGJhY2tncm91bmQ6ICNjZDI1NTM7XG4gICAgYm9yZGVyLXJhZGl1czogMTZweDtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgaGVpZ2h0OiAxOHB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxOHB4O1xuICAgIHBhZGRpbmc6IDAgOXB4O1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XG4gIH1cblxuICAmIGgyIHtcbiAgICBoZWlnaHQ6IDM2cHg7XG4gICAgbGluZS1oZWlnaHQ6IDM2cHg7XG4gICAgbWFyZ2luOiAwO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBmb250LXNpemU6IDE1cHg7XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBXb3Jrc3BhY2VOYW1lID0gc3R5bGVkLmJ1dHRvbmBcbiAgaGVpZ2h0OiA2NHB4O1xuICBsaW5lLWhlaWdodDogNjRweDtcbiAgYm9yZGVyOiBub25lO1xuICB3aWR0aDogMTAwJTtcbiAgdGV4dC1hbGlnbjogbGVmdDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYig4MiwgMzgsIDgzKTtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYig4MiwgMzgsIDgzKTtcbiAgZm9udC13ZWlnaHQ6IDkwMDtcbiAgZm9udC1zaXplOiAyNHB4O1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHBhZGRpbmc6IDA7XG4gIHBhZGRpbmctbGVmdDogMTZweDtcbiAgbWFyZ2luOiAwO1xuICBjb2xvcjogd2hpdGU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbmA7XG5cbmV4cG9ydCBjb25zdCBNZW51U2Nyb2xsID0gc3R5bGVkLmRpdmBcbiAgZmxleDogMTtcbiAgb3ZlcmZsb3cteTogYXV0bztcbmA7XG5cbmV4cG9ydCBjb25zdCBXb3Jrc3BhY2VNb2RhbCA9IHN0eWxlZC5kaXZgXG4gIHBhZGRpbmc6IDEwcHggMCAwO1xuXG4gICYgaDIge1xuICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgfVxuXG4gICYgPiBidXR0b24ge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMjhweDtcbiAgICBwYWRkaW5nOiA0cHg7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2IoMjgsIDI5LCAyOCk7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuXG4gICAgJjpsYXN0LW9mLXR5cGUge1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYigyOCwgMjksIDI4KTtcbiAgICB9XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBDaGF0cyA9IHN0eWxlZC5kaXZgXG4gIGZsZXg6IDE7XG5gO1xuXG5leHBvcnQgY29uc3QgQWRkQnV0dG9uID0gc3R5bGVkLmJ1dHRvbmBcbiAgY29sb3I6IHdoaXRlO1xuICBmb250LXNpemU6IDI0cHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgd2lkdGg6IDQwcHg7XG4gIGhlaWdodDogNDBweDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGJvcmRlcjogbm9uZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuYDtcblxuZXhwb3J0IGNvbnN0IFdvcmtzcGFjZUJ1dHRvbiA9IHN0eWxlZC5idXR0b25gXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgd2lkdGg6IDQwcHg7XG4gIGhlaWdodDogNDBweDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIGJvcmRlcjogM3B4IHNvbGlkICMzZjBlNDA7XG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gIGZvbnQtc2l6ZTogMThweDtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgY29sb3I6IGJsYWNrO1xuICBjdXJzb3I6IHBvaW50ZXI7XG5gO1xuXG5leHBvcnQgY29uc3QgQ29sbGFwc2VCdXR0b24gPSBzdHlsZWQuYnV0dG9uPHsgY29sbGFwc2U6IGJvb2xlYW4gfT5gXG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBib3JkZXI6IG5vbmU7XG4gIHdpZHRoOiAyNnB4O1xuICBoZWlnaHQ6IDI2cHg7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY29sb3I6IHdoaXRlO1xuICBtYXJnaW4tbGVmdDogMTBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuXG4gICR7KHsgY29sbGFwc2UgfSkgPT5cbiAgICBjb2xsYXBzZSAmJlxuICAgIGBcbiAgICAmIGkge1xuICAgICAgdHJhbnNmb3JtOiBub25lO1xuICAgIH1cbiAgYH07XG5gO1xuIiwiaW1wb3J0IHVzZVNvY2tldCBmcm9tICdAaG9va3MvdXNlU29ja2V0JztcbmltcG9ydCB7IENvbGxhcHNlQnV0dG9uIH0gZnJvbSAnQGxheW91dHMvV29ya3NwYWNlL3N0eWxlcyc7XG5pbXBvcnQgeyBJQ2hhbm5lbCwgSUNoYXQsIElVc2VyIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IFJlYWN0LCB7IEZDLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVBhcmFtcyB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5pbXBvcnQgeyBOYXZMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGNoYW5uZWxEYXRhPzogSUNoYW5uZWxbXTtcbiAgdXNlckRhdGE/OiBJVXNlcjtcbn1cblxuY29uc3QgQ2hhbm5lbExpc3Q6IEZDPFByb3BzPiA9ICh7IHVzZXJEYXRhLCBjaGFubmVsRGF0YSB9KSA9PiB7XG4gIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB1c2VQYXJhbXM8eyB3b3Jrc3BhY2U/OiBzdHJpbmcgfT4oKTtcbiAgY29uc3QgW3NvY2tldF0gPSB1c2VTb2NrZXQod29ya3NwYWNlKTtcbiAgY29uc3QgW2NoYW5uZWxDb2xsYXBzZSwgc2V0Q2hhbm5lbENvbGxhcHNlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvdW50TGlzdCwgc2V0Q291bnRMaXN0XSA9IHVzZVN0YXRlPHsgW2tleTogc3RyaW5nXTogbnVtYmVyIHwgdW5kZWZpbmVkIH0+KHt9KTtcblxuICBjb25zdCB0b2dnbGVDaGFubmVsQ29sbGFwc2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0Q2hhbm5lbENvbGxhcHNlKChwcmV2KSA9PiAhcHJldik7XG4gIH0sIFtdKTtcblxuICBjb25zdCByZXNldENvdW50ID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkKSA9PiAoKSA9PiB7XG4gICAgICBzZXRDb3VudExpc3QoKGxpc3QpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5saXN0LFxuICAgICAgICAgIFtpZF06IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW10sXG4gICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnd29ya3NwYWNlIOuwlOq8iOuLpCcsIHdvcmtzcGFjZSk7XG4gICAgc2V0Q291bnRMaXN0KHt9KTtcbiAgfSwgW3dvcmtzcGFjZV0pO1xuXG4gIGNvbnN0IG9uTWVzc2FnZSA9IHVzZUNhbGxiYWNrKFxuICAgIChkYXRhOiBJQ2hhdCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ21lc3NhZ2XsmZTri6QnLCBkYXRhKTtcbiAgICAgIGNvbnN0IG1lbnRpb25zOiBzdHJpbmdbXSB8IG51bGwgPSBkYXRhLmNvbnRlbnQubWF0Y2goL0BcXFsoLis/KVxcXVxcKChcXGQpXFwpL2cpO1xuICAgICAgaWYgKG1lbnRpb25zPy5maW5kKCh2KSA9PiB2Lm1hdGNoKC9AXFxbKC4rPylcXF1cXCgoXFxkKVxcKS8pIVsyXSA9PT0gdXNlckRhdGE/LmlkLnRvU3RyaW5nKCkpKSB7XG4gICAgICAgIHJldHVybiBzZXRDb3VudExpc3QoKGxpc3QpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ubGlzdCxcbiAgICAgICAgICAgIFtgYy0ke2RhdGEuQ2hhbm5lbElkfWBdOiAobGlzdFtgYy0ke2RhdGEuQ2hhbm5lbElkfWBdIHx8IDApICsgMSxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHNldENvdW50TGlzdCgobGlzdCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmxpc3QsXG4gICAgICAgICAgW2BjLSR7ZGF0YS5DaGFubmVsSWR9YF06IGxpc3RbYGMtJHtkYXRhLkNoYW5uZWxJZH1gXSB8fCAwLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbdXNlckRhdGFdLFxuICApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc29ja2V0Py5vbignbWVzc2FnZScsIG9uTWVzc2FnZSk7XG4gICAgY29uc29sZS5sb2coJ3NvY2tldCBvbiBtZXNzYWdlJywgc29ja2V0Py5oYXNMaXN0ZW5lcnMoJ21lc3NhZ2UnKSwgc29ja2V0KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc29ja2V0Py5vZmYoJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpO1xuICAgICAgY29uc29sZS5sb2coJ3NvY2tldCBvZmYgbWVzc2FnZScsIHNvY2tldD8uaGFzTGlzdGVuZXJzKCdtZXNzYWdlJykpO1xuICAgIH07XG4gIH0sIFtzb2NrZXQsIHVzZXJEYXRhXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGgyPlxuICAgICAgICA8Q29sbGFwc2VCdXR0b24gY29sbGFwc2U9e2NoYW5uZWxDb2xsYXBzZX0gb25DbGljaz17dG9nZ2xlQ2hhbm5lbENvbGxhcHNlfT5cbiAgICAgICAgICA8aVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYy1pY29uIHAtY2hhbm5lbF9zaWRlYmFyX19zZWN0aW9uX2hlYWRpbmdfZXhwYW5kIHAtY2hhbm5lbF9zaWRlYmFyX19zZWN0aW9uX2hlYWRpbmdfZXhwYW5kLS1zaG93X21vcmVfZmVhdHVyZSBjLWljb24tLWNhcmV0LXJpZ2h0IGMtaWNvbi0taW5oZXJpdCBjLWljb24tLWlubGluZVwiXG4gICAgICAgICAgICBkYXRhLXFhPVwiY2hhbm5lbC1zZWN0aW9uLWNvbGxhcHNlXCJcbiAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9Db2xsYXBzZUJ1dHRvbj5cbiAgICAgICAgPHNwYW4+Q2hhbm5lbHM8L3NwYW4+XG4gICAgICA8L2gyPlxuICAgICAgPGRpdj5cbiAgICAgICAgeyFjaGFubmVsQ29sbGFwc2UgJiZcbiAgICAgICAgICBjaGFubmVsRGF0YT8ubWFwKChjaGFubmVsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IGNvdW50TGlzdFtgYy0ke2NoYW5uZWwuaWR9YF07XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8TmF2TGlua1xuICAgICAgICAgICAgICAgIGtleT17Y2hhbm5lbC5uYW1lfVxuICAgICAgICAgICAgICAgIGFjdGl2ZUNsYXNzTmFtZT1cInNlbGVjdGVkXCJcbiAgICAgICAgICAgICAgICB0bz17YC93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L2NoYW5uZWwvJHtjaGFubmVsLm5hbWV9YH1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtyZXNldENvdW50KGBjLSR7Y2hhbm5lbC5pZH1gKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17Y291bnQgIT09IHVuZGVmaW5lZCAmJiBjb3VudCA+PSAwID8gJ2JvbGQnIDogdW5kZWZpbmVkfT4jIHtjaGFubmVsLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgIHtjb3VudCAhPT0gdW5kZWZpbmVkICYmIGNvdW50ID4gMCAmJiA8c3BhbiBjbGFzc05hbWU9XCJjb3VudFwiPntjb3VudH08L3NwYW4+fVxuICAgICAgICAgICAgICA8L05hdkxpbms+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgPC9kaXY+XG4gICAgPC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDaGFubmVsTGlzdDtcbiIsImltcG9ydCB1c2VTb2NrZXQgZnJvbSAnQGhvb2tzL3VzZVNvY2tldCc7XG5pbXBvcnQgeyBDb2xsYXBzZUJ1dHRvbiB9IGZyb20gJ0BsYXlvdXRzL1dvcmtzcGFjZS9zdHlsZXMnO1xuaW1wb3J0IHsgSURNLCBJVXNlciwgSVVzZXJXaXRoT25saW5lIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IGZldGNoZXIgZnJvbSAnQHV0aWxzL2ZldGNoZXInO1xuaW1wb3J0IFJlYWN0LCB7IEZDLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVBhcmFtcyB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5pbXBvcnQgeyBOYXZMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgdXNlU1dSIGZyb20gJ3N3cic7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHVzZXJEYXRhPzogSVVzZXI7XG59XG5cbmNvbnN0IERNTGlzdDogRkM8UHJvcHM+ID0gKHsgdXNlckRhdGEgfSkgPT4ge1xuICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdXNlUGFyYW1zPHsgd29ya3NwYWNlPzogc3RyaW5nIH0+KCk7XG4gIGNvbnN0IHsgZGF0YTogbWVtYmVyRGF0YSB9ID0gdXNlU1dSPElVc2VyV2l0aE9ubGluZVtdPihcbiAgICB1c2VyRGF0YSA/IGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vbWVtYmVyc2AgOiBudWxsLFxuICAgIGZldGNoZXIsXG4gICk7XG4gIGNvbnN0IFtzb2NrZXRdID0gdXNlU29ja2V0KHdvcmtzcGFjZSk7XG4gIGNvbnN0IFtjaGFubmVsQ29sbGFwc2UsIHNldENoYW5uZWxDb2xsYXBzZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb3VudExpc3QsIHNldENvdW50TGlzdF0gPSB1c2VTdGF0ZTx7IFtrZXk6IHN0cmluZ106IG51bWJlciB9Pih7fSk7XG4gIGNvbnN0IFtvbmxpbmVMaXN0LCBzZXRPbmxpbmVMaXN0XSA9IHVzZVN0YXRlPG51bWJlcltdPihbXSk7XG5cbiAgY29uc3QgdG9nZ2xlQ2hhbm5lbENvbGxhcHNlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldENoYW5uZWxDb2xsYXBzZSgocHJldikgPT4gIXByZXYpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgcmVzZXRDb3VudCA9IHVzZUNhbGxiYWNrKFxuICAgIChpZCkgPT4gKCkgPT4ge1xuICAgICAgc2V0Q291bnRMaXN0KChsaXN0KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubGlzdCxcbiAgICAgICAgICBbaWRdOiAwLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbXSxcbiAgKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCd3b3Jrc3BhY2Ug67CU6ryI64ukJywgd29ya3NwYWNlKTtcbiAgICBzZXRPbmxpbmVMaXN0KFtdKTtcbiAgICBzZXRDb3VudExpc3Qoe30pO1xuICB9LCBbd29ya3NwYWNlXSk7XG5cbiAgY29uc3Qgb25NZXNzYWdlID0gdXNlQ2FsbGJhY2soKGRhdGE6IElETSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdkbeyZlOuLpCcsIGRhdGEpO1xuICAgIHNldENvdW50TGlzdCgobGlzdCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ubGlzdCxcbiAgICAgICAgW2RhdGEuU2VuZGVySWRdOiBsaXN0W2RhdGEuU2VuZGVySWRdID8gbGlzdFtkYXRhLlNlbmRlcklkXSArIDEgOiAxLFxuICAgICAgfTtcbiAgICB9KTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc29ja2V0Py5vbignb25saW5lTGlzdCcsIChkYXRhOiBudW1iZXJbXSkgPT4ge1xuICAgICAgc2V0T25saW5lTGlzdChkYXRhKTtcbiAgICB9KTtcbiAgICBzb2NrZXQ/Lm9uKCdkbScsIG9uTWVzc2FnZSk7XG4gICAgY29uc29sZS5sb2coJ3NvY2tldCBvbiBkbScsIHNvY2tldD8uaGFzTGlzdGVuZXJzKCdkbScpLCBzb2NrZXQpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzb2NrZXQ/Lm9mZignZG0nLCBvbk1lc3NhZ2UpO1xuICAgICAgY29uc29sZS5sb2coJ3NvY2tldCBvZmYgZG0nLCBzb2NrZXQ/Lmhhc0xpc3RlbmVycygnZG0nKSk7XG4gICAgICBzb2NrZXQ/Lm9mZignb25saW5lTGlzdCcpO1xuICAgIH07XG4gIH0sIFtzb2NrZXRdKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8aDI+XG4gICAgICAgIDxDb2xsYXBzZUJ1dHRvbiBjb2xsYXBzZT17Y2hhbm5lbENvbGxhcHNlfSBvbkNsaWNrPXt0b2dnbGVDaGFubmVsQ29sbGFwc2V9PlxuICAgICAgICAgIDxpXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJjLWljb24gcC1jaGFubmVsX3NpZGViYXJfX3NlY3Rpb25faGVhZGluZ19leHBhbmQgcC1jaGFubmVsX3NpZGViYXJfX3NlY3Rpb25faGVhZGluZ19leHBhbmQtLXNob3dfbW9yZV9mZWF0dXJlIGMtaWNvbi0tY2FyZXQtcmlnaHQgYy1pY29uLS1pbmhlcml0IGMtaWNvbi0taW5saW5lXCJcbiAgICAgICAgICAgIGRhdGEtcWE9XCJjaGFubmVsLXNlY3Rpb24tY29sbGFwc2VcIlxuICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L0NvbGxhcHNlQnV0dG9uPlxuICAgICAgICA8c3Bhbj5EaXJlY3QgTWVzc2FnZXM8L3NwYW4+XG4gICAgICA8L2gyPlxuICAgICAgPGRpdj5cbiAgICAgICAgeyFjaGFubmVsQ29sbGFwc2UgJiZcbiAgICAgICAgICBtZW1iZXJEYXRhPy5tYXAoKG1lbWJlcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNPbmxpbmUgPSBvbmxpbmVMaXN0LmluY2x1ZGVzKG1lbWJlci5pZCk7XG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IGNvdW50TGlzdFttZW1iZXIuaWRdIHx8IDA7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8TmF2TGlua1xuICAgICAgICAgICAgICAgIGtleT17bWVtYmVyLmlkfVxuICAgICAgICAgICAgICAgIGFjdGl2ZUNsYXNzTmFtZT1cInNlbGVjdGVkXCJcbiAgICAgICAgICAgICAgICB0bz17YC93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L2RtLyR7bWVtYmVyLmlkfWB9XG4gICAgICAgICAgICAgICAgb25DbGljaz17cmVzZXRDb3VudChtZW1iZXIuaWQpfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGlcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGMtaWNvbiBwLWNoYW5uZWxfc2lkZWJhcl9fcHJlc2VuY2VfaWNvbiBwLWNoYW5uZWxfc2lkZWJhcl9fcHJlc2VuY2VfaWNvbi0tZGltX2VuYWJsZWQgYy1wcmVzZW5jZSAke1xuICAgICAgICAgICAgICAgICAgICBpc09ubGluZSA/ICdjLXByZXNlbmNlLS1hY3RpdmUgYy1pY29uLS1wcmVzZW5jZS1vbmxpbmUnIDogJ2MtaWNvbi0tcHJlc2VuY2Utb2ZmbGluZSdcbiAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgIGRhdGEtcWE9XCJwcmVzZW5jZV9pbmRpY2F0b3JcIlxuICAgICAgICAgICAgICAgICAgZGF0YS1xYS1wcmVzZW5jZS1zZWxmPVwiZmFsc2VcIlxuICAgICAgICAgICAgICAgICAgZGF0YS1xYS1wcmVzZW5jZS1hY3RpdmU9XCJmYWxzZVwiXG4gICAgICAgICAgICAgICAgICBkYXRhLXFhLXByZXNlbmNlLWRuZD1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17Y291bnQgPiAwID8gJ2JvbGQnIDogdW5kZWZpbmVkfT57bWVtYmVyLm5pY2tuYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICB7bWVtYmVyLmlkID09PSB1c2VyRGF0YT8uaWQgJiYgPHNwYW4+ICjrgpgpPC9zcGFuPn1cbiAgICAgICAgICAgICAgICB7Y291bnQgPiAwICYmIDxzcGFuIGNsYXNzTmFtZT1cImNvdW50XCI+e2NvdW50fTwvc3Bhbj59XG4gICAgICAgICAgICAgIDwvTmF2TGluaz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICA8L2Rpdj5cbiAgICA8Lz5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IERNTGlzdDtcbiIsImltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcblxuZXhwb3J0IGNvbnN0IENyZWF0ZU1lbnUgPSBzdHlsZWQuZGl2YFxuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIGxlZnQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgei1pbmRleDogMTAwMDtcblxuICAmID4gZGl2IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIC0tc2FmLTA6IHJnYmEodmFyKC0tc2tfZm9yZWdyb3VuZF9sb3csIDI5LCAyOCwgMjkpLCAwLjEzKTtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tc2FmLTApLCAwIDRweCAxMnB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKHZhcigtLXNrX2ZvcmVncm91bmRfbWluX3NvbGlkLCAyNDgsIDI0OCwgMjQ4KSwgMSk7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIG1pbi13aWR0aDogMzYwcHg7XG4gICAgei1pbmRleDogNTEyO1xuICAgIG1heC1oZWlnaHQ6IGNhbGMoMTAwdmggLSAyMHB4KTtcbiAgICBjb2xvcjogcmdiKDI5LCAyOCwgMjkpO1xuICB9XG5gO1xuXG5leHBvcnQgY29uc3QgQ2xvc2VNb2RhbEJ1dHRvbiA9IHN0eWxlZC5idXR0b25gXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDEwcHg7XG4gIHRvcDogNnB4O1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYm9yZGVyOiBub25lO1xuICBmb250LXNpemU6IDMwcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbmA7XG4iLCJpbXBvcnQgeyBDcmVhdGVNZW51LCBDbG9zZU1vZGFsQnV0dG9uIH0gZnJvbSAnQGNvbXBvbmVudHMvTWVudS9zdHlsZXMnO1xuaW1wb3J0IFJlYWN0LCB7IENTU1Byb3BlcnRpZXMsIEZDLCBQcm9wc1dpdGhDaGlsZHJlbiwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHNob3c6IGJvb2xlYW47XG4gIG9uQ2xvc2VNb2RhbDogKCkgPT4gdm9pZDtcbiAgc3R5bGU6IENTU1Byb3BlcnRpZXM7XG4gIGNsb3NlQnV0dG9uPzogYm9vbGVhbjtcbn1cblxuY29uc3QgTWVudTogRkM8UHJvcHNXaXRoQ2hpbGRyZW48UHJvcHM+PiA9ICh7IGNsb3NlQnV0dG9uLCBzdHlsZSwgc2hvdywgY2hpbGRyZW4sIG9uQ2xvc2VNb2RhbCB9KSA9PiB7XG4gIGNvbnN0IHN0b3BQcm9wYWdhdGlvbiA9IHVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfSwgW10pO1xuXG4gIGlmICghc2hvdykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAoXG4gICAgPENyZWF0ZU1lbnUgb25DbGljaz17b25DbG9zZU1vZGFsfT5cbiAgICAgIDxkaXYgb25DbGljaz17c3RvcFByb3BhZ2F0aW9ufSBzdHlsZT17c3R5bGV9PlxuICAgICAgICB7Y2xvc2VCdXR0b24gJiYgPENsb3NlTW9kYWxCdXR0b24gb25DbGljaz17b25DbG9zZU1vZGFsfT4mdGltZXM7PC9DbG9zZU1vZGFsQnV0dG9uPn1cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9kaXY+XG4gICAgPC9DcmVhdGVNZW51PlxuICApO1xufTtcbk1lbnUuZGVmYXVsdFByb3BzID0ge1xuICBjbG9zZUJ1dHRvbjogdHJ1ZSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE1lbnU7XG4iLCJpbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5cbmV4cG9ydCBjb25zdCBDcmVhdGVNb2RhbCA9IHN0eWxlZC5kaXZgXG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBsZWZ0OiAwO1xuICBib3R0b206IDA7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIHotaW5kZXg6IDEwMjI7XG5cbiAgJiA+IGRpdiB7XG4gICAgbWFyZ2luLXRvcDogMjAwcHg7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIHdpZHRoOiA0NDBweDtcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAtLXNhZi0wOiByZ2JhKHZhcigtLXNrX2ZvcmVncm91bmRfbG93LCAyOSwgMjgsIDI5KSwgMC4xMyk7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLXNhZi0wKSwgMCA0cHggMTJweCAwIHJnYmEoMCwgMCwgMCwgMC4xMik7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSh2YXIoLS1za19mb3JlZ3JvdW5kX21pbl9zb2xpZCwgMjQ4LCAyNDgsIDI0OCksIDEpO1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICBtYXgtd2lkdGg6IDQ0MHB4O1xuICAgIHBhZGRpbmc6IDMwcHggNDBweCAwO1xuICAgIHotaW5kZXg6IDEwMTI7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG5gO1xuXG5leHBvcnQgY29uc3QgQ2xvc2VNb2RhbEJ1dHRvbiA9IHN0eWxlZC5idXR0b25gXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDEwcHg7XG4gIHRvcDogNnB4O1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYm9yZGVyOiBub25lO1xuICBmb250LXNpemU6IDMwcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbmA7XG4iLCJpbXBvcnQgeyBDcmVhdGVNb2RhbCwgQ2xvc2VNb2RhbEJ1dHRvbiB9IGZyb20gJ0Bjb21wb25lbnRzL01vZGFsL3N0eWxlcyc7XG5pbXBvcnQgUmVhY3QsIHsgRkMsIFByb3BzV2l0aENoaWxkcmVuLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgc2hvdzogYm9vbGVhbjtcbiAgb25DbG9zZU1vZGFsOiAoKSA9PiB2b2lkO1xufVxuXG5jb25zdCBNb2RhbDogRkM8UHJvcHNXaXRoQ2hpbGRyZW48UHJvcHM+PiA9ICh7IHNob3csIGNoaWxkcmVuLCBvbkNsb3NlTW9kYWwgfSkgPT4ge1xuICBjb25zdCBzdG9wUHJvcGFnYXRpb24gPSB1c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH0sIFtdKTtcblxuICBpZiAoIXNob3cpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gKFxuICAgIDxDcmVhdGVNb2RhbCBvbkNsaWNrPXtvbkNsb3NlTW9kYWx9PlxuICAgICAgPGRpdiBvbkNsaWNrPXtzdG9wUHJvcGFnYXRpb259PlxuICAgICAgICA8Q2xvc2VNb2RhbEJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlTW9kYWx9PiZ0aW1lczs8L0Nsb3NlTW9kYWxCdXR0b24+XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDwvZGl2PlxuICAgIDwvQ3JlYXRlTW9kYWw+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNb2RhbDtcbiIsImltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcbmltcG9ydCB7IE1lbnRpb25zSW5wdXQgfSBmcm9tICdyZWFjdC1tZW50aW9ucyc7XG5cbmV4cG9ydCBjb25zdCBDaGF0QXJlYSA9IHN0eWxlZC5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIHdpZHRoOiAxMDAlO1xuICBwYWRkaW5nOiAyMHB4O1xuICBwYWRkaW5nLXRvcDogMDtcbmA7XG5cbmV4cG9ydCBjb25zdCBGb3JtID0gc3R5bGVkLmZvcm1gXG4gIGNvbG9yOiByZ2IoMjksIDI4LCAyOSk7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgd2lkdGg6IDEwMCU7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiKDI5LCAyOCwgMjkpO1xuYDtcblxuZXhwb3J0IGNvbnN0IE1lbnRpb25zVGV4dGFyZWEgPSBzdHlsZWQoTWVudGlvbnNJbnB1dClgXG4gIHdpZHRoOiAxMDAlO1xuICBib3JkZXI6IG5vbmU7XG4gIGZvbnQtZmFtaWx5OiBTbGFjay1MYXRvLCBhcHBsZUxvZ28sIHNhbnMtc2VyaWY7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgcGFkZGluZzogOXB4IDEwcHg7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG5cbiAgJiB0ZXh0YXJlYSB7XG4gICAgaGVpZ2h0OiA0NHB4O1xuICAgIHBhZGRpbmc6IDlweCAxMHB4ICFpbXBvcnRhbnQ7XG4gICAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweCAhaW1wb3J0YW50O1xuICAgIHJlc2l6ZTogbm9uZSAhaW1wb3J0YW50O1xuICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgfVxuXG4gICYgdWwge1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIGxpZ2h0Z3JheTtcbiAgICBtYXgtaGVpZ2h0OiAyMDBweDtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgIHBhZGRpbmc6IDlweCAxMHB4O1xuICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICB3aWR0aDogMTUwcHg7XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBUb29sYm94ID0gc3R5bGVkLmRpdmBcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBiYWNrZ3JvdW5kOiByZ2IoMjQ4LCAyNDgsIDI0OCk7XG4gIGhlaWdodDogNDFweDtcbiAgZGlzcGxheTogZmxleDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYigyMjEsIDIyMSwgMjIxKTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuYDtcblxuZXhwb3J0IGNvbnN0IFNlbmRCdXR0b24gPSBzdHlsZWQuYnV0dG9uYFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiA1cHg7XG4gIHRvcDogNXB4O1xuYDtcblxuZXhwb3J0IGNvbnN0IEVhY2hNZW50aW9uID0gc3R5bGVkLmJ1dHRvbjx7IGZvY3VzOiBib29sZWFuIH0+YFxuICBwYWRkaW5nOiA0cHggMjBweDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGJvcmRlcjogbm9uZTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY29sb3I6IHJnYigyOCwgMjksIDI4KTtcbiAgd2lkdGg6IDEwMCU7XG5cbiAgJiBpbWcge1xuICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICB9XG5cbiAgJHsoeyBmb2N1cyB9KSA9PlxuICAgIGZvY3VzICYmXG4gICAgYFxuICAgIGJhY2tncm91bmQ6ICMxMjY0YTM7XG4gICAgY29sb3I6IHdoaXRlO1xuICBgfTtcblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiAjMTI2NGEzO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgfVxuYDtcbiIsImltcG9ydCB7IENoYXRBcmVhLCBGb3JtLCBNZW50aW9uc1RleHRhcmVhLCBTZW5kQnV0dG9uLCBUb29sYm94LCBFYWNoTWVudGlvbiB9IGZyb20gJ0Bjb21wb25lbnRzL0NoYXRCb3gvc3R5bGVzJztcbmltcG9ydCB7IElVc2VyIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IGF1dG9zaXplIGZyb20gJ2F1dG9zaXplJztcbmltcG9ydCBncmF2YXRhciBmcm9tICdncmF2YXRhcic7XG5pbXBvcnQgUmVhY3QsIHsgRkMsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBNZW50aW9uLCBTdWdnZXN0aW9uRGF0YUl0ZW0gfSBmcm9tICdyZWFjdC1tZW50aW9ucyc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIG9uU3VibWl0Rm9ybTogKGU6IGFueSkgPT4gdm9pZDtcbiAgY2hhdD86IHN0cmluZztcbiAgb25DaGFuZ2VDaGF0OiAoZTogYW55KSA9PiB2b2lkO1xuICBwbGFjZWhvbGRlcjogc3RyaW5nO1xuICBkYXRhPzogSVVzZXJbXTtcbn1cbmNvbnN0IENoYXRCb3g6IEZDPFByb3BzPiA9ICh7IG9uU3VibWl0Rm9ybSwgY2hhdCwgb25DaGFuZ2VDaGF0LCBwbGFjZWhvbGRlciwgZGF0YSB9KSA9PiB7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgYXV0b3NpemUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXRvci1jaGF0JykhKTtcbiAgfSwgW2NoYXRdKTtcblxuICBjb25zdCBvbktleWRvd25DaGF0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICBpZiAoIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgb25TdWJtaXRGb3JtKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBbY2hhdF0sXG4gICk7XG5cbiAgY29uc3QgcmVuZGVyVXNlclN1Z2dlc3Rpb246IChcbiAgICBzdWdnZXN0aW9uOiBTdWdnZXN0aW9uRGF0YUl0ZW0sXG4gICAgc2VhcmNoOiBzdHJpbmcsXG4gICAgaGlnaGxpZ2h0ZWREaXNwbGF5OiBSZWFjdC5SZWFjdE5vZGUsXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICBmb2N1c2VkOiBib29sZWFuLFxuICApID0+IFJlYWN0LlJlYWN0Tm9kZSA9IHVzZUNhbGxiYWNrKFxuICAgIChtZW1iZXIsIHNlYXJjaCwgaGlnaGxpZ2h0ZWREaXNwbGF5LCBpbmRleCwgZm9jdXMpID0+IHtcbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxFYWNoTWVudGlvbiBmb2N1cz17Zm9jdXN9PlxuICAgICAgICAgIDxpbWcgc3JjPXtncmF2YXRhci51cmwoZGF0YVtpbmRleF0uZW1haWwsIHsgczogJzIwcHgnIH0pfSBhbHQ9e2RhdGFbaW5kZXhdLm5pY2tuYW1lfSAvPlxuICAgICAgICAgIDxzcGFuPntkYXRhW2luZGV4XS5uaWNrbmFtZX08L3NwYW4+XG4gICAgICAgIDwvRWFjaE1lbnRpb24+XG4gICAgICApO1xuICAgIH0sXG4gICAgW2RhdGFdLFxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPENoYXRBcmVhPlxuICAgICAgPEZvcm0gb25TdWJtaXQ9e29uU3VibWl0Rm9ybX0+XG4gICAgICAgIDxNZW50aW9uc1RleHRhcmVhXG4gICAgICAgICAgaWQ9XCJlZGl0b3ItY2hhdFwiXG4gICAgICAgICAgdmFsdWU9e2NoYXR9XG4gICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlQ2hhdH1cbiAgICAgICAgICBvbktleURvd249e29uS2V5ZG93bkNoYXR9XG4gICAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuICAgICAgICA+XG4gICAgICAgICAgPE1lbnRpb25cbiAgICAgICAgICAgIGFwcGVuZFNwYWNlT25BZGRcbiAgICAgICAgICAgIHN0eWxlPXt7IGJhY2tncm91bmQ6ICdyZ2JhKDI5LCAxNTUsIDIwOSwgLjEpJywgY29sb3I6ICdyZ2IoMTgsIDEwMCwgMTYzKScgfX1cbiAgICAgICAgICAgIHRyaWdnZXI9XCJAXCJcbiAgICAgICAgICAgIGRhdGE9e2RhdGE/Lm1hcCgodikgPT4gKHsgaWQ6IHYuaWQsIGRpc3BsYXk6IHYubmlja25hbWUgfSkpIHx8IFtdfVxuICAgICAgICAgICAgcmVuZGVyU3VnZ2VzdGlvbj17cmVuZGVyVXNlclN1Z2dlc3Rpb259XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9NZW50aW9uc1RleHRhcmVhPlxuICAgICAgICA8VG9vbGJveD5cbiAgICAgICAgICA8U2VuZEJ1dHRvblxuICAgICAgICAgICAgY2xhc3NOYW1lPXtcbiAgICAgICAgICAgICAgJ2MtYnV0dG9uLXVuc3R5bGVkIGMtaWNvbl9idXR0b24gYy1pY29uX2J1dHRvbi0tbGlnaHQgYy1pY29uX2J1dHRvbi0tc2l6ZV9tZWRpdW0gYy10ZXh0eV9pbnB1dF9fYnV0dG9uIGMtdGV4dHlfaW5wdXRfX2J1dHRvbi0tc2VuZCcgK1xuICAgICAgICAgICAgICAoY2hhdD8udHJpbSgpID8gJycgOiAnIGMtdGV4dHlfaW5wdXRfX2J1dHRvbi0tZGlzYWJsZWQnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS1xYT1cInRleHR5X3NlbmRfYnV0dG9uXCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJTZW5kIG1lc3NhZ2VcIlxuICAgICAgICAgICAgZGF0YS1zaz1cInRvb2x0aXBfcGFyZW50XCJcbiAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxuICAgICAgICAgICAgZGlzYWJsZWQ9eyFjaGF0Py50cmltKCl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiYy1pY29uIGMtaWNvbi0tcGFwZXJwbGFuZS1maWxsZWRcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuICAgICAgICAgIDwvU2VuZEJ1dHRvbj5cbiAgICAgICAgPC9Ub29sYm94PlxuICAgICAgPC9Gb3JtPlxuICAgIDwvQ2hhdEFyZWE+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDaGF0Qm94O1xuIiwiaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuXG5leHBvcnQgY29uc3QgQ2hhdFdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBwYWRkaW5nOiA4cHggMjBweDtcblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiAjZWVlO1xuICB9XG5cbiAgJiA+IGRpdjpmaXJzdC1vZi10eXBlIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIHdpZHRoOiAzNnB4O1xuICAgIG1hcmdpbi1yaWdodDogOHB4O1xuXG4gICAgJiBpbWcge1xuICAgICAgd2lkdGg6IDM2cHg7XG4gICAgICBoZWlnaHQ6IDM2cHg7XG4gICAgfVxuICB9XG5cbiAgJiA+IGRpdjpsYXN0LW9mLXR5cGUge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleDogMTtcbiAgfVxuXG4gICYgYSB7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIGNvbG9yOiBkZWVwc2t5Ymx1ZTtcbiAgfVxuYDtcbiIsImltcG9ydCB7IENoYXRXcmFwcGVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQ2hhdC9zdHlsZXMnO1xuaW1wb3J0IHsgSUNoYXQsIElETSwgSVVzZXIgfSBmcm9tICdAdHlwaW5ncy9kYic7XG5pbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnO1xuaW1wb3J0IGdyYXZhdGFyIGZyb20gJ2dyYXZhdGFyJztcbmltcG9ydCBSZWFjdCwgeyBGQyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVBhcmFtcyB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgcmVnZXhpZnlTdHJpbmcgZnJvbSAncmVnZXhpZnktc3RyaW5nJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZGF0YTogSURNIHwgSUNoYXQ7XG59XG5cbmNvbnN0IENoYXQ6IEZDPFByb3BzPiA9ICh7IGRhdGEgfSkgPT4ge1xuICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdXNlUGFyYW1zPHsgd29ya3NwYWNlOiBzdHJpbmc7IGNoYW5uZWw6IHN0cmluZyB9PigpO1xuICBjb25zdCB1c2VyOiBJVXNlciA9ICdTZW5kZXInIGluIGRhdGEgPyBkYXRhLlNlbmRlciA6IGRhdGEuVXNlcjtcblxuICBjb25zdCByZXN1bHQgPSByZWdleGlmeVN0cmluZyh7XG4gICAgcGF0dGVybjogL0BcXFsoLis/KVxcXVxcKChcXGQpXFwpL2csXG4gICAgZGVjb3JhdG9yKG1hdGNoLCBpbmRleCkge1xuICAgICAgY29uc3QgYXJyOiBzdHJpbmdbXSA9IG1hdGNoLm1hdGNoKC9AXFxbKC4rPylcXF1cXCgoXFxkKVxcKS8pITtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxMaW5rIGtleT17bWF0Y2ggKyBpbmRleH0gdG89e2Avd29ya3NwYWNlLyR7d29ya3NwYWNlfS9kbS8ke2FyclsyXX1gfT5cbiAgICAgICAgICBAe2FyclsxXX1cbiAgICAgICAgPC9MaW5rPlxuICAgICAgKTtcbiAgICB9LFxuICAgIGlucHV0OiBkYXRhLmNvbnRlbnQsXG4gIH0pO1xuICByZXR1cm4gKFxuICAgIDxDaGF0V3JhcHBlcj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxpbWcgc3JjPXtncmF2YXRhci51cmwodXNlci5lbWFpbCwgeyBzOiAnMzZweCcgfSl9IGFsdD17dXNlci5uaWNrbmFtZX0gLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBzdHlsZT17eyBmbGV4V3JhcDogJ3dyYXAnIH19PlxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleDogJzAgMCAxMDAlJywgYWxpZ25JdGVtczogJ2NlbnRlcicgfX0+XG4gICAgICAgICAgPGIgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IDUgfX0+e3VzZXIubmlja25hbWV9PC9iPlxuICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRTaXplOiAxMiB9fT57ZGF5anMoZGF0YS5jcmVhdGVkQXQpLmZvcm1hdCgnaDptbSBBJyl9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHAgc3R5bGU9e3sgZmxleDogJzAgMCAxMDAlJywgbWFyZ2luOiAwIH19PntyZXN1bHR9PC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9DaGF0V3JhcHBlcj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENoYXQ7XG4iLCJpbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5cbmV4cG9ydCBjb25zdCBDaGF0Wm9uZSA9IHN0eWxlZC5kaXZgXG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4OiAxO1xuYDtcblxuZXhwb3J0IGNvbnN0IFNlY3Rpb24gPSBzdHlsZWQuc2VjdGlvbmBcbiAgbWFyZ2luLXRvcDogMjBweDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7XG5gO1xuXG5leHBvcnQgY29uc3QgU3RpY2t5SGVhZGVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGZsZXg6IDE7XG4gIHdpZHRoOiAxMDAlO1xuICBwb3NpdGlvbjogc3RpY2t5O1xuICB0b3A6IDE0cHg7XG5cbiAgJiBidXR0b24ge1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBoZWlnaHQ6IDI4cHg7XG4gICAgbGluZS1oZWlnaHQ6IDI3cHg7XG4gICAgcGFkZGluZzogMCAxNnB4O1xuICAgIHotaW5kZXg6IDI7XG4gICAgLS1zYWYtMDogcmdiYSh2YXIoLS1za19mb3JlZ3JvdW5kX2xvdywgMjksIDI4LCAyOSksIDAuMTMpO1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1zYWYtMCksIDAgMXB4IDNweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCk7XG4gICAgYm9yZGVyLXJhZGl1czogMjRweDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgdG9wOiAtMTNweDtcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgfVxuYDtcbiIsImltcG9ydCBDaGF0IGZyb20gJ0Bjb21wb25lbnRzL0NoYXQnO1xuaW1wb3J0IHsgQ2hhdFpvbmUsIFNlY3Rpb24sIFN0aWNreUhlYWRlciB9IGZyb20gJ0Bjb21wb25lbnRzL0NoYXRMaXN0L3N0eWxlcyc7XG5pbXBvcnQgeyBJQ2hhdCwgSURNIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IFJlYWN0LCB7IEZDLCBSZWZPYmplY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU2Nyb2xsYmFycyB9IGZyb20gJ3JlYWN0LWN1c3RvbS1zY3JvbGxiYXJzJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgc2Nyb2xsYmFyUmVmOiBSZWZPYmplY3Q8U2Nyb2xsYmFycz47XG4gIGlzUmVhY2hpbmdFbmQ/OiBib29sZWFuO1xuICBpc0VtcHR5OiBib29sZWFuO1xuICBjaGF0U2VjdGlvbnM6IHsgW2tleTogc3RyaW5nXTogKElETSB8IElDaGF0KVtdIH07XG4gIHNldFNpemU6IChmOiAoc2l6ZTogbnVtYmVyKSA9PiBudW1iZXIpID0+IFByb21pc2U8KElETSB8IElDaGF0KVtdW10gfCB1bmRlZmluZWQ+O1xufVxuY29uc3QgQ2hhdExpc3Q6IEZDPFByb3BzPiA9ICh7IHNjcm9sbGJhclJlZiwgaXNSZWFjaGluZ0VuZCwgaXNFbXB0eSwgY2hhdFNlY3Rpb25zLCBzZXRTaXplIH0pID0+IHtcbiAgY29uc3Qgb25TY3JvbGwgPSB1c2VDYWxsYmFjayhcbiAgICAodmFsdWVzKSA9PiB7XG4gICAgICBpZiAodmFsdWVzLnNjcm9sbFRvcCA9PT0gMCAmJiAhaXNSZWFjaGluZ0VuZCAmJiAhaXNFbXB0eSkge1xuICAgICAgICBzZXRTaXplKChzaXplKSA9PiBzaXplICsgMSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgc2Nyb2xsYmFyUmVmLmN1cnJlbnQ/LnNjcm9sbFRvcChzY3JvbGxiYXJSZWYuY3VycmVudD8uZ2V0U2Nyb2xsSGVpZ2h0KCkgLSB2YWx1ZXMuc2Nyb2xsSGVpZ2h0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbaXNSZWFjaGluZ0VuZCwgaXNFbXB0eV0sXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8Q2hhdFpvbmU+XG4gICAgICA8U2Nyb2xsYmFycyBhdXRvSGlkZSByZWY9e3Njcm9sbGJhclJlZn0gb25TY3JvbGxGcmFtZT17b25TY3JvbGx9PlxuICAgICAgICB7T2JqZWN0LmVudHJpZXMoY2hhdFNlY3Rpb25zKS5tYXAoKFtkYXRlLCBjaGF0c10pID0+IHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFNlY3Rpb24gY2xhc3NOYW1lPXtgc2VjdGlvbi0ke2RhdGV9YH0ga2V5PXtkYXRlfT5cbiAgICAgICAgICAgICAgPFN0aWNreUhlYWRlcj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uPntkYXRlfTwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L1N0aWNreUhlYWRlcj5cbiAgICAgICAgICAgICAge2NoYXRzLm1hcCgoY2hhdCkgPT4gKFxuICAgICAgICAgICAgICAgIDxDaGF0IGtleT17Y2hhdC5pZH0gZGF0YT17Y2hhdH0gLz5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L1NlY3Rpb24+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSl9XG4gICAgICA8L1Njcm9sbGJhcnM+XG4gICAgPC9DaGF0Wm9uZT5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENoYXRMaXN0O1xuIiwiaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuXG5leHBvcnQgY29uc3QgSGVhZGVyID0gc3R5bGVkLmhlYWRlcmBcbiAgaGVpZ2h0OiA2NHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICB3aWR0aDogMTAwJTtcbiAgLS1zYWYtMDogcmdiYSh2YXIoLS1za19mb3JlZ3JvdW5kX2xvdywgMjksIDI4LCAyOSksIDAuMTMpO1xuICBib3gtc2hhZG93OiAwIDFweCAwIHZhcigtLXNhZi0wKTtcbiAgcGFkZGluZzogMjBweCAxNnB4IDIwcHggMjBweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5gO1xuIiwiaW1wb3J0IHsgSUNoYXQsIElETSB9IGZyb20gJ0B0eXBpbmdzL2RiJztcbmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1ha2VTZWN0aW9uPFQgZXh0ZW5kcyBJRE0gfCBJQ2hhdD4oY2hhdExpc3Q6IFRbXSkge1xuICBjb25zdCBzZWN0aW9uczogeyBba2V5OiBzdHJpbmddOiBUW10gfSA9IHt9O1xuICBjaGF0TGlzdC5mb3JFYWNoKChjaGF0KSA9PiB7XG4gICAgY29uc3QgbW9udGhEYXRlID0gZGF5anMoY2hhdC5jcmVhdGVkQXQpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHNlY3Rpb25zW21vbnRoRGF0ZV0pKSB7XG4gICAgICBzZWN0aW9uc1ttb250aERhdGVdLnB1c2goY2hhdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlY3Rpb25zW21vbnRoRGF0ZV0gPSBbY2hhdF07XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHNlY3Rpb25zO1xufVxuIiwiaW1wb3J0IENoYXRCb3ggZnJvbSAnQGNvbXBvbmVudHMvQ2hhdEJveCc7XG5pbXBvcnQgQ2hhdExpc3QgZnJvbSAnQGNvbXBvbmVudHMvQ2hhdExpc3QnO1xuaW1wb3J0IE1vZGFsIGZyb20gJ0Bjb21wb25lbnRzL01vZGFsJztcbmltcG9ydCB1c2VJbnB1dCBmcm9tICdAaG9va3MvdXNlSW5wdXQnO1xuaW1wb3J0IHVzZVNvY2tldCBmcm9tICdAaG9va3MvdXNlU29ja2V0JztcbmltcG9ydCB7IEhlYWRlciB9IGZyb20gJ0BwYWdlcy9DaGFubmVsL3N0eWxlcyc7XG5pbXBvcnQgeyBCdXR0b24sIElucHV0LCBMYWJlbCB9IGZyb20gJ0BwYWdlcy9TaWduVXAvc3R5bGVzJztcbmltcG9ydCB7IElDaGFubmVsLCBJQ2hhdCwgSVVzZXIgfSBmcm9tICdAdHlwaW5ncy9kYic7XG5pbXBvcnQgZmV0Y2hlciBmcm9tICdAdXRpbHMvZmV0Y2hlcic7XG5pbXBvcnQgbWFrZVNlY3Rpb24gZnJvbSAnQHV0aWxzL21ha2VTZWN0aW9uJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFNjcm9sbGJhcnMgfSBmcm9tICdyZWFjdC1jdXN0b20tc2Nyb2xsYmFycyc7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgUmVkaXJlY3QgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcbmltcG9ydCB7IHRvYXN0LCBUb2FzdENvbnRhaW5lciB9IGZyb20gJ3JlYWN0LXRvYXN0aWZ5JztcbmltcG9ydCB1c2VTV1IsIHsgdXNlU1dSSW5maW5pdGUgfSBmcm9tICdzd3InO1xuXG5jb25zdCBQQUdFX1NJWkUgPSAyMDtcbmNvbnN0IENoYW5uZWwgPSAoKSA9PiB7XG4gIGNvbnN0IHsgd29ya3NwYWNlLCBjaGFubmVsIH0gPSB1c2VQYXJhbXM8eyB3b3Jrc3BhY2U6IHN0cmluZzsgY2hhbm5lbDogc3RyaW5nIH0+KCk7XG4gIGNvbnN0IFtzb2NrZXRdID0gdXNlU29ja2V0KHdvcmtzcGFjZSk7XG4gIGNvbnN0IHsgZGF0YTogdXNlckRhdGEsIHJldmFsaWRhdGUgfSA9IHVzZVNXUjxJVXNlcj4oJy9hcGkvdXNlcicsIGZldGNoZXIpO1xuICBjb25zdCB7IGRhdGE6IGNoYW5uZWxzRGF0YSB9ID0gdXNlU1dSPElDaGFubmVsW10+KGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vY2hhbm5lbHNgLCBmZXRjaGVyKTtcbiAgY29uc3QgY2hhbm5lbERhdGEgPSBjaGFubmVsc0RhdGE/LmZpbmQoKHYpID0+IHYubmFtZSA9PT0gY2hhbm5lbCk7XG4gIGNvbnN0IHsgZGF0YTogY2hhdERhdGEsIHJldmFsaWRhdGU6IHJldmFsaWRhdGVDaGF0LCBtdXRhdGU6IG11dGF0ZUNoYXQsIHNldFNpemUgfSA9IHVzZVNXUkluZmluaXRlPElDaGF0W10+KFxuICAgIChpbmRleCkgPT4gYC9hcGkvd29ya3NwYWNlLyR7d29ya3NwYWNlfS9jaGFubmVsLyR7Y2hhbm5lbH0vY2hhdHM/cGVyUGFnZT0ke1BBR0VfU0laRX0mcGFnZT0ke2luZGV4ICsgMX1gLFxuICAgIGZldGNoZXIsXG4gICk7XG4gIGNvbnN0IHsgZGF0YTogY2hhbm5lbE1lbWJlcnNEYXRhLCByZXZhbGlkYXRlOiByZXZhbGlkYXRlTWVtYmVycyB9ID0gdXNlU1dSPElVc2VyW10+KFxuICAgIHVzZXJEYXRhID8gYC9hcGkvd29ya3NwYWNlLyR7d29ya3NwYWNlfS9jaGFubmVsLyR7Y2hhbm5lbH0vbWVtYmVyc2AgOiBudWxsLFxuICAgIGZldGNoZXIsXG4gICk7XG4gIGNvbnN0IFtjaGF0LCBvbkNoYW5nZUNoYXQsIHNldENoYXRdID0gdXNlSW5wdXQoJycpO1xuICBjb25zdCBbbmV3TWVtYmVyLCBvbkNoYW5nZU5ld01lbWJlciwgc2V0TmV3TWVtYmVyXSA9IHVzZUlucHV0KCcnKTtcbiAgY29uc3QgW3Nob3dJbnZpdGVDaGFubmVsTW9kYWwsIHNldFNob3dJbnZpdGVDaGFubmVsTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBzY3JvbGxiYXJSZWYgPSB1c2VSZWY8U2Nyb2xsYmFycz4obnVsbCk7XG5cbiAgY29uc3QgaXNFbXB0eSA9IGNoYXREYXRhPy5bMF0/Lmxlbmd0aCA9PT0gMDtcbiAgY29uc3QgaXNSZWFjaGluZ0VuZCA9IGlzRW1wdHkgfHwgKGNoYXREYXRhICYmIGNoYXREYXRhW2NoYXREYXRhLmxlbmd0aCAtIDFdPy5sZW5ndGggPCBQQUdFX1NJWkUpO1xuXG4gIGNvbnN0IG9uSW52aXRlTWVtYmVyID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghbmV3TWVtYmVyIHx8ICFuZXdNZW1iZXIudHJpbSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGF4aW9zXG4gICAgICAgIC5wb3N0KGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vY2hhbm5lbC8ke2NoYW5uZWx9L21lbWJlcmAsIHtcbiAgICAgICAgICBlbWFpbDogbmV3TWVtYmVyLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmV2YWxpZGF0ZU1lbWJlcnMoKTtcbiAgICAgICAgICBzZXRTaG93SW52aXRlQ2hhbm5lbE1vZGFsKGZhbHNlKTtcbiAgICAgICAgICBzZXROZXdNZW1iZXIoJycpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5kaXIoZXJyb3IpO1xuICAgICAgICAgIHRvYXN0LmVycm9yKGVycm9yLnJlc3BvbnNlPy5kYXRhLCB7IHBvc2l0aW9uOiAnYm90dG9tLWNlbnRlcicgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgW25ld01lbWJlcl0sXG4gICk7XG5cbiAgY29uc3Qgb25DbG9zZU1vZGFsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dJbnZpdGVDaGFubmVsTW9kYWwoZmFsc2UpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgb25TdWJtaXRGb3JtID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChjaGF0Py50cmltKCkgJiYgY2hhdERhdGEgJiYgY2hhbm5lbERhdGEgJiYgdXNlckRhdGEpIHtcbiAgICAgICAgY29uc3Qgc2F2ZWRDaGF0ID0gY2hhdDtcbiAgICAgICAgbXV0YXRlQ2hhdCgocHJldkNoYXREYXRhKSA9PiB7XG4gICAgICAgICAgcHJldkNoYXREYXRhWzBdLnVuc2hpZnQoe1xuICAgICAgICAgICAgaWQ6IChjaGF0RGF0YVswXVswXT8uaWQgfHwgMCkgKyAxLFxuICAgICAgICAgICAgY29udGVudDogc2F2ZWRDaGF0LFxuICAgICAgICAgICAgVXNlcklkOiB1c2VyRGF0YS5pZCxcbiAgICAgICAgICAgIFVzZXI6IHVzZXJEYXRhLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgQ2hhbm5lbElkOiBjaGFubmVsRGF0YS5pZCxcbiAgICAgICAgICAgIENoYW5uZWw6IGNoYW5uZWxEYXRhLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBwcmV2Q2hhdERhdGE7XG4gICAgICAgIH0sIGZhbHNlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBzZXRDaGF0KCcnKTtcbiAgICAgICAgICBpZiAoc2Nyb2xsYmFyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY3JvbGxUb0JvdHRvbSEnKTtcbiAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXhpb3NcbiAgICAgICAgICAucG9zdChgL2FwaS93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L2NoYW5uZWwvJHtjaGFubmVsfS9jaGF0YCwge1xuICAgICAgICAgICAgY29udGVudDogc2F2ZWRDaGF0LFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2NoYXQsIHdvcmtzcGFjZSwgY2hhbm5lbCwgY2hhbm5lbERhdGEsIHNjcm9sbGJhclJlZi5jdXJyZW50LCB1c2VyRGF0YSwgY2hhdERhdGFdLFxuICApO1xuXG4gIGNvbnN0IG9uTWVzc2FnZSA9IHVzZUNhbGxiYWNrKFxuICAgIChkYXRhOiBJQ2hhdCkgPT4ge1xuICAgICAgaWYgKGRhdGEuQ2hhbm5lbC5uYW1lID09PSBjaGFubmVsICYmIGRhdGEuVXNlcklkICE9PSB1c2VyRGF0YT8uaWQpIHtcbiAgICAgICAgbXV0YXRlQ2hhdCgoY2hhdERhdGEpID0+IHtcbiAgICAgICAgICBjaGF0RGF0YVswXS51bnNoaWZ0KGRhdGEpO1xuICAgICAgICAgIHJldHVybiBjaGF0RGF0YTtcbiAgICAgICAgfSwgZmFsc2UpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGlmIChzY3JvbGxiYXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBzY3JvbGxiYXJSZWYuY3VycmVudC5nZXRTY3JvbGxIZWlnaHQoKSA8XG4gICAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LmdldENsaWVudEhlaWdodCgpICsgc2Nyb2xsYmFyUmVmLmN1cnJlbnQuZ2V0U2Nyb2xsVG9wKCkgKyAxNTBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2Nyb2xsVG9Cb3R0b20hJyk7XG4gICAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0b2FzdC5zdWNjZXNzKCfsg4gg66mU7Iuc7KeA6rCAIOuPhOywqe2WiOyKteuLiOuLpC4nLCB7XG4gICAgICAgICAgICAgICAgb25DbGljaygpIHtcbiAgICAgICAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50Py5zY3JvbGxUb0JvdHRvbSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3Njcm9sbGJhclJlZi5jdXJyZW50LCB1c2VyRGF0YV0sXG4gICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzb2NrZXQ/Lm9uKCdtZXNzYWdlJywgb25NZXNzYWdlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc29ja2V0Py5vZmYoJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpO1xuICAgIH07XG4gIH0sIFtzY3JvbGxiYXJSZWYuY3VycmVudCwgc29ja2V0LCB1c2VyRGF0YV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNoYXREYXRhPy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnNvbGUubG9nKCd0b0JvdHRvbScsIGNoYXREYXRhKTtcbiAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50Py5zY3JvbGxUb0JvdHRvbSgpO1xuICAgIH1cbiAgfSwgW2NoYXREYXRhLCBzY3JvbGxiYXJSZWYuY3VycmVudF0pO1xuXG4gIGNvbnN0IG9uQ2xpY2tJbnZpdGVDaGFubmVsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dJbnZpdGVDaGFubmVsTW9kYWwodHJ1ZSk7XG4gIH0sIFtdKTtcblxuICBpZiAoY2hhbm5lbHNEYXRhICYmICFjaGFubmVsRGF0YSkge1xuICAgIHJldHVybiA8UmVkaXJlY3QgdG89e2Avd29ya3NwYWNlLyR7d29ya3NwYWNlfS9jaGFubmVsL+ydvOuwmGB9IC8+O1xuICB9XG5cbiAgY29uc3QgY2hhdFNlY3Rpb25zID0gbWFrZVNlY3Rpb24oY2hhdERhdGEgPyAoW10gYXMgSUNoYXRbXSkuY29uY2F0KC4uLmNoYXREYXRhKS5yZXZlcnNlKCkgOiBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleFdyYXA6ICd3cmFwJywgaGVpZ2h0OiAnY2FsYygxMDB2aCAtIDM4cHgpJywgZmxleEZsb3c6ICdjb2x1bW4nIH19PlxuICAgICAgPEhlYWRlcj5cbiAgICAgICAgPHNwYW4+I3tjaGFubmVsfTwvc3Bhbj5cbiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXg6IDEsIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJyB9fT5cbiAgICAgICAgICA8c3Bhbj57Y2hhbm5lbE1lbWJlcnNEYXRhPy5sZW5ndGh9PC9zcGFuPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xpY2tJbnZpdGVDaGFubmVsfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYy1idXR0b24tdW5zdHlsZWQgcC1pYV9fdmlld19oZWFkZXJfX2J1dHRvblwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiQWRkIHBlb3BsZSB0byAjcmVhY3QtbmF0aXZlXCJcbiAgICAgICAgICAgIGRhdGEtc2s9XCJ0b29sdGlwX3BhcmVudFwiXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJjLWljb24gcC1pYV9fdmlld19oZWFkZXJfX2J1dHRvbl9pY29uIGMtaWNvbi0tYWRkLXVzZXJcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvSGVhZGVyPlxuICAgICAgPENoYXRMaXN0XG4gICAgICAgIHNjcm9sbGJhclJlZj17c2Nyb2xsYmFyUmVmfVxuICAgICAgICBpc1JlYWNoaW5nRW5kPXtpc1JlYWNoaW5nRW5kfVxuICAgICAgICBpc0VtcHR5PXtpc0VtcHR5fVxuICAgICAgICBjaGF0U2VjdGlvbnM9e2NoYXRTZWN0aW9uc31cbiAgICAgICAgc2V0U2l6ZT17c2V0U2l6ZX1cbiAgICAgIC8+XG4gICAgICA8Q2hhdEJveFxuICAgICAgICBvblN1Ym1pdEZvcm09e29uU3VibWl0Rm9ybX1cbiAgICAgICAgY2hhdD17Y2hhdH1cbiAgICAgICAgb25DaGFuZ2VDaGF0PXtvbkNoYW5nZUNoYXR9XG4gICAgICAgIHBsYWNlaG9sZGVyPXtgTWVzc2FnZSAjJHtjaGFubmVsfWB9XG4gICAgICAgIGRhdGE9e2NoYW5uZWxNZW1iZXJzRGF0YX1cbiAgICAgIC8+XG4gICAgICA8TW9kYWwgc2hvdz17c2hvd0ludml0ZUNoYW5uZWxNb2RhbH0gb25DbG9zZU1vZGFsPXtvbkNsb3NlTW9kYWx9PlxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17b25JbnZpdGVNZW1iZXJ9PlxuICAgICAgICAgIDxMYWJlbCBpZD1cIm1lbWJlci1sYWJlbFwiPlxuICAgICAgICAgICAgPHNwYW4+7LGE64SQIOuppOuyhCDstIjrjIA8L3NwYW4+XG4gICAgICAgICAgICA8SW5wdXQgaWQ9XCJtZW1iZXJcIiB2YWx1ZT17bmV3TWVtYmVyfSBvbkNoYW5nZT17b25DaGFuZ2VOZXdNZW1iZXJ9IC8+XG4gICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJzdWJtaXRcIj7sg53shLHtlZjquLA8L0J1dHRvbj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxUb2FzdENvbnRhaW5lciBwb3NpdGlvbj1cImJvdHRvbS1jZW50ZXJcIiAvPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhbm5lbDtcbiIsImltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcblxuZXhwb3J0IGNvbnN0IEhlYWRlciA9IHN0eWxlZC5oZWFkZXJgXG4gIGhlaWdodDogNjRweDtcbiAgZGlzcGxheTogZmxleDtcbiAgd2lkdGg6IDEwMCU7XG4gIC0tc2FmLTA6IHJnYmEodmFyKC0tc2tfZm9yZWdyb3VuZF9sb3csIDI5LCAyOCwgMjkpLCAwLjEzKTtcbiAgYm94LXNoYWRvdzogMCAxcHggMCB2YXIoLS1zYWYtMCk7XG4gIHBhZGRpbmc6IDIwcHggMTZweCAyMHB4IDIwcHg7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuXG4gICYgaW1nIHtcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgfVxuYDtcbiIsImltcG9ydCBDaGF0Qm94IGZyb20gJ0Bjb21wb25lbnRzL0NoYXRCb3gnO1xuaW1wb3J0IENoYXRMaXN0IGZyb20gJ0Bjb21wb25lbnRzL0NoYXRMaXN0JztcbmltcG9ydCB1c2VJbnB1dCBmcm9tICdAaG9va3MvdXNlSW5wdXQnO1xuaW1wb3J0IHVzZVNvY2tldCBmcm9tICdAaG9va3MvdXNlU29ja2V0JztcbmltcG9ydCB7IEhlYWRlciB9IGZyb20gJ0BwYWdlcy9EaXJlY3RNZXNzYWdlL3N0eWxlcyc7XG5pbXBvcnQgeyBJRE0gfSBmcm9tICdAdHlwaW5ncy9kYic7XG5pbXBvcnQgZmV0Y2hlciBmcm9tICdAdXRpbHMvZmV0Y2hlcic7XG5pbXBvcnQgbWFrZVNlY3Rpb24gZnJvbSAnQHV0aWxzL21ha2VTZWN0aW9uJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgZ3JhdmF0YXIgZnJvbSAnZ3JhdmF0YXInO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFNjcm9sbGJhcnMgfSBmcm9tICdyZWFjdC1jdXN0b20tc2Nyb2xsYmFycyc7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdyZWFjdC10b2FzdGlmeSc7XG5pbXBvcnQgdXNlU1dSLCB7IHVzZVNXUkluZmluaXRlIH0gZnJvbSAnc3dyJztcblxuY29uc3QgUEFHRV9TSVpFID0gMjA7XG5jb25zdCBEaXJlY3RNZXNzYWdlID0gKCkgPT4ge1xuICBjb25zdCB7IHdvcmtzcGFjZSwgaWQgfSA9IHVzZVBhcmFtczx7IHdvcmtzcGFjZTogc3RyaW5nOyBpZDogc3RyaW5nIH0+KCk7XG4gIGNvbnN0IFtzb2NrZXRdID0gdXNlU29ja2V0KHdvcmtzcGFjZSk7XG4gIGNvbnN0IHsgZGF0YTogbXlEYXRhIH0gPSB1c2VTV1IoJy9hcGkvdXNlcicsIGZldGNoZXIpO1xuICBjb25zdCB7IGRhdGE6IHVzZXJEYXRhIH0gPSB1c2VTV1IoYC9hcGkvd29ya3NwYWNlLyR7d29ya3NwYWNlfS91c2VyLyR7aWR9YCwgZmV0Y2hlcik7XG4gIGNvbnN0IHsgZGF0YTogY2hhdERhdGEsIHJldmFsaWRhdGU6IHJldmFsaWRhdGVDaGF0LCBtdXRhdGU6IG11dGF0ZUNoYXQsIHNldFNpemUgfSA9IHVzZVNXUkluZmluaXRlPElETVtdPihcbiAgICAoaW5kZXgpID0+IGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vZG0vJHtpZH0vY2hhdHM/cGVyUGFnZT0ke1BBR0VfU0laRX0mcGFnZT0ke2luZGV4ICsgMX1gLFxuICAgIGZldGNoZXIsXG4gICk7XG4gIGNvbnN0IFtjaGF0LCBvbkNoYW5nZUNoYXQsIHNldENoYXRdID0gdXNlSW5wdXQoJycpO1xuICBjb25zdCBzY3JvbGxiYXJSZWYgPSB1c2VSZWY8U2Nyb2xsYmFycz4obnVsbCk7XG5cbiAgY29uc3QgaXNFbXB0eSA9IGNoYXREYXRhPy5bMF0/Lmxlbmd0aCA9PT0gMDtcbiAgY29uc3QgaXNSZWFjaGluZ0VuZCA9IGlzRW1wdHkgfHwgKGNoYXREYXRhICYmIGNoYXREYXRhW2NoYXREYXRhLmxlbmd0aCAtIDFdPy5sZW5ndGggPCBQQUdFX1NJWkUpO1xuXG4gIGNvbnN0IG9uU3VibWl0Rm9ybSA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoY2hhdD8udHJpbSgpICYmIGNoYXREYXRhKSB7XG4gICAgICAgIGNvbnN0IHNhdmVkQ2hhdCA9IGNoYXQ7XG4gICAgICAgIG11dGF0ZUNoYXQoKHByZXZDaGF0RGF0YSkgPT4ge1xuICAgICAgICAgIHByZXZDaGF0RGF0YVswXS51bnNoaWZ0KHtcbiAgICAgICAgICAgIGlkOiAoY2hhdERhdGFbMF1bMF0/LmlkIHx8IDApICsgMSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHNhdmVkQ2hhdCxcbiAgICAgICAgICAgIFNlbmRlcklkOiBteURhdGEuaWQsXG4gICAgICAgICAgICBTZW5kZXI6IG15RGF0YSxcbiAgICAgICAgICAgIFJlY2VpdmVySWQ6IHVzZXJEYXRhLmlkLFxuICAgICAgICAgICAgUmVjZWl2ZXI6IHVzZXJEYXRhLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBwcmV2Q2hhdERhdGE7XG4gICAgICAgIH0sIGZhbHNlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBzZXRDaGF0KCcnKTtcbiAgICAgICAgICBpZiAoc2Nyb2xsYmFyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY3JvbGxUb0JvdHRvbSEnKTtcbiAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXhpb3NcbiAgICAgICAgICAucG9zdChgL2FwaS93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L2RtLyR7aWR9L2NoYXRgLCB7XG4gICAgICAgICAgICBjb250ZW50OiBjaGF0LFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2NoYXQsIHdvcmtzcGFjZSwgaWQsIHNjcm9sbGJhclJlZi5jdXJyZW50LCB1c2VyRGF0YSwgY2hhdERhdGFdLFxuICApO1xuXG4gIGNvbnN0IG9uTWVzc2FnZSA9IHVzZUNhbGxiYWNrKFxuICAgIChkYXRhOiBJRE0pID0+IHtcbiAgICAgIGlmIChkYXRhLlNlbmRlcklkID09PSBOdW1iZXIoaWQpICYmIG15RGF0YS5pZCAhPT0gTnVtYmVyKGlkKSkge1xuICAgICAgICBtdXRhdGVDaGF0KChjaGF0RGF0YSkgPT4ge1xuICAgICAgICAgIGNoYXREYXRhWzBdLnVuc2hpZnQoZGF0YSk7XG4gICAgICAgICAgcmV0dXJuIGNoYXREYXRhO1xuICAgICAgICB9LCBmYWxzZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgaWYgKHNjcm9sbGJhclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LmdldFNjcm9sbEhlaWdodCgpIDxcbiAgICAgICAgICAgICAgc2Nyb2xsYmFyUmVmLmN1cnJlbnQuZ2V0Q2xpZW50SGVpZ2h0KCkgKyBzY3JvbGxiYXJSZWYuY3VycmVudC5nZXRTY3JvbGxUb3AoKSArIDE1MFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY3JvbGxUb0JvdHRvbSEnKTtcbiAgICAgICAgICAgICAgc2Nyb2xsYmFyUmVmLmN1cnJlbnQuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRvYXN0LnN1Y2Nlc3MoJ+yDiCDrqZTsi5zsp4DqsIAg64+E7LCp7ZaI7Iq164uI64ukLicsIHtcbiAgICAgICAgICAgICAgICBvbkNsaWNrKCkge1xuICAgICAgICAgICAgICAgICAgc2Nyb2xsYmFyUmVmLmN1cnJlbnQ/LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbc2Nyb2xsYmFyUmVmLmN1cnJlbnQsIGlkXSxcbiAgKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNvY2tldD8ub24oJ2RtJywgb25NZXNzYWdlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc29ja2V0Py5vZmYoJ2RtJywgb25NZXNzYWdlKTtcbiAgICB9O1xuICB9LCBbc2Nyb2xsYmFyUmVmLmN1cnJlbnQsIHNvY2tldCwgaWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjaGF0RGF0YT8ubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zb2xlLmxvZygndG9Cb3R0b20nLCBjaGF0RGF0YSk7XG4gICAgICBzY3JvbGxiYXJSZWYuY3VycmVudD8uc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICB9XG4gIH0sIFtjaGF0RGF0YSwgc2Nyb2xsYmFyUmVmLmN1cnJlbnRdKTtcblxuICBpZiAoIXVzZXJEYXRhIHx8ICFteURhdGEpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGNoYXRTZWN0aW9ucyA9IG1ha2VTZWN0aW9uKGNoYXREYXRhID8gKFtdIGFzIElETVtdKS5jb25jYXQoLi4uY2hhdERhdGEpLnJldmVyc2UoKSA6IFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4V3JhcDogJ3dyYXAnLCBoZWlnaHQ6ICdjYWxjKDEwMHZoIC0gMzhweCknLCBmbGV4RmxvdzogJ2NvbHVtbicgfX0+XG4gICAgICA8SGVhZGVyPlxuICAgICAgICA8aW1nIHNyYz17Z3JhdmF0YXIudXJsKHVzZXJEYXRhLmVtYWlsLCB7IHM6ICcyNHB4JyB9KX0gYWx0PXt1c2VyRGF0YS5uaWNrbmFtZX0gLz5cbiAgICAgICAgPHNwYW4+e3VzZXJEYXRhLm5pY2tuYW1lfTwvc3Bhbj5cbiAgICAgIDwvSGVhZGVyPlxuICAgICAgPENoYXRMaXN0XG4gICAgICAgIHNjcm9sbGJhclJlZj17c2Nyb2xsYmFyUmVmfVxuICAgICAgICBpc1JlYWNoaW5nRW5kPXtpc1JlYWNoaW5nRW5kfVxuICAgICAgICBpc0VtcHR5PXtpc0VtcHR5fVxuICAgICAgICBjaGF0U2VjdGlvbnM9e2NoYXRTZWN0aW9uc31cbiAgICAgICAgc2V0U2l6ZT17c2V0U2l6ZX1cbiAgICAgIC8+XG4gICAgICA8Q2hhdEJveFxuICAgICAgICBvblN1Ym1pdEZvcm09e29uU3VibWl0Rm9ybX1cbiAgICAgICAgY2hhdD17Y2hhdH1cbiAgICAgICAgb25DaGFuZ2VDaGF0PXtvbkNoYW5nZUNoYXR9XG4gICAgICAgIHBsYWNlaG9sZGVyPXtgTWVzc2FnZSAke3VzZXJEYXRhLm5pY2tuYW1lfWB9XG4gICAgICAgIGRhdGE9e1tdfVxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IERpcmVjdE1lc3NhZ2U7XG4iLCJpbXBvcnQgQ2hhbm5lbExpc3QgZnJvbSAnQGNvbXBvbmVudHMvQ2hhbm5lbExpc3QnO1xuaW1wb3J0IERNTGlzdCBmcm9tICdAY29tcG9uZW50cy9ETUxpc3QnO1xuaW1wb3J0IE1lbnUgZnJvbSAnQGNvbXBvbmVudHMvTWVudSc7XG5pbXBvcnQgTW9kYWwgZnJvbSAnQGNvbXBvbmVudHMvTW9kYWwnO1xuaW1wb3J0IHVzZUlucHV0IGZyb20gJ0Bob29rcy91c2VJbnB1dCc7XG5pbXBvcnQgdXNlU29ja2V0IGZyb20gJ0Bob29rcy91c2VTb2NrZXQnO1xuaW1wb3J0IENoYW5uZWwgZnJvbSAnQHBhZ2VzL0NoYW5uZWwnO1xuaW1wb3J0IERpcmVjdE1lc3NhZ2UgZnJvbSAnQHBhZ2VzL0RpcmVjdE1lc3NhZ2UnO1xuaW1wb3J0IHsgQnV0dG9uLCBJbnB1dCwgTGFiZWwgfSBmcm9tICdAcGFnZXMvU2lnblVwL3N0eWxlcyc7XG5pbXBvcnQgeyBJQ2hhbm5lbCwgSUNoYXQsIElETSwgSVVzZXIsIElVc2VyV2l0aE9ubGluZSB9IGZyb20gJ0B0eXBpbmdzL2RiJztcbmltcG9ydCBmZXRjaGVyIGZyb20gJ0B1dGlscy9mZXRjaGVyJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgZ3JhdmF0YXIgZnJvbSAnZ3JhdmF0YXInO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VIaXN0b3J5LCB1c2VMb2NhdGlvbiwgdXNlUGFyYW1zLCB1c2VSb3V0ZU1hdGNoIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmltcG9ydCB7IExpbmssIE5hdkxpbmssIFJlZGlyZWN0LCBSb3V0ZSwgU3dpdGNoIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgeyB0b2FzdCwgVG9hc3RDb250YWluZXIgfSBmcm9tICdyZWFjdC10b2FzdGlmeSc7XG5pbXBvcnQgJ3JlYWN0LXRvYXN0aWZ5L2Rpc3QvUmVhY3RUb2FzdGlmeS5jc3MnO1xuaW1wb3J0IGlvIGZyb20gJ3NvY2tldC5pby1jbGllbnQnO1xuaW1wb3J0IHVzZVNXUiBmcm9tICdzd3InO1xuXG5pbXBvcnQge1xuICBBZGRCdXR0b24sXG4gIENoYW5uZWxzLFxuICBDaGF0cyxcbiAgQ29sbGFwc2VCdXR0b24sXG4gIEhlYWRlcixcbiAgTG9nT3V0QnV0dG9uLFxuICBNZW51U2Nyb2xsLFxuICBQcm9maWxlSW1nLFxuICBQcm9maWxlTW9kYWwsXG4gIFJpZ2h0TWVudSxcbiAgV29ya3NwYWNlQnV0dG9uLFxuICBXb3Jrc3BhY2VNb2RhbCxcbiAgV29ya3NwYWNlTmFtZSxcbiAgV29ya3NwYWNlcyxcbiAgV29ya3NwYWNlV3JhcHBlcixcbn0gZnJvbSAnLi9zdHlsZXMnO1xuXG5jb25zdCBXb3Jrc3BhY2UgPSAoKSA9PiB7XG4gIGNvbnN0IHBhcmFtcyA9IHVzZVBhcmFtczx7IHdvcmtzcGFjZT86IHN0cmluZyB9PigpO1xuICBjb25zdCBsb2NhdGlvbiA9IHVzZUxvY2F0aW9uKCk7XG4gIGNvbnN0IHJvdXRlTWF0Y2ggPSB1c2VSb3V0ZU1hdGNoKCk7XG4gIGNvbnN0IGhpc3RvcnkgPSB1c2VIaXN0b3J5KCk7XG4gIC8vIGNvbnNvbGUubG9nKCdwYXJhbXMnLCBwYXJhbXMsICdsb2NhdGlvbicsIGxvY2F0aW9uLCAncm91dGVNYXRjaCcsIHJvdXRlTWF0Y2gsICdoaXN0b3J5JywgaGlzdG9yeSk7XG4gIGNvbnN0IHsgd29ya3NwYWNlIH0gPSBwYXJhbXM7XG4gIGNvbnN0IFtzb2NrZXQsIGRpc2Nvbm5lY3RTb2NrZXRdID0gdXNlU29ja2V0KHdvcmtzcGFjZSk7XG4gIGNvbnN0IHsgZGF0YTogdXNlckRhdGEsIHJldmFsaWRhdGU6IHJldmFsaWRhdGVVc2VyIH0gPSB1c2VTV1I8SVVzZXIgfCBmYWxzZT4oJy9hcGkvdXNlcicsIGZldGNoZXIpO1xuICBjb25zdCB7IGRhdGE6IGNoYW5uZWxEYXRhLCByZXZhbGlkYXRlOiByZXZhbGlkYXRlQ2hhbm5lbCB9ID0gdXNlU1dSPElDaGFubmVsW10+KFxuICAgIHVzZXJEYXRhID8gYC9hcGkvd29ya3NwYWNlLyR7d29ya3NwYWNlfS9jaGFubmVsc2AgOiBudWxsLFxuICAgIGZldGNoZXIsXG4gICk7XG4gIGNvbnNvbGUubG9nKCdyZXJlbmRlcicsICd1c2VyRGF0YScsIHVzZXJEYXRhLCAnY2hhbm5lbERhdGEnLCBjaGFubmVsRGF0YSk7XG4gIGNvbnN0IFtzaG93Q3JlYXRlV29ya3NwYWNlTW9kYWwsIHNldFNob3dDcmVhdGVXb3Jrc3BhY2VNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93SW52aXRlV29ya3NwYWNlTW9kYWwsIHNldFNob3dJbnZpdGVXb3Jrc3BhY2VNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93Q3JlYXRlQ2hhbm5lbE1vZGFsLCBzZXRTaG93Q3JlYXRlQ2hhbm5lbE1vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dVc2VyTWVudSwgc2V0U2hvd1VzZXJNZW51XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dXb3Jrc3BhY2VNb2RhbCwgc2V0U2hvd1dvcmtzcGFjZU1vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW25ld1dvcmtzcGFjZSwgb25DaGFuZ2VOZXdXb3Jrc3BhY2UsIHNldE5ld1dvcmtzcGFjZV0gPSB1c2VJbnB1dCgnJyk7XG4gIGNvbnN0IFtuZXdVcmwsIG9uQ2hhbmdlTmV3VXJsLCBzZXROZXdVcmxdID0gdXNlSW5wdXQoJycpO1xuICBjb25zdCBbbmV3Q2hhbm5lbCwgb25DaGFuZ2VOZXdDaGFubmVsLCBzZXROZXdDaGFubmVsXSA9IHVzZUlucHV0KCcnKTtcbiAgY29uc3QgW25ld01lbWJlciwgb25DaGFuZ2VOZXdNZW1iZXIsIHNldE5ld01lbWJlcl0gPSB1c2VJbnB1dCgnJyk7XG5cbiAgY29uc3Qgb25Mb2dPdXQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgYXhpb3NcbiAgICAgIC5wb3N0KCcvYXBpL2xvZ291dCcpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHJldmFsaWRhdGVVc2VyKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmRpcihlcnJvcik7XG4gICAgICAgIHRvYXN0LmVycm9yKGVycm9yLnJlc3BvbnNlPy5kYXRhLCB7IHBvc2l0aW9uOiAnYm90dG9tLWNlbnRlcicgfSk7XG4gICAgICB9KTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IG9uQ3JlYXRlV29ya3NwYWNlID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghbmV3V29ya3NwYWNlIHx8ICFuZXdXb3Jrc3BhY2UudHJpbSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghbmV3VXJsIHx8ICFuZXdVcmwudHJpbSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGF4aW9zXG4gICAgICAgIC5wb3N0KCcvYXBpL3dvcmtzcGFjZScsIHtcbiAgICAgICAgICB3b3Jrc3BhY2U6IG5ld1dvcmtzcGFjZSxcbiAgICAgICAgICB1cmw6IG5ld1VybCxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJldmFsaWRhdGVVc2VyKCk7XG4gICAgICAgICAgc2V0U2hvd0NyZWF0ZVdvcmtzcGFjZU1vZGFsKGZhbHNlKTtcbiAgICAgICAgICBzZXROZXdXb3Jrc3BhY2UoJycpO1xuICAgICAgICAgIHNldE5ld1VybCgnJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmRpcihlcnJvcik7XG4gICAgICAgICAgdG9hc3QuZXJyb3IoZXJyb3IucmVzcG9uc2U/LmRhdGEsIHsgcG9zaXRpb246ICdib3R0b20tY2VudGVyJyB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBbbmV3V29ya3NwYWNlLCBuZXdVcmxdLFxuICApO1xuICBjb25zdCBvbkNyZWF0ZUNoYW5uZWwgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKCFuZXdDaGFubmVsIHx8ICFuZXdDaGFubmVsLnRyaW0oKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBheGlvc1xuICAgICAgICAucG9zdChgL2FwaS93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L2NoYW5uZWxgLCB7XG4gICAgICAgICAgbmFtZTogbmV3Q2hhbm5lbCxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJldmFsaWRhdGVDaGFubmVsKCk7XG4gICAgICAgICAgc2V0U2hvd0NyZWF0ZUNoYW5uZWxNb2RhbChmYWxzZSk7XG4gICAgICAgICAgc2V0TmV3Q2hhbm5lbCgnJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmRpcihlcnJvcik7XG4gICAgICAgICAgdG9hc3QuZXJyb3IoZXJyb3IucmVzcG9uc2U/LmRhdGEsIHsgcG9zaXRpb246ICdib3R0b20tY2VudGVyJyB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBbbmV3Q2hhbm5lbF0sXG4gICk7XG4gIGNvbnN0IG9uSW52aXRlTWVtYmVyID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghbmV3TWVtYmVyIHx8ICFuZXdNZW1iZXIudHJpbSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGF4aW9zXG4gICAgICAgIC5wb3N0KGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vbWVtYmVyYCwge1xuICAgICAgICAgIGVtYWlsOiBuZXdNZW1iZXIsXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICByZXZhbGlkYXRlQ2hhbm5lbCgpO1xuICAgICAgICAgIHNldFNob3dJbnZpdGVXb3Jrc3BhY2VNb2RhbChmYWxzZSk7XG4gICAgICAgICAgc2V0TmV3TWVtYmVyKCcnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZGlyKGVycm9yKTtcbiAgICAgICAgICB0b2FzdC5lcnJvcihlcnJvci5yZXNwb25zZT8uZGF0YSwgeyBwb3NpdGlvbjogJ2JvdHRvbS1jZW50ZXInIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIFtuZXdNZW1iZXJdLFxuICApO1xuXG4gIGNvbnN0IG9uQ2xpY2tDcmVhdGVXb3Jrc3BhY2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2hvd0NyZWF0ZVdvcmtzcGFjZU1vZGFsKHRydWUpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgb25DbGlja0FkZENoYW5uZWwgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2hvd0NyZWF0ZUNoYW5uZWxNb2RhbCh0cnVlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IG9uQ2xpY2tJbnZpdGVXb3Jrc3BhY2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2hvd0ludml0ZVdvcmtzcGFjZU1vZGFsKHRydWUpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgb25DbG9zZU1vZGFsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dDcmVhdGVXb3Jrc3BhY2VNb2RhbChmYWxzZSk7XG4gICAgc2V0U2hvd0NyZWF0ZUNoYW5uZWxNb2RhbChmYWxzZSk7XG4gICAgc2V0U2hvd0ludml0ZVdvcmtzcGFjZU1vZGFsKGZhbHNlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IG9uQ2xpY2tVc2VyUHJvZmlsZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93VXNlck1lbnUoKHByZXYpID0+ICFwcmV2KTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHRvZ2dsZVdvcmtzcGFjZU1vZGFsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dXb3Jrc3BhY2VNb2RhbCgocHJldikgPT4gIXByZXYpO1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc29sZS5pbmZvKCdkaXNjb25uZWN0IHNvY2tldCcsIHdvcmtzcGFjZSk7XG4gICAgICBkaXNjb25uZWN0U29ja2V0KCk7XG4gICAgfTtcbiAgfSwgW3dvcmtzcGFjZV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjaGFubmVsRGF0YSAmJiB1c2VyRGF0YSkge1xuICAgICAgY29uc29sZS5pbmZvKCfroZzqt7jsnbjtlZjsnpAnKTtcbiAgICAgIHNvY2tldD8uZW1pdCgnbG9naW4nLCB7IGlkOiB1c2VyRGF0YT8uaWQsIGNoYW5uZWxzOiBjaGFubmVsRGF0YS5tYXAoKHYpID0+IHYuaWQpIH0pO1xuICAgIH1cbiAgfSwgW3VzZXJEYXRhLCBjaGFubmVsRGF0YV0pO1xuXG4gIGlmICh1c2VyRGF0YSA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gPFJlZGlyZWN0IHRvPVwiL2xvZ2luXCIgLz47XG4gIH1cbiAgaWYgKHVzZXJEYXRhICYmICF1c2VyRGF0YS5Xb3Jrc3BhY2VzLmZpbmQoKHYpID0+IHYudXJsID09PSB3b3Jrc3BhY2UpKSB7XG4gICAgcmV0dXJuIDxSZWRpcmVjdCB0bz1cIi93b3Jrc3BhY2Uvc2xlYWN0L2NoYW5uZWwv7J2867CYXCIgLz47XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8SGVhZGVyPlxuICAgICAgICB7dXNlckRhdGEgJiYgKFxuICAgICAgICAgIDxSaWdodE1lbnU+XG4gICAgICAgICAgICA8c3BhbiBvbkNsaWNrPXtvbkNsaWNrVXNlclByb2ZpbGV9PlxuICAgICAgICAgICAgICA8UHJvZmlsZUltZyBzcmM9e2dyYXZhdGFyLnVybCh1c2VyRGF0YS5lbWFpbCwgeyBzOiAnMjhweCcgfSl9IGFsdD17dXNlckRhdGEubmlja25hbWV9IC8+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICB7c2hvd1VzZXJNZW51ICYmIChcbiAgICAgICAgICAgICAgPE1lbnUgc3R5bGU9e3sgcmlnaHQ6IDAsIHRvcDogMzggfX0gc2hvdz17c2hvd1VzZXJNZW51fSBvbkNsb3NlTW9kYWw9e29uQ2xpY2tVc2VyUHJvZmlsZX0+XG4gICAgICAgICAgICAgICAgPFByb2ZpbGVNb2RhbCBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcgfX0+XG4gICAgICAgICAgICAgICAgICA8aW1nIHNyYz17Z3JhdmF0YXIudXJsKHVzZXJEYXRhLmVtYWlsLCB7IHM6ICczNnB4JyB9KX0gYWx0PXt1c2VyRGF0YS5uaWNrbmFtZX0gLz5cbiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJywgbWFyZ2luTGVmdDogMTAgfX0+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwicHJvZmlsZS1uYW1lXCI+e3VzZXJEYXRhLm5pY2tuYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJwcm9maWxlLWFjdGl2ZVwiPkFjdGl2ZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvUHJvZmlsZU1vZGFsPlxuICAgICAgICAgICAgICAgIDxMb2dPdXRCdXR0b24gb25DbGljaz17b25Mb2dPdXR9PuuhnOq3uOyVhOybgzwvTG9nT3V0QnV0dG9uPlxuICAgICAgICAgICAgICA8L01lbnU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvUmlnaHRNZW51PlxuICAgICAgICApfVxuICAgICAgPC9IZWFkZXI+XG4gICAgICA8V29ya3NwYWNlV3JhcHBlcj5cbiAgICAgICAgPFdvcmtzcGFjZXM+XG4gICAgICAgICAge3VzZXJEYXRhPy5Xb3Jrc3BhY2VzLm1hcCgod3MpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxMaW5rIGtleT17d3MuaWR9IHRvPXtgL3dvcmtzcGFjZS8ke3dzLnVybH0vY2hhbm5lbC/snbzrsJhgfT5cbiAgICAgICAgICAgICAgICA8V29ya3NwYWNlQnV0dG9uPnt3cy5uYW1lLnNsaWNlKDAsIDEpLnRvVXBwZXJDYXNlKCl9PC9Xb3Jrc3BhY2VCdXR0b24+XG4gICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgICAgPEFkZEJ1dHRvbiBvbkNsaWNrPXtvbkNsaWNrQ3JlYXRlV29ya3NwYWNlfT4rPC9BZGRCdXR0b24+XG4gICAgICAgIDwvV29ya3NwYWNlcz5cbiAgICAgICAgPENoYW5uZWxzPlxuICAgICAgICAgIDxXb3Jrc3BhY2VOYW1lIG9uQ2xpY2s9e3RvZ2dsZVdvcmtzcGFjZU1vZGFsfT5cbiAgICAgICAgICAgIHt1c2VyRGF0YT8uV29ya3NwYWNlcy5maW5kKCh2KSA9PiB2LnVybCA9PT0gd29ya3NwYWNlKT8ubmFtZX1cbiAgICAgICAgICA8L1dvcmtzcGFjZU5hbWU+XG4gICAgICAgICAgPE1lbnVTY3JvbGw+XG4gICAgICAgICAgICA8TWVudSBzaG93PXtzaG93V29ya3NwYWNlTW9kYWx9IG9uQ2xvc2VNb2RhbD17dG9nZ2xlV29ya3NwYWNlTW9kYWx9IHN0eWxlPXt7IHRvcDogOTUsIGxlZnQ6IDgwIH19PlxuICAgICAgICAgICAgICA8V29ya3NwYWNlTW9kYWw+XG4gICAgICAgICAgICAgICAgPGgyPnt1c2VyRGF0YT8uV29ya3NwYWNlcy5maW5kKCh2KSA9PiB2LnVybCA9PT0gd29ya3NwYWNlKT8ubmFtZX08L2gyPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DbGlja0ludml0ZVdvcmtzcGFjZX0+7JuM7YGs7Iqk7Y6Y7J207Iqk7JeQIOyCrOyaqeyekCDstIjrjIA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uQ2xpY2tBZGRDaGFubmVsfT7ssYTrhJAg66eM65Ok6riwPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkxvZ091dH0+66Gc6re47JWE7JuDPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvV29ya3NwYWNlTW9kYWw+XG4gICAgICAgICAgICA8L01lbnU+XG4gICAgICAgICAgICA8Q2hhbm5lbExpc3QgdXNlckRhdGE9e3VzZXJEYXRhfSBjaGFubmVsRGF0YT17Y2hhbm5lbERhdGF9IC8+XG4gICAgICAgICAgICA8RE1MaXN0IHVzZXJEYXRhPXt1c2VyRGF0YX0gLz5cbiAgICAgICAgICA8L01lbnVTY3JvbGw+XG4gICAgICAgIDwvQ2hhbm5lbHM+XG4gICAgICAgIDxDaGF0cz5cbiAgICAgICAgICA8U3dpdGNoPlxuICAgICAgICAgICAgPFJvdXRlIHBhdGg9XCIvd29ya3NwYWNlLzp3b3Jrc3BhY2UvY2hhbm5lbC86Y2hhbm5lbFwiIGNvbXBvbmVudD17Q2hhbm5lbH0gLz5cbiAgICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiL3dvcmtzcGFjZS86d29ya3NwYWNlL2RtLzppZFwiIGNvbXBvbmVudD17RGlyZWN0TWVzc2FnZX0gLz5cbiAgICAgICAgICA8L1N3aXRjaD5cbiAgICAgICAgPC9DaGF0cz5cbiAgICAgIDwvV29ya3NwYWNlV3JhcHBlcj5cbiAgICAgIDxNb2RhbCBzaG93PXtzaG93Q3JlYXRlV29ya3NwYWNlTW9kYWx9IG9uQ2xvc2VNb2RhbD17b25DbG9zZU1vZGFsfT5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e29uQ3JlYXRlV29ya3NwYWNlfT5cbiAgICAgICAgICA8TGFiZWwgaWQ9XCJ3b3Jrc3BhY2UtbGFiZWxcIj5cbiAgICAgICAgICAgIDxzcGFuPuybjO2BrOyKpO2OmOydtOyKpCDsnbTrpoQ8L3NwYW4+XG4gICAgICAgICAgICA8SW5wdXQgaWQ9XCJ3b3Jrc3BhY2VcIiB2YWx1ZT17bmV3V29ya3NwYWNlfSBvbkNoYW5nZT17b25DaGFuZ2VOZXdXb3Jrc3BhY2V9IC8+XG4gICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICA8TGFiZWwgaWQ9XCJ3b3Jrc3BhY2UtdXJsLWxhYmVsXCI+XG4gICAgICAgICAgICA8c3Bhbj7sm4ztgazsiqTtjpjsnbTsiqQgdXJsPC9zcGFuPlxuICAgICAgICAgICAgPElucHV0IGlkPVwid29ya3NwYWNlLXVybFwiIHZhbHVlPXtuZXdVcmx9IG9uQ2hhbmdlPXtvbkNoYW5nZU5ld1VybH0gLz5cbiAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgIDxCdXR0b24gdHlwZT1cInN1Ym1pdFwiPuyDneyEse2VmOq4sDwvQnV0dG9uPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsIHNob3c9e3Nob3dDcmVhdGVDaGFubmVsTW9kYWx9IG9uQ2xvc2VNb2RhbD17b25DbG9zZU1vZGFsfT5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e29uQ3JlYXRlQ2hhbm5lbH0+XG4gICAgICAgICAgPExhYmVsIGlkPVwiY2hhbm5lbC1sYWJlbFwiPlxuICAgICAgICAgICAgPHNwYW4+7LGE64SQIOydtOumhDwvc3Bhbj5cbiAgICAgICAgICAgIDxJbnB1dCBpZD1cImNoYW5uZWxcIiB2YWx1ZT17bmV3Q2hhbm5lbH0gb25DaGFuZ2U9e29uQ2hhbmdlTmV3Q2hhbm5lbH0gLz5cbiAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgIDxCdXR0b24+7IOd7ISx7ZWY6riwPC9CdXR0b24+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWwgc2hvdz17c2hvd0ludml0ZVdvcmtzcGFjZU1vZGFsfSBvbkNsb3NlTW9kYWw9e29uQ2xvc2VNb2RhbH0+XG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXtvbkludml0ZU1lbWJlcn0+XG4gICAgICAgICAgPExhYmVsIGlkPVwibWVtYmVyLWxhYmVsXCI+XG4gICAgICAgICAgICA8c3Bhbj7snbTrqZTsnbw8L3NwYW4+XG4gICAgICAgICAgICA8SW5wdXQgaWQ9XCJtZW1iZXJcIiB0eXBlPVwiZW1haWxcIiB2YWx1ZT17bmV3TWVtYmVyfSBvbkNoYW5nZT17b25DaGFuZ2VOZXdNZW1iZXJ9IC8+XG4gICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJzdWJtaXRcIj7stIjrjIDtlZjquLA8L0J1dHRvbj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxUb2FzdENvbnRhaW5lciBwb3NpdGlvbj1cImJvdHRvbS1jZW50ZXJcIiAvPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgV29ya3NwYWNlO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==