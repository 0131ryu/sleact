(self.webpackChunksleact_ts_front=self.webpackChunksleact_ts_front||[]).push([[506],{6023:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>he});var a=n(6809),r=n.n(a);const l={},o=e=>{if(!e)return[void 0,t];function t(){e&&l[e]&&(l[e].disconnect(),delete l[e])}return l[e]||(l[e]=r()("https://sleact.nodebird.com/ws-"+e,{transports:["websocket"]}),console.info("create socket",e,l[e].id)),[l[e],t]};var c=n(8517);const i=(0,c.Z)("div",{target:"e1yu0210"})({name:"146q31f",styles:"float:right;"}),s=(0,c.Z)("header",{target:"e1yu0211"})({name:"z7c3yo",styles:"height:38px;background:#350d36;color:#ffffff;box-shadow:0 1px 0 0 rgba(255,255,255,0.1);padding:5px;text-align:center;"}),d=(0,c.Z)("img",{target:"e1yu0212"})({name:"sw188w",styles:"width:28px;height:28px;position:absolute;top:5px;right:16px;"}),p=(0,c.Z)("div",{target:"e1yu0213"})({name:"1yfii4x",styles:"padding:20px;& img{display:flex;}& #profile-name{font-weight:bold;display:inline-flex;}& #profile-active{font-size:13px;display:inline-flex;}"}),m=(0,c.Z)("button",{target:"e1yu0214"})({name:"xsdsuh",styles:"border:none;width:100%;border-top:1px solid rgb(29,28,29);background:transparent;display:block;height:33px;padding:5px 20px 5px;outline:none;cursor:pointer;"}),u=(0,c.Z)("div",{target:"e1yu0215"})({name:"13pmxen",styles:"display:flex;flex:1;"}),g=(0,c.Z)("div",{target:"e1yu0216"})({name:"kbjkj2",styles:"width:65px;display:inline-flex;flex-direction:column;align-items:center;background:#3f0e40;border-top:1px solid rgb(82,38,83);border-right:1px solid rgb(82,38,83);vertical-align:top;text-align:center;padding:15px 0 0;"}),h=(0,c.Z)("nav",{target:"e1yu0217"})({name:"1o7bixd",styles:"width:260px;display:inline-flex;flex-direction:column;background:#3f0e40;color:rgb(188,171,188);vertical-align:top;& a{padding-left:36px;color:inherit;text-decoration:none;height:28px;line-height:28px;display:flex;align-items:center;&.selected{color:white;}}& .bold{color:white;font-weight:bold;}& .count{margin-left:auto;background:#cd2553;border-radius:16px;display:inline-block;font-size:12px;font-weight:700;height:18px;line-height:18px;padding:0 9px;color:white;margin-right:16px;}& h2{height:36px;line-height:36px;margin:0;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:15px;}"}),b=(0,c.Z)("button",{target:"e1yu0218"})({name:"mf88dq",styles:"height:64px;line-height:64px;border:none;width:100%;text-align:left;border-top:1px solid rgb(82,38,83);border-bottom:1px solid rgb(82,38,83);font-weight:900;font-size:24px;background:transparent;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;padding:0;padding-left:16px;margin:0;color:white;cursor:pointer;"}),x=(0,c.Z)("div",{target:"e1yu0219"})({name:"177dxab",styles:"flex:1;overflow-y:auto;"}),f=(0,c.Z)("div",{target:"e1yu02110"})({name:"1gcspn6",styles:"padding:10px 0 0;& h2{padding-left:20px;}& > button{width:100%;height:28px;padding:4px;border:none;background:transparent;border-top:1px solid rgb(28,29,28);cursor:pointer;&:last-of-type{border-bottom:1px solid rgb(28,29,28);}}"}),k=(0,c.Z)("div",{target:"e1yu02111"})({name:"1rr4qq7",styles:"flex:1;"}),E=(0,c.Z)("button",{target:"e1yu02112"})({name:"1u5ecpm",styles:"color:white;font-size:24px;display:inline-block;width:40px;height:40px;background:transparent;border:none;cursor:pointer;"}),y=(0,c.Z)("button",{target:"e1yu02113"})({name:"1uwj8s5",styles:"display:inline-block;width:40px;height:40px;border-radius:10px;background:white;border:3px solid #3f0e40;margin-bottom:15px;font-size:18px;font-weight:700;color:black;cursor:pointer;"}),w=(0,c.Z)("button",{target:"e1yu02114"})("background:transparent;border:none;width:26px;height:26px;display:inline-flex;justify-content:center;align-items:center;color:white;margin-left:10px;cursor:pointer;",(({collapse:e})=>e&&"\n    & i {\n      transform: none;\n    }\n  "),";");var v=n(7294),_=n(5977),C=n(3727);const Z=({userData:e,channelData:t})=>{const{workspace:n}=(0,_.UO)(),[a]=o(n),[r,l]=(0,v.useState)(!1),[c,i]=(0,v.useState)({}),s=(0,v.useCallback)((()=>{l((e=>!e))}),[]),d=(0,v.useCallback)((e=>()=>{i((t=>({...t,[e]:void 0})))}),[]);(0,v.useEffect)((()=>{console.log("workspace 바꼈다",n),i({})}),[n]);const p=(0,v.useCallback)((t=>{console.log("message왔다",t);const n=t.content.match(/@\[(.+?)\]\((\d)\)/g);if(n?.find((t=>t.match(/@\[(.+?)\]\((\d)\)/)[2]===e?.id.toString())))return i((e=>({...e,["c-"+t.ChannelId]:(e["c-"+t.ChannelId]||0)+1})));i((e=>({...e,["c-"+t.ChannelId]:e["c-"+t.ChannelId]||0})))}),[e]);return(0,v.useEffect)((()=>(a?.on("message",p),console.log("socket on message",a?.hasListeners("message"),a),()=>{a?.off("message",p),console.log("socket off message",a?.hasListeners("message"))})),[a,e]),v.createElement(v.Fragment,null,v.createElement("h2",null,v.createElement(w,{collapse:r,onClick:s},v.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),v.createElement("span",null,"Channels")),v.createElement("div",null,!r&&t?.map((e=>{const t=c[`c-${e.id}`];return v.createElement(C.OL,{key:e.name,activeClassName:"selected",to:`/workspace/${n}/channel/${e.name}`,onClick:d(`c-${e.id}`)},v.createElement("span",{className:t!==undefined&&t>=0?"bold":undefined},"# ",e.name),t!==undefined&&t>0&&v.createElement("span",{className:"count"},t))}))))};var S=n(3564),$=n(6848);const z=({userData:e})=>{const{workspace:t}=(0,_.UO)(),{data:n}=(0,$.ZP)(e?`/api/workspace/${t}/members`:null,S.Z),[a]=o(t),[r,l]=(0,v.useState)(!1),[c,i]=(0,v.useState)({}),[s,d]=(0,v.useState)([]),p=(0,v.useCallback)((()=>{l((e=>!e))}),[]),m=(0,v.useCallback)((e=>()=>{i((t=>({...t,[e]:0})))}),[]);(0,v.useEffect)((()=>{console.log("workspace 바꼈다",t),d([]),i({})}),[t]);const u=(0,v.useCallback)((e=>{console.log("dm왔다",e),i((t=>({...t,[e.SenderId]:t[e.SenderId]?t[e.SenderId]+1:1})))}),[]);return(0,v.useEffect)((()=>(a?.on("onlineList",(e=>{d(e)})),a?.on("dm",u),console.log("socket on dm",a?.hasListeners("dm"),a),()=>{a?.off("dm",u),console.log("socket off dm",a?.hasListeners("dm")),a?.off("onlineList")})),[a]),v.createElement(v.Fragment,null,v.createElement("h2",null,v.createElement(w,{collapse:r,onClick:p},v.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),v.createElement("span",null,"Direct Messages")),v.createElement("div",null,!r&&n?.map((n=>{const a=s.includes(n.id);const r=c[n.id]||0;return v.createElement(C.OL,{key:n.id,activeClassName:"selected",to:`/workspace/${t}/dm/${n.id}`,onClick:m(n.id)},v.createElement("i",{className:`c-icon p-channel_sidebar__presence_icon p-channel_sidebar__presence_icon--dim_enabled c-presence ${a?"c-presence--active c-icon--presence-online":"c-icon--presence-offline"}`,"aria-hidden":"true","data-qa":"presence_indicator","data-qa-presence-self":"false","data-qa-presence-active":"false","data-qa-presence-dnd":"false"}),v.createElement("span",{className:r>0?"bold":undefined},n.nickname),n.id===e?.id&&v.createElement("span",null," (나)"),r>0&&v.createElement("span",{className:"count"},r))}))))},I=(0,c.Z)("div",{target:"eus8aqr0"})({name:"lwth7x",styles:"position:fixed;top:0;right:0;left:0;bottom:0;z-index:1000;& > div{position:absolute;display:inline-block;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 0 0 1px var(--saf-0),0 4px 12px 0 rgba(0,0,0,0.12);background-color:rgba(var(--sk_foreground_min_solid,248,248,248),1);border-radius:6px;user-select:none;min-width:360px;z-index:512;max-height:calc(100vh - 20px);color:rgb(29,28,29);}"}),q=(0,c.Z)("button",{target:"eus8aqr1"})({name:"87xlfi",styles:"position:absolute;right:10px;top:6px;background:transparent;border:none;font-size:30px;cursor:pointer;"}),D=({closeButton:e,style:t,show:n,children:a,onCloseModal:r})=>{const l=(0,v.useCallback)((e=>{e.stopPropagation()}),[]);return n?v.createElement(I,{onClick:r},v.createElement("div",{onClick:l,style:t},e&&v.createElement(q,{onClick:r},"×"),a)):null};D.defaultProps={closeButton:!0};const A=D,B=(0,c.Z)("div",{target:"e1q3ybao0"})({name:"1ol8hdt",styles:"position:fixed;text-align:center;left:0;bottom:0;top:0;right:0;z-index:1022;& > div{margin-top:200px;display:inline-block;width:440px;background:white;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 0 0 1px var(--saf-0),0 4px 12px 0 rgba(0,0,0,0.12);background-color:rgba(var(--sk_foreground_min_solid,248,248,248),1);border-radius:6px;user-select:none;max-width:440px;padding:30px 40px 0;z-index:1012;position:relative;}"}),T=(0,c.Z)("button",{target:"e1q3ybao1"})({name:"87xlfi",styles:"position:absolute;right:10px;top:6px;background:transparent;border:none;font-size:30px;cursor:pointer;"}),N=({show:e,children:t,onCloseModal:n})=>{const a=(0,v.useCallback)((e=>{e.stopPropagation()}),[]);return e?v.createElement(B,{onClick:n},v.createElement("div",{onClick:a},v.createElement(T,{onClick:n},"×"),t)):null};var j=n(8678),M=n(1039);const P=(0,c.Z)("div",{target:"e298qi10"})({name:"136i1lu",styles:"display:flex;width:100%;padding:20px;padding-top:0;"}),U=(0,c.Z)("form",{target:"e298qi11"})({name:"1128hi6",styles:"color:rgb(29,28,29);font-size:15px;width:100%;border-radius:4px;border:1px solid rgb(29,28,29);"}),O=(0,c.Z)(M.r,{target:"e298qi12"})({name:"bvwju5",styles:"width:100%;border:none;font-family:Slack-Lato,appleLogo,sans-serif;font-size:15px;padding:9px 10px;background:white;border-radius:4px;& textarea{height:44px;padding:9px 10px !important;outline:none !important;border-radius:4px !important;resize:none !important;line-height:22px;border:none;}& ul{border:1px solid lightgray;max-height:200px;overflow-y:auto;padding:9px 10px;background:white;border-radius:4px;width:150px;}"}),L=(0,c.Z)("div",{target:"e298qi13"})({name:"10ldyej",styles:"position:relative;background:rgb(248,248,248);height:41px;display:flex;border-top:1px solid rgb(221,221,221);align-items:center;border-radius:4px;"}),R=(0,c.Z)("button",{target:"e298qi14"})({name:"b9l5gg",styles:"position:absolute;right:5px;top:5px;"}),W=(0,c.Z)("button",{target:"e298qi15"})("padding:4px 20px;background:transparent;border:none;display:flex;align-items:center;color:rgb(28,29,28);width:100%;& img{margin-right:5px;}",(({focus:e})=>e&&"\n    background: #1264a3;\n    color: white;\n  "),";&:hover{background:#1264a3;color:white;}");var F=n(9367),H=n.n(F),Y=n(6182),K=n.n(Y);const G=({onSubmitForm:e,chat:t,onChangeChat:n,placeholder:a,data:r})=>{(0,v.useEffect)((()=>{H()(document.querySelector("#editor-chat"))}),[t]);const l=(0,v.useCallback)((t=>{"Enter"===t.key&&(t.shiftKey||(t.preventDefault(),e(t)))}),[t]),o=(0,v.useCallback)(((e,t,n,a,l)=>r?v.createElement(W,{focus:l},v.createElement("img",{src:K().url(r[a].email,{s:"20px"}),alt:r[a].nickname}),v.createElement("span",null,r[a].nickname)):null),[r]);return v.createElement(P,null,v.createElement(U,{onSubmit:e},v.createElement(O,{id:"editor-chat",value:t,onChange:n,onKeyDown:l,placeholder:a},v.createElement(M.p,{appendSpaceOnAdd:!0,style:{background:"rgba(29, 155, 209, .1)",color:"rgb(18, 100, 163)"},trigger:"@",data:r?.map((e=>({id:e.id,display:e.nickname})))||[],renderSuggestion:o})),v.createElement(L,null,v.createElement(R,{className:"c-button-unstyled c-icon_button c-icon_button--light c-icon_button--size_medium c-texty_input__button c-texty_input__button--send"+(t?.trim()?"":" c-texty_input__button--disabled"),"data-qa":"texty_send_button","aria-label":"Send message","data-sk":"tooltip_parent",type:"submit",disabled:!t?.trim()},v.createElement("i",{className:"c-icon c-icon--paperplane-filled","aria-hidden":"true"})))))},J=(0,c.Z)("div",{target:"ec89ap00"})({name:"13fa69t",styles:"display:flex;padding:8px 20px;&:hover{background:#eee;}& > div:first-of-type{display:flex;width:36px;margin-right:8px;& img{width:36px;height:36px;}}& > div:last-of-type{display:flex;flex:1;}& a{text-decoration:none;color:deepskyblue;}"});var Q=n(7484),V=n.n(Q),X=n(8817);const ee=({data:e})=>{const{workspace:t}=(0,_.UO)(),n="Sender"in e?e.Sender:e.User,a=(0,X.Z)({pattern:/@\[(.+?)\]\((\d)\)/g,decorator(e,n){const a=e.match(/@\[(.+?)\]\((\d)\)/);return v.createElement(C.rU,{key:e+n,to:`/workspace/${t}/dm/${a[2]}`},"@",a[1])},input:e.content});return v.createElement(J,null,v.createElement("div",null,v.createElement("img",{src:K().url(n.email,{s:"36px"}),alt:n.nickname})),v.createElement("div",{style:{flexWrap:"wrap"}},v.createElement("div",{style:{display:"flex",flex:"0 0 100%",alignItems:"center"}},v.createElement("b",{style:{marginRight:5}},n.nickname),v.createElement("span",{style:{fontSize:12}},V()(e.createdAt).format("h:mm A"))),v.createElement("p",{style:{flex:"0 0 100%",margin:0}},a)))},te=(0,c.Z)("div",{target:"e1jqbxcr0"})({name:"1dpnw7g",styles:"width:100%;display:flex;flex:1;"}),ne=(0,c.Z)("section",{target:"e1jqbxcr1"})({name:"j6nott",styles:"margin-top:20px;border-top:1px solid #eee;"}),ae=(0,c.Z)("div",{target:"e1jqbxcr2"})({name:"8ji0yp",styles:"display:flex;justify-content:center;flex:1;width:100%;position:sticky;top:14px;& button{font-weight:bold;font-size:13px;height:28px;line-height:27px;padding:0 16px;z-index:2;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 0 0 1px var(--saf-0),0 1px 3px 0 rgba(0,0,0,0.08);border-radius:24px;position:relative;top:-13px;background:white;border:none;outline:none;}"});var re=n(1298);const le=({scrollbarRef:e,isReachingEnd:t,isEmpty:n,chatSections:a,setSize:r})=>{const l=(0,v.useCallback)((a=>{0!==a.scrollTop||t||n||r((e=>e+1)).then((()=>{e.current?.scrollTop(e.current?.getScrollHeight()-a.scrollHeight)}))}),[t,n]);return v.createElement(te,null,v.createElement(re.$B,{autoHide:!0,ref:e,onScrollFrame:l},Object.entries(a).map((([e,t])=>v.createElement(ne,{className:"section-"+e,key:e},v.createElement(ae,null,v.createElement("button",null,e)),t.map((e=>v.createElement(ee,{key:e.id,data:e}))))))))},oe=(0,c.Z)("header",{target:"exhfy1p0"})({name:"10in16a",styles:"height:64px;display:flex;width:100%;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 1px 0 var(--saf-0);padding:20px 16px 20px 20px;font-weight:bold;align-items:center;"});var ce=n(3046);function ie(e){const t={};return e.forEach((e=>{const n=V()(e.createdAt).format("YYYY-MM-DD");Array.isArray(t[n])?t[n].push(e):t[n]=[e]})),t}var se=n(9669),de=n.n(se),pe=n(4723);const me=()=>{const{workspace:e,channel:t}=(0,_.UO)(),[n]=o(e),{data:a,revalidate:r}=(0,$.ZP)("/api/user",S.Z),{data:l}=(0,$.ZP)(`/api/workspace/${e}/channel/${t}`,S.Z),{data:c,revalidate:i,mutate:s,setSize:d}=(0,$.g_)((n=>`/api/workspace/${e}/channel/${t}/chats?perPage=20&page=${n+1}`),S.Z),{data:p,revalidate:m}=(0,$.ZP)(a?`/api/workspace/${e}/channel/${t}/members`:null,S.Z),[u,g,h]=(0,j.Z)(""),[b,x,f]=(0,j.Z)(""),[k,E]=(0,v.useState)(!1),y=(0,v.useRef)(null),w=0===c?.[0]?.length,C=w||c&&c[c.length-1]?.length<20,Z=(0,v.useCallback)((n=>{n.preventDefault(),b&&b.trim()&&de().post(`/api/workspace/${e}/channel/${t}/member`,{email:b}).then((()=>{m(),E(!1),f("")})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[b]),z=(0,v.useCallback)((()=>{E(!1)}),[]),I=(0,v.useCallback)((n=>{if(n.preventDefault(),u?.trim()&&c&&l&&a){const n=u;s((e=>(e[0].unshift({id:(c[0][0]?.id||0)+1,content:n,UserId:a.id,User:a,createdAt:new Date,ChannelId:l.id,Channel:l}),e)),!1).then((()=>{h(""),y.current&&(console.log("scrollToBottom!"),y.current.scrollToBottom())})),de().post(`/api/workspace/${e}/channel/${t}/chat`,{content:n}).catch(console.error)}}),[u,e,t,l,y.current,a,c]),q=(0,v.useCallback)((e=>{e.Channel.name===t&&e.UserId!==a?.id&&s((t=>(t[0].unshift(e),t)),!1).then((()=>{y.current&&(y.current.getScrollHeight()<y.current.getClientHeight()+y.current.getScrollTop()+150?(console.log("scrollToBottom!"),y.current.scrollToBottom()):pe.Am.success("새 메시지가 도착했습니다.",{onClick(){y.current?.scrollToBottom()},closeOnClick:!0}))}))}),[y.current,a]);(0,v.useEffect)((()=>(n?.on("message",q),()=>{n?.off("message",q)})),[y.current,n,a]),(0,v.useEffect)((()=>{1===c?.length&&(console.log("toBottom",c),y.current?.scrollToBottom())}),[c,y.current]);const D=(0,v.useCallback)((()=>{E(!0)}),[]),A=ie(c?[].concat(...c).reverse():[]);return v.createElement("div",{style:{display:"flex",flexWrap:"wrap",height:"calc(100vh - 38px)",flexFlow:"column"}},v.createElement(oe,null,v.createElement("span",null,"#",t),v.createElement("div",{style:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"center"}},v.createElement("span",null,p?.length),v.createElement("button",{onClick:D,className:"c-button-unstyled p-ia__view_header__button","aria-label":"Add people to #react-native","data-sk":"tooltip_parent",type:"button"},v.createElement("i",{className:"c-icon p-ia__view_header__button_icon c-icon--add-user","aria-hidden":"true"})))),v.createElement(le,{scrollbarRef:y,isReachingEnd:C,isEmpty:w,chatSections:A,setSize:d}),v.createElement(G,{onSubmitForm:I,chat:u,onChangeChat:g,placeholder:"Message #"+t,data:p}),v.createElement(N,{show:k,onCloseModal:z},v.createElement("form",{onSubmit:Z},v.createElement(ce.__,{id:"member-label"},v.createElement("span",null,"채널 멤버 초대"),v.createElement(ce.II,{id:"member",value:b,onChange:x})),v.createElement(ce.zx,{type:"submit"},"생성하기"))),v.createElement(pe.Ix,{position:"bottom-center"}))},ue=(0,c.Z)("header",{target:"egh2dki0"})({name:"i5rome",styles:"height:64px;display:flex;width:100%;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 1px 0 var(--saf-0);padding:20px 16px 20px 20px;font-weight:bold;align-items:center;& img{margin-right:5px;}"}),ge=()=>{const{workspace:e,id:t}=(0,_.UO)(),[n]=o(e),{data:a}=(0,$.ZP)("/api/user",S.Z),{data:r}=(0,$.ZP)(`/api/workspace/${e}/user/${t}`,S.Z),{data:l,revalidate:c,mutate:i,setSize:s}=(0,$.g_)((n=>`/api/workspace/${e}/dm/${t}/chats?perPage=20&page=${n+1}`),S.Z),[d,p,m]=(0,j.Z)(""),u=(0,v.useRef)(null),g=0===l?.[0]?.length,h=g||l&&l[l.length-1]?.length<20,b=(0,v.useCallback)((n=>{if(n.preventDefault(),d?.trim()&&l){const n=d;i((e=>(e[0].unshift({id:(l[0][0]?.id||0)+1,content:n,SenderId:a.id,Sender:a,ReceiverId:r.id,Receiver:r,createdAt:new Date}),e)),!1).then((()=>{m(""),u.current&&(console.log("scrollToBottom!"),u.current.scrollToBottom())})),de().post(`/api/workspace/${e}/dm/${t}/chat`,{content:d}).catch(console.error)}}),[d,e,t,u.current,r,l]),x=(0,v.useCallback)((e=>{e.SenderId===Number(t)&&a.id!==Number(t)&&i((t=>(t[0].unshift(e),t)),!1).then((()=>{u.current&&(u.current.getScrollHeight()<u.current.getClientHeight()+u.current.getScrollTop()+150?(console.log("scrollToBottom!"),u.current.scrollToBottom()):pe.Am.success("새 메시지가 도착했습니다.",{onClick(){u.current?.scrollToBottom()},closeOnClick:!0}))}))}),[u.current,t]);if((0,v.useEffect)((()=>(n?.on("dm",x),()=>{n?.off("dm",x)})),[u.current,n,t]),(0,v.useEffect)((()=>{1===l?.length&&(console.log("toBottom",l),u.current?.scrollToBottom())}),[l,u.current]),!r||!a)return null;const f=ie(l?[].concat(...l).reverse():[]);return v.createElement("div",{style:{display:"flex",flexWrap:"wrap",height:"calc(100vh - 38px)",flexFlow:"column"}},v.createElement(ue,null,v.createElement("img",{src:K().url(r.email,{s:"24px"}),alt:r.nickname}),v.createElement("span",null,r.nickname)),v.createElement(le,{scrollbarRef:u,isReachingEnd:h,isEmpty:g,chatSections:f,setSize:s}),v.createElement(G,{onSubmitForm:b,chat:d,onChangeChat:p,placeholder:"Message "+r.nickname,data:[]}))};n(5202);const he=()=>{const e=(0,_.UO)(),{workspace:t}=((0,_.TH)(),(0,_.$B)(),(0,_.k6)(),e),[n,a]=o(t),{data:r,revalidate:l}=(0,$.ZP)("/api/user",S.Z),{data:c,revalidate:w}=(0,$.ZP)(r?`/api/workspace/${t}/channels`:null,S.Z);console.log("rerender","userData",r,"channelData",c);const[I,q]=(0,v.useState)(!1),[D,B]=(0,v.useState)(!1),[T,M]=(0,v.useState)(!1),[P,U]=(0,v.useState)(!1),[O,L]=(0,v.useState)(!1),[R,W,F]=(0,j.Z)(""),[H,Y,G]=(0,j.Z)(""),[J,Q,V]=(0,j.Z)(""),[X,ee,te]=(0,j.Z)(""),ne=(0,v.useCallback)((()=>{de().post("/api/logout").then((()=>{l()})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[]),ae=(0,v.useCallback)((e=>{e.preventDefault(),R&&R.trim()&&H&&H.trim()&&de().post("/api/workspace",{workspace:R,url:H}).then((()=>{l(),q(!1),F(""),G("")})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[R,H]),re=(0,v.useCallback)((e=>{e.preventDefault(),J&&J.trim()&&de().post(`/api/workspace/${t}/channel`,{name:J}).then((()=>{w(),M(!1),V("")})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[J]),le=(0,v.useCallback)((e=>{e.preventDefault(),X&&X.trim()&&de().post(`/api/workspace/${t}/member`,{email:X}).then((()=>{w(),B(!1),te("")})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[X]),oe=(0,v.useCallback)((()=>{q(!0)}),[]),ie=(0,v.useCallback)((()=>{M(!0)}),[]),se=(0,v.useCallback)((()=>{B(!0)}),[]),ue=(0,v.useCallback)((()=>{q(!1),M(!1),B(!1)}),[]),he=(0,v.useCallback)((()=>{U((e=>!e))}),[]),be=(0,v.useCallback)((()=>{L((e=>!e))}),[]);return(0,v.useEffect)((()=>()=>{console.info("disconnect socket",t),a()}),[t]),(0,v.useEffect)((()=>{c&&r&&(console.info("로그인하자"),n?.emit("login",{id:r?.id,channels:c.map((e=>e.id))}))}),[r,c]),!1===r?v.createElement(_.l_,{to:"/login"}):r&&!r.Workspaces.find((e=>e.url===t))?v.createElement(_.l_,{to:"/workspace/sleact/channel/일반"}):v.createElement("div",null,v.createElement(s,null,r&&v.createElement(i,null,v.createElement("span",{onClick:he},v.createElement(d,{src:K().url(r.email,{s:"28px"}),alt:r.nickname})),P&&v.createElement(A,{style:{right:0,top:38},show:P,onCloseModal:he},v.createElement(p,{style:{display:"flex"}},v.createElement("img",{src:K().url(r.email,{s:"36px"}),alt:r.nickname}),v.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:10}},v.createElement("span",{id:"profile-name"},r.nickname),v.createElement("span",{id:"profile-active"},"Active"))),v.createElement(m,{onClick:ne},"로그아웃")))),v.createElement(u,null,v.createElement(g,null,r?.Workspaces.map((e=>v.createElement(C.rU,{key:e.id,to:`/workspace/${e.url}/channel/일반`},v.createElement(y,null,e.name.slice(0,1).toUpperCase())))),v.createElement(E,{onClick:oe},"+")),v.createElement(h,null,v.createElement(b,{onClick:be},r?.Workspaces.find((e=>e.url===t))?.name),v.createElement(x,null,v.createElement(A,{show:O,onCloseModal:be,style:{top:95,left:80}},v.createElement(f,null,v.createElement("h2",null,r?.Workspaces.find((e=>e.url===t))?.name),v.createElement("button",{onClick:se},"워크스페이스에 사용자 초대"),v.createElement("button",{onClick:ie},"채널 만들기"),v.createElement("button",{onClick:ne},"로그아웃"))),v.createElement(Z,{userData:r,channelData:c}),v.createElement(z,{userData:r}))),v.createElement(k,null,v.createElement(_.rs,null,v.createElement(_.AW,{path:"/workspace/:workspace/channel/:channel",component:me}),v.createElement(_.AW,{path:"/workspace/:workspace/dm/:id",component:ge})))),v.createElement(N,{show:I,onCloseModal:ue},v.createElement("form",{onSubmit:ae},v.createElement(ce.__,{id:"workspace-label"},v.createElement("span",null,"워크스페이스 이름"),v.createElement(ce.II,{id:"workspace",value:R,onChange:W})),v.createElement(ce.__,{id:"workspace-url-label"},v.createElement("span",null,"워크스페이스 url"),v.createElement(ce.II,{id:"workspace-url",value:H,onChange:Y})),v.createElement(ce.zx,{type:"submit"},"생성하기"))),v.createElement(N,{show:T,onCloseModal:ue},v.createElement("form",{onSubmit:re},v.createElement(ce.__,{id:"channel-label"},v.createElement("span",null,"채널 이름"),v.createElement(ce.II,{id:"channel",value:J,onChange:Q})),v.createElement(ce.zx,null,"생성하기"))),v.createElement(N,{show:D,onCloseModal:ue},v.createElement("form",{onSubmit:le},v.createElement(ce.__,{id:"member-label"},v.createElement("span",null,"이메일"),v.createElement(ce.II,{id:"member",type:"email",value:X,onChange:ee})),v.createElement(ce.zx,{type:"submit"},"초대하기"))),v.createElement(pe.Ix,{position:"bottom-center"}))}},418:()=>{}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9ob29rcy91c2VTb2NrZXQudHMiLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vbGF5b3V0cy9Xb3Jrc3BhY2Uvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYW5uZWxMaXN0L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0RNTGlzdC9pbmRleC50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9NZW51L3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9NZW51L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL01vZGFsL3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9Nb2RhbC9pbmRleC50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9DaGF0Qm94L3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9DaGF0Qm94L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXQvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXQvaW5kZXgudHN4Iiwid2VicGFjazovL3NsZWFjdC10cy1mcm9udC8uL2NvbXBvbmVudHMvQ2hhdExpc3Qvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXRMaXN0L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9wYWdlcy9DaGFubmVsL3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vdXRpbHMvbWFrZVNlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vcGFnZXMvQ2hhbm5lbC9pbmRleC50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vcGFnZXMvRGlyZWN0TWVzc2FnZS9zdHlsZXMudHN4Iiwid2VicGFjazovL3NsZWFjdC10cy1mcm9udC8uL3BhZ2VzL0RpcmVjdE1lc3NhZ2UvaW5kZXgudHN4Iiwid2VicGFjazovL3NsZWFjdC10cy1mcm9udC8uL2xheW91dHMvV29ya3NwYWNlL2luZGV4LnRzeCJdLCJuYW1lcyI6WyJzb2NrZXRzIiwid29ya3NwYWNlIiwidW5kZWZpbmVkIiwiZGlzY29ubmVjdCIsImlvIiwidHJhbnNwb3J0cyIsImNvbnNvbGUiLCJpbmZvIiwiaWQiLCJSaWdodE1lbnUiLCJIZWFkZXIiLCJQcm9maWxlSW1nIiwiUHJvZmlsZU1vZGFsIiwiTG9nT3V0QnV0dG9uIiwiV29ya3NwYWNlV3JhcHBlciIsIldvcmtzcGFjZXMiLCJDaGFubmVscyIsIldvcmtzcGFjZU5hbWUiLCJNZW51U2Nyb2xsIiwiV29ya3NwYWNlTW9kYWwiLCJDaGF0cyIsIkFkZEJ1dHRvbiIsIldvcmtzcGFjZUJ1dHRvbiIsIkNvbGxhcHNlQnV0dG9uIiwiY29sbGFwc2UiLCJ1c2VyRGF0YSIsImNoYW5uZWxEYXRhIiwidXNlUGFyYW1zIiwic29ja2V0IiwidXNlU29ja2V0IiwiY2hhbm5lbENvbGxhcHNlIiwic2V0Q2hhbm5lbENvbGxhcHNlIiwidXNlU3RhdGUiLCJjb3VudExpc3QiLCJzZXRDb3VudExpc3QiLCJ0b2dnbGVDaGFubmVsQ29sbGFwc2UiLCJ1c2VDYWxsYmFjayIsInByZXYiLCJyZXNldENvdW50IiwibGlzdCIsInVzZUVmZmVjdCIsImxvZyIsIm9uTWVzc2FnZSIsImRhdGEiLCJtZW50aW9ucyIsImNvbnRlbnQiLCJtYXRjaCIsImZpbmQiLCJ2IiwidG9TdHJpbmciLCJDaGFubmVsSWQiLCJvbiIsImhhc0xpc3RlbmVycyIsIm9mZiIsIm9uQ2xpY2siLCJjbGFzc05hbWUiLCJkYXRhLXFhIiwiYXJpYS1oaWRkZW4iLCJtYXAiLCJjaGFubmVsIiwiY291bnQiLCJrZXkiLCJuYW1lIiwiYWN0aXZlQ2xhc3NOYW1lIiwidG8iLCJtZW1iZXJEYXRhIiwidXNlU1dSIiwiZmV0Y2hlciIsIm9ubGluZUxpc3QiLCJzZXRPbmxpbmVMaXN0IiwiU2VuZGVySWQiLCJtZW1iZXIiLCJpc09ubGluZSIsImluY2x1ZGVzIiwiZGF0YS1xYS1wcmVzZW5jZS1zZWxmIiwiZGF0YS1xYS1wcmVzZW5jZS1hY3RpdmUiLCJkYXRhLXFhLXByZXNlbmNlLWRuZCIsIm5pY2tuYW1lIiwiQ3JlYXRlTWVudSIsIkNsb3NlTW9kYWxCdXR0b24iLCJNZW51IiwiY2xvc2VCdXR0b24iLCJzdHlsZSIsInNob3ciLCJjaGlsZHJlbiIsIm9uQ2xvc2VNb2RhbCIsInN0b3BQcm9wYWdhdGlvbiIsImUiLCJkZWZhdWx0UHJvcHMiLCJDcmVhdGVNb2RhbCIsIkNoYXRBcmVhIiwiRm9ybSIsIk1lbnRpb25zVGV4dGFyZWEiLCJNZW50aW9uc0lucHV0IiwiVG9vbGJveCIsIlNlbmRCdXR0b24iLCJFYWNoTWVudGlvbiIsImZvY3VzIiwib25TdWJtaXRGb3JtIiwiY2hhdCIsIm9uQ2hhbmdlQ2hhdCIsInBsYWNlaG9sZGVyIiwiYXV0b3NpemUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJvbktleWRvd25DaGF0Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsInJlbmRlclVzZXJTdWdnZXN0aW9uIiwic2VhcmNoIiwiaGlnaGxpZ2h0ZWREaXNwbGF5IiwiaW5kZXgiLCJzcmMiLCJncmF2YXRhciIsImVtYWlsIiwicyIsImFsdCIsIm9uU3VibWl0IiwidmFsdWUiLCJvbkNoYW5nZSIsIm9uS2V5RG93biIsImFwcGVuZFNwYWNlT25BZGQiLCJiYWNrZ3JvdW5kIiwiY29sb3IiLCJ0cmlnZ2VyIiwiZGlzcGxheSIsInJlbmRlclN1Z2dlc3Rpb24iLCJ0cmltIiwiYXJpYS1sYWJlbCIsImRhdGEtc2siLCJ0eXBlIiwiZGlzYWJsZWQiLCJDaGF0V3JhcHBlciIsInVzZXIiLCJTZW5kZXIiLCJVc2VyIiwicmVzdWx0IiwicmVnZXhpZnlTdHJpbmciLCJwYXR0ZXJuIiwiZGVjb3JhdG9yIiwiYXJyIiwiaW5wdXQiLCJmbGV4V3JhcCIsImZsZXgiLCJhbGlnbkl0ZW1zIiwibWFyZ2luUmlnaHQiLCJmb250U2l6ZSIsImRheWpzIiwiY3JlYXRlZEF0IiwiZm9ybWF0IiwibWFyZ2luIiwiQ2hhdFpvbmUiLCJTZWN0aW9uIiwiU3RpY2t5SGVhZGVyIiwic2Nyb2xsYmFyUmVmIiwiaXNSZWFjaGluZ0VuZCIsImlzRW1wdHkiLCJjaGF0U2VjdGlvbnMiLCJzZXRTaXplIiwib25TY3JvbGwiLCJ2YWx1ZXMiLCJzY3JvbGxUb3AiLCJzaXplIiwidGhlbiIsImN1cnJlbnQiLCJnZXRTY3JvbGxIZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJhdXRvSGlkZSIsInJlZiIsIm9uU2Nyb2xsRnJhbWUiLCJPYmplY3QiLCJlbnRyaWVzIiwiZGF0ZSIsImNoYXRzIiwibWFrZVNlY3Rpb24iLCJjaGF0TGlzdCIsInNlY3Rpb25zIiwiZm9yRWFjaCIsIm1vbnRoRGF0ZSIsIkFycmF5IiwiaXNBcnJheSIsInB1c2giLCJyZXZhbGlkYXRlIiwiY2hhdERhdGEiLCJyZXZhbGlkYXRlQ2hhdCIsIm11dGF0ZSIsIm11dGF0ZUNoYXQiLCJ1c2VTV1JJbmZpbml0ZSIsImNoYW5uZWxNZW1iZXJzRGF0YSIsInJldmFsaWRhdGVNZW1iZXJzIiwic2V0Q2hhdCIsInVzZUlucHV0IiwibmV3TWVtYmVyIiwib25DaGFuZ2VOZXdNZW1iZXIiLCJzZXROZXdNZW1iZXIiLCJzaG93SW52aXRlQ2hhbm5lbE1vZGFsIiwic2V0U2hvd0ludml0ZUNoYW5uZWxNb2RhbCIsInVzZVJlZiIsImxlbmd0aCIsIm9uSW52aXRlTWVtYmVyIiwiYXhpb3MiLCJjYXRjaCIsImVycm9yIiwiZGlyIiwidG9hc3QiLCJyZXNwb25zZSIsInBvc2l0aW9uIiwic2F2ZWRDaGF0IiwicHJldkNoYXREYXRhIiwidW5zaGlmdCIsIlVzZXJJZCIsIkRhdGUiLCJDaGFubmVsIiwic2Nyb2xsVG9Cb3R0b20iLCJnZXRDbGllbnRIZWlnaHQiLCJnZXRTY3JvbGxUb3AiLCJjbG9zZU9uQ2xpY2siLCJvbkNsaWNrSW52aXRlQ2hhbm5lbCIsImNvbmNhdCIsInJldmVyc2UiLCJoZWlnaHQiLCJmbGV4RmxvdyIsImp1c3RpZnlDb250ZW50IiwibXlEYXRhIiwiUmVjZWl2ZXJJZCIsIlJlY2VpdmVyIiwiTnVtYmVyIiwicGFyYW1zIiwidXNlTG9jYXRpb24iLCJ1c2VSb3V0ZU1hdGNoIiwidXNlSGlzdG9yeSIsImRpc2Nvbm5lY3RTb2NrZXQiLCJyZXZhbGlkYXRlVXNlciIsInJldmFsaWRhdGVDaGFubmVsIiwic2hvd0NyZWF0ZVdvcmtzcGFjZU1vZGFsIiwic2V0U2hvd0NyZWF0ZVdvcmtzcGFjZU1vZGFsIiwic2hvd0ludml0ZVdvcmtzcGFjZU1vZGFsIiwic2V0U2hvd0ludml0ZVdvcmtzcGFjZU1vZGFsIiwic2hvd0NyZWF0ZUNoYW5uZWxNb2RhbCIsInNldFNob3dDcmVhdGVDaGFubmVsTW9kYWwiLCJzaG93VXNlck1lbnUiLCJzZXRTaG93VXNlck1lbnUiLCJzaG93V29ya3NwYWNlTW9kYWwiLCJzZXRTaG93V29ya3NwYWNlTW9kYWwiLCJuZXdXb3Jrc3BhY2UiLCJvbkNoYW5nZU5ld1dvcmtzcGFjZSIsInNldE5ld1dvcmtzcGFjZSIsIm5ld1VybCIsIm9uQ2hhbmdlTmV3VXJsIiwic2V0TmV3VXJsIiwibmV3Q2hhbm5lbCIsIm9uQ2hhbmdlTmV3Q2hhbm5lbCIsInNldE5ld0NoYW5uZWwiLCJvbkxvZ091dCIsIm9uQ3JlYXRlV29ya3NwYWNlIiwidXJsIiwib25DcmVhdGVDaGFubmVsIiwib25DbGlja0NyZWF0ZVdvcmtzcGFjZSIsIm9uQ2xpY2tBZGRDaGFubmVsIiwib25DbGlja0ludml0ZVdvcmtzcGFjZSIsIm9uQ2xpY2tVc2VyUHJvZmlsZSIsInRvZ2dsZVdvcmtzcGFjZU1vZGFsIiwiZW1pdCIsImNoYW5uZWxzIiwicmlnaHQiLCJ0b3AiLCJmbGV4RGlyZWN0aW9uIiwibWFyZ2luTGVmdCIsIndzIiwic2xpY2UiLCJ0b1VwcGVyQ2FzZSIsImxlZnQiLCJwYXRoIiwiY29tcG9uZW50IiwiRGlyZWN0TWVzc2FnZSJdLCJtYXBwaW5ncyI6InVLQUdBLE1BRU1BLEVBQW9ELEdBb0IxRCxFQW5CbUJDLElBQ2pCLElBQUtBLEVBQ0gsTUFBTyxNQUFDQyxFQUFXQyxHQVFyQixTQUFTQSxJQUNIRixHQUFhRCxFQUFRQyxLQUN2QkQsRUFBUUMsR0FBV0Usb0JBQ1pILEVBQVFDLElBR25CLE9BWktELEVBQVFDLEtBQ1hELEVBQVFDLEdBQWFHLElBQUksa0NBQWdCSCxFQUFhLENBQ3BESSxXQUFZLENBQUMsZUFFZkMsUUFBUUMsS0FBSyxnQkFBaUJOLEVBQVdELEVBQVFDLEdBQVdPLEtBUXZELENBQUNSLEVBQVFDLEdBQVlFLEksY0NwQnZCLE1BQU1NLEdBQVksY0FBSCxtQkFBRyxDQUFILHdDQUlUQyxHQUFTLGlCQUFILG1CQUFHLENBQUgsaUpBU05DLEdBQWEsY0FBSCxtQkFBRyxDQUFILHVGQVFWQyxHQUFlLGNBQUgsbUJBQUcsQ0FBSCx5S0FrQlpDLEdBQWUsaUJBQUgsbUJBQUcsQ0FBSCx1TEFZWkMsR0FBbUIsY0FBSCxtQkFBRyxDQUFILGdEQUtoQkMsR0FBYSxjQUFILG1CQUFHLENBQUgsb1BBYVZDLEdBQVcsY0FBSCxtQkFBRyxDQUFILHVuQkFvRFJDLEdBQWdCLGlCQUFILG1CQUFHLENBQUgsd1ZBcUJiQyxHQUFhLGNBQUgsbUJBQUcsQ0FBSCxtREFLVkMsR0FBaUIsY0FBSCxvQkFBRyxDQUFILCtQQXNCZEMsR0FBUSxjQUFILG9CQUFHLENBQUgsbUNBSUxDLEdBQVksaUJBQUgsb0JBQUcsQ0FBSCxxSkFXVEMsR0FBa0IsaUJBQUgsb0JBQUcsQ0FBSCxrTkFjZkMsR0FBaUIsaUJBQUgsb0JBQUcsQ0FBSCx3S0FZdkIsRUFB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eyB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgaW8gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XG5cbmNvbnN0IGJhY2tVcmwgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gJ2h0dHBzOi8vc2xlYWN0Lm5vZGViaXJkLmNvbScgOiAnaHR0cDovL2xvY2FsaG9zdDozMDk1JztcblxuY29uc3Qgc29ja2V0czogeyBba2V5OiBzdHJpbmddOiBTb2NrZXRJT0NsaWVudC5Tb2NrZXQgfSA9IHt9O1xuY29uc3QgdXNlU29ja2V0ID0gKHdvcmtzcGFjZT86IHN0cmluZyk6IFtTb2NrZXRJT0NsaWVudC5Tb2NrZXQgfCB1bmRlZmluZWQsICgpID0+IHZvaWRdID0+IHtcbiAgaWYgKCF3b3Jrc3BhY2UpIHtcbiAgICByZXR1cm4gW3VuZGVmaW5lZCwgZGlzY29ubmVjdF07XG4gIH1cbiAgaWYgKCFzb2NrZXRzW3dvcmtzcGFjZV0pIHtcbiAgICBzb2NrZXRzW3dvcmtzcGFjZV0gPSBpbyhgJHtiYWNrVXJsfS93cy0ke3dvcmtzcGFjZX1gLCB7XG4gICAgICB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCddLFxuICAgIH0pO1xuICAgIGNvbnNvbGUuaW5mbygnY3JlYXRlIHNvY2tldCcsIHdvcmtzcGFjZSwgc29ja2V0c1t3b3Jrc3BhY2VdLmlkKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNjb25uZWN0KCkge1xuICAgIGlmICh3b3Jrc3BhY2UgJiYgc29ja2V0c1t3b3Jrc3BhY2VdKSB7XG4gICAgICBzb2NrZXRzW3dvcmtzcGFjZV0uZGlzY29ubmVjdCgpO1xuICAgICAgZGVsZXRlIHNvY2tldHNbd29ya3NwYWNlXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtzb2NrZXRzW3dvcmtzcGFjZV0sIGRpc2Nvbm5lY3RdO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlU29ja2V0O1xuIiwiaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuXG5leHBvcnQgY29uc3QgUmlnaHRNZW51ID0gc3R5bGVkLmRpdmBcbiAgZmxvYXQ6IHJpZ2h0O1xuYDtcblxuZXhwb3J0IGNvbnN0IEhlYWRlciA9IHN0eWxlZC5oZWFkZXJgXG4gIGhlaWdodDogMzhweDtcbiAgYmFja2dyb3VuZDogIzM1MGQzNjtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGJveC1zaGFkb3c6IDAgMXB4IDAgMCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XG4gIHBhZGRpbmc6IDVweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuYDtcblxuZXhwb3J0IGNvbnN0IFByb2ZpbGVJbWcgPSBzdHlsZWQuaW1nYFxuICB3aWR0aDogMjhweDtcbiAgaGVpZ2h0OiAyOHB4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogNXB4O1xuICByaWdodDogMTZweDtcbmA7XG5cbmV4cG9ydCBjb25zdCBQcm9maWxlTW9kYWwgPSBzdHlsZWQuZGl2YFxuICBwYWRkaW5nOiAyMHB4O1xuXG4gICYgaW1nIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICB9XG5cbiAgJiAjcHJvZmlsZS1uYW1lIHtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgfVxuXG4gICYgI3Byb2ZpbGUtYWN0aXZlIHtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBMb2dPdXRCdXR0b24gPSBzdHlsZWQuYnV0dG9uYFxuICBib3JkZXI6IG5vbmU7XG4gIHdpZHRoOiAxMDAlO1xuICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiKDI5LCAyOCwgMjkpO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGhlaWdodDogMzNweDtcbiAgcGFkZGluZzogNXB4IDIwcHggNXB4O1xuICBvdXRsaW5lOiBub25lO1xuICBjdXJzb3I6IHBvaW50ZXI7XG5gO1xuXG5leHBvcnQgY29uc3QgV29ya3NwYWNlV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDE7XG5gO1xuXG5leHBvcnQgY29uc3QgV29ya3NwYWNlcyA9IHN0eWxlZC5kaXZgXG4gIHdpZHRoOiA2NXB4O1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYmFja2dyb3VuZDogIzNmMGU0MDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYig4MiwgMzgsIDgzKTtcbiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiKDgyLCAzOCwgODMpO1xuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDE1cHggMCAwO1xuYDtcblxuZXhwb3J0IGNvbnN0IENoYW5uZWxzID0gc3R5bGVkLm5hdmBcbiAgd2lkdGg6IDI2MHB4O1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYmFja2dyb3VuZDogIzNmMGU0MDtcbiAgY29sb3I6IHJnYigxODgsIDE3MSwgMTg4KTtcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcblxuICAmIGEge1xuICAgIHBhZGRpbmctbGVmdDogMzZweDtcbiAgICBjb2xvcjogaW5oZXJpdDtcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgaGVpZ2h0OiAyOHB4O1xuICAgIGxpbmUtaGVpZ2h0OiAyOHB4O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgICYuc2VsZWN0ZWQge1xuICAgICAgY29sb3I6IHdoaXRlO1xuICAgIH1cbiAgfVxuXG4gICYgLmJvbGQge1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgfVxuXG4gICYgLmNvdW50IHtcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICBiYWNrZ3JvdW5kOiAjY2QyNTUzO1xuICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBmb250LXdlaWdodDogNzAwO1xuICAgIGhlaWdodDogMThweDtcbiAgICBsaW5lLWhlaWdodDogMThweDtcbiAgICBwYWRkaW5nOiAwIDlweDtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgbWFyZ2luLXJpZ2h0OiAxNnB4O1xuICB9XG5cbiAgJiBoMiB7XG4gICAgaGVpZ2h0OiAzNnB4O1xuICAgIGxpbmUtaGVpZ2h0OiAzNnB4O1xuICAgIG1hcmdpbjogMDtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgZm9udC1zaXplOiAxNXB4O1xuICB9XG5gO1xuXG5leHBvcnQgY29uc3QgV29ya3NwYWNlTmFtZSA9IHN0eWxlZC5idXR0b25gXG4gIGhlaWdodDogNjRweDtcbiAgbGluZS1oZWlnaHQ6IDY0cHg7XG4gIGJvcmRlcjogbm9uZTtcbiAgd2lkdGg6IDEwMCU7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2IoODIsIDM4LCA4Myk7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2IoODIsIDM4LCA4Myk7XG4gIGZvbnQtd2VpZ2h0OiA5MDA7XG4gIGZvbnQtc2l6ZTogMjRweDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBwYWRkaW5nOiAwO1xuICBwYWRkaW5nLWxlZnQ6IDE2cHg7XG4gIG1hcmdpbjogMDtcbiAgY29sb3I6IHdoaXRlO1xuICBjdXJzb3I6IHBvaW50ZXI7XG5gO1xuXG5leHBvcnQgY29uc3QgTWVudVNjcm9sbCA9IHN0eWxlZC5kaXZgXG4gIGZsZXg6IDE7XG4gIG92ZXJmbG93LXk6IGF1dG87XG5gO1xuXG5leHBvcnQgY29uc3QgV29ya3NwYWNlTW9kYWwgPSBzdHlsZWQuZGl2YFxuICBwYWRkaW5nOiAxMHB4IDAgMDtcblxuICAmIGgyIHtcbiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gIH1cblxuICAmID4gYnV0dG9uIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDI4cHg7XG4gICAgcGFkZGluZzogNHB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiKDI4LCAyOSwgMjgpO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcblxuICAgICY6bGFzdC1vZi10eXBlIHtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2IoMjgsIDI5LCAyOCk7XG4gICAgfVxuICB9XG5gO1xuXG5leHBvcnQgY29uc3QgQ2hhdHMgPSBzdHlsZWQuZGl2YFxuICBmbGV4OiAxO1xuYDtcblxuZXhwb3J0IGNvbnN0IEFkZEJ1dHRvbiA9IHN0eWxlZC5idXR0b25gXG4gIGNvbG9yOiB3aGl0ZTtcbiAgZm9udC1zaXplOiAyNHB4O1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiA0MHB4O1xuICBoZWlnaHQ6IDQwcHg7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBib3JkZXI6IG5vbmU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbmA7XG5cbmV4cG9ydCBjb25zdCBXb3Jrc3BhY2VCdXR0b24gPSBzdHlsZWQuYnV0dG9uYFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiA0MHB4O1xuICBoZWlnaHQ6IDQwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICBib3JkZXI6IDNweCBzb2xpZCAjM2YwZTQwO1xuICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICBmb250LXNpemU6IDE4cHg7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGNvbG9yOiBibGFjaztcbiAgY3Vyc29yOiBwb2ludGVyO1xuYDtcblxuZXhwb3J0IGNvbnN0IENvbGxhcHNlQnV0dG9uID0gc3R5bGVkLmJ1dHRvbjx7IGNvbGxhcHNlOiBib29sZWFuIH0+YFxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYm9yZGVyOiBub25lO1xuICB3aWR0aDogMjZweDtcbiAgaGVpZ2h0OiAyNnB4O1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcblxuICAkeyh7IGNvbGxhcHNlIH0pID0+XG4gICAgY29sbGFwc2UgJiZcbiAgICBgXG4gICAgJiBpIHtcbiAgICAgIHRyYW5zZm9ybTogbm9uZTtcbiAgICB9XG4gIGB9O1xuYDtcbiIsImltcG9ydCB1c2VTb2NrZXQgZnJvbSAnQGhvb2tzL3VzZVNvY2tldCc7XG5pbXBvcnQgeyBDb2xsYXBzZUJ1dHRvbiB9IGZyb20gJ0BsYXlvdXRzL1dvcmtzcGFjZS9zdHlsZXMnO1xuaW1wb3J0IHsgSUNoYW5uZWwsIElDaGF0LCBJVXNlciB9IGZyb20gJ0B0eXBpbmdzL2RiJztcbmltcG9ydCBSZWFjdCwgeyBGQywgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgTmF2TGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBjaGFubmVsRGF0YT86IElDaGFubmVsW107XG4gIHVzZXJEYXRhPzogSVVzZXI7XG59XG5cbmNvbnN0IENoYW5uZWxMaXN0OiBGQzxQcm9wcz4gPSAoeyB1c2VyRGF0YSwgY2hhbm5lbERhdGEgfSkgPT4ge1xuICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdXNlUGFyYW1zPHsgd29ya3NwYWNlPzogc3RyaW5nIH0+KCk7XG4gIGNvbnN0IFtzb2NrZXRdID0gdXNlU29ja2V0KHdvcmtzcGFjZSk7XG4gIGNvbnN0IFtjaGFubmVsQ29sbGFwc2UsIHNldENoYW5uZWxDb2xsYXBzZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb3VudExpc3QsIHNldENvdW50TGlzdF0gPSB1c2VTdGF0ZTx7IFtrZXk6IHN0cmluZ106IG51bWJlciB8IHVuZGVmaW5lZCB9Pih7fSk7XG5cbiAgY29uc3QgdG9nZ2xlQ2hhbm5lbENvbGxhcHNlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldENoYW5uZWxDb2xsYXBzZSgocHJldikgPT4gIXByZXYpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgcmVzZXRDb3VudCA9IHVzZUNhbGxiYWNrKFxuICAgIChpZCkgPT4gKCkgPT4ge1xuICAgICAgc2V0Q291bnRMaXN0KChsaXN0KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubGlzdCxcbiAgICAgICAgICBbaWRdOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtdLFxuICApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3dvcmtzcGFjZSDrsJTqvIjri6QnLCB3b3Jrc3BhY2UpO1xuICAgIHNldENvdW50TGlzdCh7fSk7XG4gIH0sIFt3b3Jrc3BhY2VdKTtcblxuICBjb25zdCBvbk1lc3NhZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YTogSUNoYXQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdtZXNzYWdl7JmU64ukJywgZGF0YSk7XG4gICAgICBjb25zdCBtZW50aW9uczogc3RyaW5nW10gfCBudWxsID0gZGF0YS5jb250ZW50Lm1hdGNoKC9AXFxbKC4rPylcXF1cXCgoXFxkKVxcKS9nKTtcbiAgICAgIGlmIChtZW50aW9ucz8uZmluZCgodikgPT4gdi5tYXRjaCgvQFxcWyguKz8pXFxdXFwoKFxcZClcXCkvKSFbMl0gPT09IHVzZXJEYXRhPy5pZC50b1N0cmluZygpKSkge1xuICAgICAgICByZXR1cm4gc2V0Q291bnRMaXN0KChsaXN0KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmxpc3QsXG4gICAgICAgICAgICBbYGMtJHtkYXRhLkNoYW5uZWxJZH1gXTogKGxpc3RbYGMtJHtkYXRhLkNoYW5uZWxJZH1gXSB8fCAwKSArIDEsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBzZXRDb3VudExpc3QoKGxpc3QpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5saXN0LFxuICAgICAgICAgIFtgYy0ke2RhdGEuQ2hhbm5lbElkfWBdOiBsaXN0W2BjLSR7ZGF0YS5DaGFubmVsSWR9YF0gfHwgMCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW3VzZXJEYXRhXSxcbiAgKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNvY2tldD8ub24oJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpO1xuICAgIGNvbnNvbGUubG9nKCdzb2NrZXQgb24gbWVzc2FnZScsIHNvY2tldD8uaGFzTGlzdGVuZXJzKCdtZXNzYWdlJyksIHNvY2tldCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHNvY2tldD8ub2ZmKCdtZXNzYWdlJywgb25NZXNzYWdlKTtcbiAgICAgIGNvbnNvbGUubG9nKCdzb2NrZXQgb2ZmIG1lc3NhZ2UnLCBzb2NrZXQ/Lmhhc0xpc3RlbmVycygnbWVzc2FnZScpKTtcbiAgICB9O1xuICB9LCBbc29ja2V0LCB1c2VyRGF0YV0pO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxoMj5cbiAgICAgICAgPENvbGxhcHNlQnV0dG9uIGNvbGxhcHNlPXtjaGFubmVsQ29sbGFwc2V9IG9uQ2xpY2s9e3RvZ2dsZUNoYW5uZWxDb2xsYXBzZX0+XG4gICAgICAgICAgPGlcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImMtaWNvbiBwLWNoYW5uZWxfc2lkZWJhcl9fc2VjdGlvbl9oZWFkaW5nX2V4cGFuZCBwLWNoYW5uZWxfc2lkZWJhcl9fc2VjdGlvbl9oZWFkaW5nX2V4cGFuZC0tc2hvd19tb3JlX2ZlYXR1cmUgYy1pY29uLS1jYXJldC1yaWdodCBjLWljb24tLWluaGVyaXQgYy1pY29uLS1pbmxpbmVcIlxuICAgICAgICAgICAgZGF0YS1xYT1cImNoYW5uZWwtc2VjdGlvbi1jb2xsYXBzZVwiXG4gICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvQ29sbGFwc2VCdXR0b24+XG4gICAgICAgIDxzcGFuPkNoYW5uZWxzPC9zcGFuPlxuICAgICAgPC9oMj5cbiAgICAgIDxkaXY+XG4gICAgICAgIHshY2hhbm5lbENvbGxhcHNlICYmXG4gICAgICAgICAgY2hhbm5lbERhdGE/Lm1hcCgoY2hhbm5lbCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY291bnQgPSBjb3VudExpc3RbYGMtJHtjaGFubmVsLmlkfWBdO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPE5hdkxpbmtcbiAgICAgICAgICAgICAgICBrZXk9e2NoYW5uZWwubmFtZX1cbiAgICAgICAgICAgICAgICBhY3RpdmVDbGFzc05hbWU9XCJzZWxlY3RlZFwiXG4gICAgICAgICAgICAgICAgdG89e2Avd29ya3NwYWNlLyR7d29ya3NwYWNlfS9jaGFubmVsLyR7Y2hhbm5lbC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgb25DbGljaz17cmVzZXRDb3VudChgYy0ke2NoYW5uZWwuaWR9YCl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2NvdW50ICE9PSB1bmRlZmluZWQgJiYgY291bnQgPj0gMCA/ICdib2xkJyA6IHVuZGVmaW5lZH0+IyB7Y2hhbm5lbC5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICB7Y291bnQgIT09IHVuZGVmaW5lZCAmJiBjb3VudCA+IDAgJiYgPHNwYW4gY2xhc3NOYW1lPVwiY291bnRcIj57Y291bnR9PC9zcGFuPn1cbiAgICAgICAgICAgICAgPC9OYXZMaW5rPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgIDwvZGl2PlxuICAgIDwvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhbm5lbExpc3Q7XG4iLCJpbXBvcnQgdXNlU29ja2V0IGZyb20gJ0Bob29rcy91c2VTb2NrZXQnO1xuaW1wb3J0IHsgQ29sbGFwc2VCdXR0b24gfSBmcm9tICdAbGF5b3V0cy9Xb3Jrc3BhY2Uvc3R5bGVzJztcbmltcG9ydCB7IElETSwgSVVzZXIsIElVc2VyV2l0aE9ubGluZSB9IGZyb20gJ0B0eXBpbmdzL2RiJztcbmltcG9ydCBmZXRjaGVyIGZyb20gJ0B1dGlscy9mZXRjaGVyJztcbmltcG9ydCBSZWFjdCwgeyBGQywgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgTmF2TGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IHVzZVNXUiBmcm9tICdzd3InO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICB1c2VyRGF0YT86IElVc2VyO1xufVxuXG5jb25zdCBETUxpc3Q6IEZDPFByb3BzPiA9ICh7IHVzZXJEYXRhIH0pID0+IHtcbiAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHVzZVBhcmFtczx7IHdvcmtzcGFjZT86IHN0cmluZyB9PigpO1xuICBjb25zdCB7IGRhdGE6IG1lbWJlckRhdGEgfSA9IHVzZVNXUjxJVXNlcldpdGhPbmxpbmVbXT4oXG4gICAgdXNlckRhdGEgPyBgL2FwaS93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L21lbWJlcnNgIDogbnVsbCxcbiAgICBmZXRjaGVyLFxuICApO1xuICBjb25zdCBbc29ja2V0XSA9IHVzZVNvY2tldCh3b3Jrc3BhY2UpO1xuICBjb25zdCBbY2hhbm5lbENvbGxhcHNlLCBzZXRDaGFubmVsQ29sbGFwc2VdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY291bnRMaXN0LCBzZXRDb3VudExpc3RdID0gdXNlU3RhdGU8eyBba2V5OiBzdHJpbmddOiBudW1iZXIgfT4oe30pO1xuICBjb25zdCBbb25saW5lTGlzdCwgc2V0T25saW5lTGlzdF0gPSB1c2VTdGF0ZTxudW1iZXJbXT4oW10pO1xuXG4gIGNvbnN0IHRvZ2dsZUNoYW5uZWxDb2xsYXBzZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRDaGFubmVsQ29sbGFwc2UoKHByZXYpID0+ICFwcmV2KTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHJlc2V0Q291bnQgPSB1c2VDYWxsYmFjayhcbiAgICAoaWQpID0+ICgpID0+IHtcbiAgICAgIHNldENvdW50TGlzdCgobGlzdCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmxpc3QsXG4gICAgICAgICAgW2lkXTogMCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW10sXG4gICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnd29ya3NwYWNlIOuwlOq8iOuLpCcsIHdvcmtzcGFjZSk7XG4gICAgc2V0T25saW5lTGlzdChbXSk7XG4gICAgc2V0Q291bnRMaXN0KHt9KTtcbiAgfSwgW3dvcmtzcGFjZV0pO1xuXG4gIGNvbnN0IG9uTWVzc2FnZSA9IHVzZUNhbGxiYWNrKChkYXRhOiBJRE0pID0+IHtcbiAgICBjb25zb2xlLmxvZygnZG3smZTri6QnLCBkYXRhKTtcbiAgICBzZXRDb3VudExpc3QoKGxpc3QpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmxpc3QsXG4gICAgICAgIFtkYXRhLlNlbmRlcklkXTogbGlzdFtkYXRhLlNlbmRlcklkXSA/IGxpc3RbZGF0YS5TZW5kZXJJZF0gKyAxIDogMSxcbiAgICAgIH07XG4gICAgfSk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNvY2tldD8ub24oJ29ubGluZUxpc3QnLCAoZGF0YTogbnVtYmVyW10pID0+IHtcbiAgICAgIHNldE9ubGluZUxpc3QoZGF0YSk7XG4gICAgfSk7XG4gICAgc29ja2V0Py5vbignZG0nLCBvbk1lc3NhZ2UpO1xuICAgIGNvbnNvbGUubG9nKCdzb2NrZXQgb24gZG0nLCBzb2NrZXQ/Lmhhc0xpc3RlbmVycygnZG0nKSwgc29ja2V0KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc29ja2V0Py5vZmYoJ2RtJywgb25NZXNzYWdlKTtcbiAgICAgIGNvbnNvbGUubG9nKCdzb2NrZXQgb2ZmIGRtJywgc29ja2V0Py5oYXNMaXN0ZW5lcnMoJ2RtJykpO1xuICAgICAgc29ja2V0Py5vZmYoJ29ubGluZUxpc3QnKTtcbiAgICB9O1xuICB9LCBbc29ja2V0XSk7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGgyPlxuICAgICAgICA8Q29sbGFwc2VCdXR0b24gY29sbGFwc2U9e2NoYW5uZWxDb2xsYXBzZX0gb25DbGljaz17dG9nZ2xlQ2hhbm5lbENvbGxhcHNlfT5cbiAgICAgICAgICA8aVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYy1pY29uIHAtY2hhbm5lbF9zaWRlYmFyX19zZWN0aW9uX2hlYWRpbmdfZXhwYW5kIHAtY2hhbm5lbF9zaWRlYmFyX19zZWN0aW9uX2hlYWRpbmdfZXhwYW5kLS1zaG93X21vcmVfZmVhdHVyZSBjLWljb24tLWNhcmV0LXJpZ2h0IGMtaWNvbi0taW5oZXJpdCBjLWljb24tLWlubGluZVwiXG4gICAgICAgICAgICBkYXRhLXFhPVwiY2hhbm5lbC1zZWN0aW9uLWNvbGxhcHNlXCJcbiAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9Db2xsYXBzZUJ1dHRvbj5cbiAgICAgICAgPHNwYW4+RGlyZWN0IE1lc3NhZ2VzPC9zcGFuPlxuICAgICAgPC9oMj5cbiAgICAgIDxkaXY+XG4gICAgICAgIHshY2hhbm5lbENvbGxhcHNlICYmXG4gICAgICAgICAgbWVtYmVyRGF0YT8ubWFwKChtZW1iZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzT25saW5lID0gb25saW5lTGlzdC5pbmNsdWRlcyhtZW1iZXIuaWQpO1xuICAgICAgICAgICAgY29uc3QgY291bnQgPSBjb3VudExpc3RbbWVtYmVyLmlkXSB8fCAwO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPE5hdkxpbmtcbiAgICAgICAgICAgICAgICBrZXk9e21lbWJlci5pZH1cbiAgICAgICAgICAgICAgICBhY3RpdmVDbGFzc05hbWU9XCJzZWxlY3RlZFwiXG4gICAgICAgICAgICAgICAgdG89e2Avd29ya3NwYWNlLyR7d29ya3NwYWNlfS9kbS8ke21lbWJlci5pZH1gfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3Jlc2V0Q291bnQobWVtYmVyLmlkKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BjLWljb24gcC1jaGFubmVsX3NpZGViYXJfX3ByZXNlbmNlX2ljb24gcC1jaGFubmVsX3NpZGViYXJfX3ByZXNlbmNlX2ljb24tLWRpbV9lbmFibGVkIGMtcHJlc2VuY2UgJHtcbiAgICAgICAgICAgICAgICAgICAgaXNPbmxpbmUgPyAnYy1wcmVzZW5jZS0tYWN0aXZlIGMtaWNvbi0tcHJlc2VuY2Utb25saW5lJyA6ICdjLWljb24tLXByZXNlbmNlLW9mZmxpbmUnXG4gICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgICBkYXRhLXFhPVwicHJlc2VuY2VfaW5kaWNhdG9yXCJcbiAgICAgICAgICAgICAgICAgIGRhdGEtcWEtcHJlc2VuY2Utc2VsZj1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICAgIGRhdGEtcWEtcHJlc2VuY2UtYWN0aXZlPVwiZmFsc2VcIlxuICAgICAgICAgICAgICAgICAgZGF0YS1xYS1wcmVzZW5jZS1kbmQ9XCJmYWxzZVwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2NvdW50ID4gMCA/ICdib2xkJyA6IHVuZGVmaW5lZH0+e21lbWJlci5uaWNrbmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAge21lbWJlci5pZCA9PT0gdXNlckRhdGE/LmlkICYmIDxzcGFuPiAo64KYKTwvc3Bhbj59XG4gICAgICAgICAgICAgICAge2NvdW50ID4gMCAmJiA8c3BhbiBjbGFzc05hbWU9XCJjb3VudFwiPntjb3VudH08L3NwYW4+fVxuICAgICAgICAgICAgICA8L05hdkxpbms+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgPC9kaXY+XG4gICAgPC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBETUxpc3Q7XG4iLCJpbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5cbmV4cG9ydCBjb25zdCBDcmVhdGVNZW51ID0gc3R5bGVkLmRpdmBcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAwO1xuICBsZWZ0OiAwO1xuICBib3R0b206IDA7XG4gIHotaW5kZXg6IDEwMDA7XG5cbiAgJiA+IGRpdiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAtLXNhZi0wOiByZ2JhKHZhcigtLXNrX2ZvcmVncm91bmRfbG93LCAyOSwgMjgsIDI5KSwgMC4xMyk7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLXNhZi0wKSwgMCA0cHggMTJweCAwIHJnYmEoMCwgMCwgMCwgMC4xMik7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSh2YXIoLS1za19mb3JlZ3JvdW5kX21pbl9zb2xpZCwgMjQ4LCAyNDgsIDI0OCksIDEpO1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICBtaW4td2lkdGg6IDM2MHB4O1xuICAgIHotaW5kZXg6IDUxMjtcbiAgICBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMjBweCk7XG4gICAgY29sb3I6IHJnYigyOSwgMjgsIDI5KTtcbiAgfVxuYDtcblxuZXhwb3J0IGNvbnN0IENsb3NlTW9kYWxCdXR0b24gPSBzdHlsZWQuYnV0dG9uYFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAxMHB4O1xuICB0b3A6IDZweDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGJvcmRlcjogbm9uZTtcbiAgZm9udC1zaXplOiAzMHB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG5gO1xuIiwiaW1wb3J0IHsgQ3JlYXRlTWVudSwgQ2xvc2VNb2RhbEJ1dHRvbiB9IGZyb20gJ0Bjb21wb25lbnRzL01lbnUvc3R5bGVzJztcbmltcG9ydCBSZWFjdCwgeyBDU1NQcm9wZXJ0aWVzLCBGQywgUHJvcHNXaXRoQ2hpbGRyZW4sIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBzaG93OiBib29sZWFuO1xuICBvbkNsb3NlTW9kYWw6ICgpID0+IHZvaWQ7XG4gIHN0eWxlOiBDU1NQcm9wZXJ0aWVzO1xuICBjbG9zZUJ1dHRvbj86IGJvb2xlYW47XG59XG5cbmNvbnN0IE1lbnU6IEZDPFByb3BzV2l0aENoaWxkcmVuPFByb3BzPj4gPSAoeyBjbG9zZUJ1dHRvbiwgc3R5bGUsIHNob3csIGNoaWxkcmVuLCBvbkNsb3NlTW9kYWwgfSkgPT4ge1xuICBjb25zdCBzdG9wUHJvcGFnYXRpb24gPSB1c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH0sIFtdKTtcblxuICBpZiAoIXNob3cpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gKFxuICAgIDxDcmVhdGVNZW51IG9uQ2xpY2s9e29uQ2xvc2VNb2RhbH0+XG4gICAgICA8ZGl2IG9uQ2xpY2s9e3N0b3BQcm9wYWdhdGlvbn0gc3R5bGU9e3N0eWxlfT5cbiAgICAgICAge2Nsb3NlQnV0dG9uICYmIDxDbG9zZU1vZGFsQnV0dG9uIG9uQ2xpY2s9e29uQ2xvc2VNb2RhbH0+JnRpbWVzOzwvQ2xvc2VNb2RhbEJ1dHRvbj59XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDwvZGl2PlxuICAgIDwvQ3JlYXRlTWVudT5cbiAgKTtcbn07XG5NZW51LmRlZmF1bHRQcm9wcyA9IHtcbiAgY2xvc2VCdXR0b246IHRydWUsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBNZW51O1xuIiwiaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuXG5leHBvcnQgY29uc3QgQ3JlYXRlTW9kYWwgPSBzdHlsZWQuZGl2YFxuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbGVmdDogMDtcbiAgYm90dG9tOiAwO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAwO1xuICB6LWluZGV4OiAxMDIyO1xuXG4gICYgPiBkaXYge1xuICAgIG1hcmdpbi10b3A6IDIwMHB4O1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB3aWR0aDogNDQwcHg7XG4gICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgLS1zYWYtMDogcmdiYSh2YXIoLS1za19mb3JlZ3JvdW5kX2xvdywgMjksIDI4LCAyOSksIDAuMTMpO1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1zYWYtMCksIDAgNHB4IDEycHggMCByZ2JhKDAsIDAsIDAsIDAuMTIpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEodmFyKC0tc2tfZm9yZWdyb3VuZF9taW5fc29saWQsIDI0OCwgMjQ4LCAyNDgpLCAxKTtcbiAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgbWF4LXdpZHRoOiA0NDBweDtcbiAgICBwYWRkaW5nOiAzMHB4IDQwcHggMDtcbiAgICB6LWluZGV4OiAxMDEyO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgfVxuYDtcblxuZXhwb3J0IGNvbnN0IENsb3NlTW9kYWxCdXR0b24gPSBzdHlsZWQuYnV0dG9uYFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAxMHB4O1xuICB0b3A6IDZweDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGJvcmRlcjogbm9uZTtcbiAgZm9udC1zaXplOiAzMHB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG5gO1xuIiwiaW1wb3J0IHsgQ3JlYXRlTW9kYWwsIENsb3NlTW9kYWxCdXR0b24gfSBmcm9tICdAY29tcG9uZW50cy9Nb2RhbC9zdHlsZXMnO1xuaW1wb3J0IFJlYWN0LCB7IEZDLCBQcm9wc1dpdGhDaGlsZHJlbiwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHNob3c6IGJvb2xlYW47XG4gIG9uQ2xvc2VNb2RhbDogKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgTW9kYWw6IEZDPFByb3BzV2l0aENoaWxkcmVuPFByb3BzPj4gPSAoeyBzaG93LCBjaGlsZHJlbiwgb25DbG9zZU1vZGFsIH0pID0+IHtcbiAgY29uc3Qgc3RvcFByb3BhZ2F0aW9uID0gdXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICB9LCBbXSk7XG5cbiAgaWYgKCFzaG93KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIChcbiAgICA8Q3JlYXRlTW9kYWwgb25DbGljaz17b25DbG9zZU1vZGFsfT5cbiAgICAgIDxkaXYgb25DbGljaz17c3RvcFByb3BhZ2F0aW9ufT5cbiAgICAgICAgPENsb3NlTW9kYWxCdXR0b24gb25DbGljaz17b25DbG9zZU1vZGFsfT4mdGltZXM7PC9DbG9zZU1vZGFsQnV0dG9uPlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L2Rpdj5cbiAgICA8L0NyZWF0ZU1vZGFsPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTW9kYWw7XG4iLCJpbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5pbXBvcnQgeyBNZW50aW9uc0lucHV0IH0gZnJvbSAncmVhY3QtbWVudGlvbnMnO1xuXG5leHBvcnQgY29uc3QgQ2hhdEFyZWEgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICB3aWR0aDogMTAwJTtcbiAgcGFkZGluZzogMjBweDtcbiAgcGFkZGluZy10b3A6IDA7XG5gO1xuXG5leHBvcnQgY29uc3QgRm9ybSA9IHN0eWxlZC5mb3JtYFxuICBjb2xvcjogcmdiKDI5LCAyOCwgMjkpO1xuICBmb250LXNpemU6IDE1cHg7XG4gIHdpZHRoOiAxMDAlO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYigyOSwgMjgsIDI5KTtcbmA7XG5cbmV4cG9ydCBjb25zdCBNZW50aW9uc1RleHRhcmVhID0gc3R5bGVkKE1lbnRpb25zSW5wdXQpYFxuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyOiBub25lO1xuICBmb250LWZhbWlseTogU2xhY2stTGF0bywgYXBwbGVMb2dvLCBzYW5zLXNlcmlmO1xuICBmb250LXNpemU6IDE1cHg7XG4gIHBhZGRpbmc6IDlweCAxMHB4O1xuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuXG4gICYgdGV4dGFyZWEge1xuICAgIGhlaWdodDogNDRweDtcbiAgICBwYWRkaW5nOiA5cHggMTBweCAhaW1wb3J0YW50O1xuICAgIG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDtcbiAgICBib3JkZXItcmFkaXVzOiA0cHggIWltcG9ydGFudDtcbiAgICByZXNpemU6IG5vbmUgIWltcG9ydGFudDtcbiAgICBsaW5lLWhlaWdodDogMjJweDtcbiAgICBib3JkZXI6IG5vbmU7XG4gIH1cblxuICAmIHVsIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCBsaWdodGdyYXk7XG4gICAgbWF4LWhlaWdodDogMjAwcHg7XG4gICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICBwYWRkaW5nOiA5cHggMTBweDtcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgd2lkdGg6IDE1MHB4O1xuICB9XG5gO1xuXG5leHBvcnQgY29uc3QgVG9vbGJveCA9IHN0eWxlZC5kaXZgXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYmFja2dyb3VuZDogcmdiKDI0OCwgMjQ4LCAyNDgpO1xuICBoZWlnaHQ6IDQxcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2IoMjIxLCAyMjEsIDIyMSk7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbmA7XG5cbmV4cG9ydCBjb25zdCBTZW5kQnV0dG9uID0gc3R5bGVkLmJ1dHRvbmBcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogNXB4O1xuICB0b3A6IDVweDtcbmA7XG5cbmV4cG9ydCBjb25zdCBFYWNoTWVudGlvbiA9IHN0eWxlZC5idXR0b248eyBmb2N1czogYm9vbGVhbiB9PmBcbiAgcGFkZGluZzogNHB4IDIwcHg7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBib3JkZXI6IG5vbmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGNvbG9yOiByZ2IoMjgsIDI5LCAyOCk7XG4gIHdpZHRoOiAxMDAlO1xuXG4gICYgaW1nIHtcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgfVxuXG4gICR7KHsgZm9jdXMgfSkgPT5cbiAgICBmb2N1cyAmJlxuICAgIGBcbiAgICBiYWNrZ3JvdW5kOiAjMTI2NGEzO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgYH07XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogIzEyNjRhMztcbiAgICBjb2xvcjogd2hpdGU7XG4gIH1cbmA7XG4iLCJpbXBvcnQgeyBDaGF0QXJlYSwgRm9ybSwgTWVudGlvbnNUZXh0YXJlYSwgU2VuZEJ1dHRvbiwgVG9vbGJveCwgRWFjaE1lbnRpb24gfSBmcm9tICdAY29tcG9uZW50cy9DaGF0Qm94L3N0eWxlcyc7XG5pbXBvcnQgeyBJVXNlciB9IGZyb20gJ0B0eXBpbmdzL2RiJztcbmltcG9ydCBhdXRvc2l6ZSBmcm9tICdhdXRvc2l6ZSc7XG5pbXBvcnQgZ3JhdmF0YXIgZnJvbSAnZ3JhdmF0YXInO1xuaW1wb3J0IFJlYWN0LCB7IEZDLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgTWVudGlvbiwgU3VnZ2VzdGlvbkRhdGFJdGVtIH0gZnJvbSAncmVhY3QtbWVudGlvbnMnO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBvblN1Ym1pdEZvcm06IChlOiBhbnkpID0+IHZvaWQ7XG4gIGNoYXQ/OiBzdHJpbmc7XG4gIG9uQ2hhbmdlQ2hhdDogKGU6IGFueSkgPT4gdm9pZDtcbiAgcGxhY2Vob2xkZXI6IHN0cmluZztcbiAgZGF0YT86IElVc2VyW107XG59XG5jb25zdCBDaGF0Qm94OiBGQzxQcm9wcz4gPSAoeyBvblN1Ym1pdEZvcm0sIGNoYXQsIG9uQ2hhbmdlQ2hhdCwgcGxhY2Vob2xkZXIsIGRhdGEgfSkgPT4ge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGF1dG9zaXplKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0b3ItY2hhdCcpISk7XG4gIH0sIFtjaGF0XSk7XG5cbiAgY29uc3Qgb25LZXlkb3duQ2hhdCA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgaWYgKCFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIG9uU3VibWl0Rm9ybShlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgW2NoYXRdLFxuICApO1xuXG4gIGNvbnN0IHJlbmRlclVzZXJTdWdnZXN0aW9uOiAoXG4gICAgc3VnZ2VzdGlvbjogU3VnZ2VzdGlvbkRhdGFJdGVtLFxuICAgIHNlYXJjaDogc3RyaW5nLFxuICAgIGhpZ2hsaWdodGVkRGlzcGxheTogUmVhY3QuUmVhY3ROb2RlLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgZm9jdXNlZDogYm9vbGVhbixcbiAgKSA9PiBSZWFjdC5SZWFjdE5vZGUgPSB1c2VDYWxsYmFjayhcbiAgICAobWVtYmVyLCBzZWFyY2gsIGhpZ2hsaWdodGVkRGlzcGxheSwgaW5kZXgsIGZvY3VzKSA9PiB7XG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8RWFjaE1lbnRpb24gZm9jdXM9e2ZvY3VzfT5cbiAgICAgICAgICA8aW1nIHNyYz17Z3JhdmF0YXIudXJsKGRhdGFbaW5kZXhdLmVtYWlsLCB7IHM6ICcyMHB4JyB9KX0gYWx0PXtkYXRhW2luZGV4XS5uaWNrbmFtZX0gLz5cbiAgICAgICAgICA8c3Bhbj57ZGF0YVtpbmRleF0ubmlja25hbWV9PC9zcGFuPlxuICAgICAgICA8L0VhY2hNZW50aW9uPlxuICAgICAgKTtcbiAgICB9LFxuICAgIFtkYXRhXSxcbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDxDaGF0QXJlYT5cbiAgICAgIDxGb3JtIG9uU3VibWl0PXtvblN1Ym1pdEZvcm19PlxuICAgICAgICA8TWVudGlvbnNUZXh0YXJlYVxuICAgICAgICAgIGlkPVwiZWRpdG9yLWNoYXRcIlxuICAgICAgICAgIHZhbHVlPXtjaGF0fVxuICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZUNoYXR9XG4gICAgICAgICAgb25LZXlEb3duPXtvbktleWRvd25DaGF0fVxuICAgICAgICAgIHBsYWNlaG9sZGVyPXtwbGFjZWhvbGRlcn1cbiAgICAgICAgPlxuICAgICAgICAgIDxNZW50aW9uXG4gICAgICAgICAgICBhcHBlbmRTcGFjZU9uQWRkXG4gICAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kOiAncmdiYSgyOSwgMTU1LCAyMDksIC4xKScsIGNvbG9yOiAncmdiKDE4LCAxMDAsIDE2MyknIH19XG4gICAgICAgICAgICB0cmlnZ2VyPVwiQFwiXG4gICAgICAgICAgICBkYXRhPXtkYXRhPy5tYXAoKHYpID0+ICh7IGlkOiB2LmlkLCBkaXNwbGF5OiB2Lm5pY2tuYW1lIH0pKSB8fCBbXX1cbiAgICAgICAgICAgIHJlbmRlclN1Z2dlc3Rpb249e3JlbmRlclVzZXJTdWdnZXN0aW9ufVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvTWVudGlvbnNUZXh0YXJlYT5cbiAgICAgICAgPFRvb2xib3g+XG4gICAgICAgICAgPFNlbmRCdXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17XG4gICAgICAgICAgICAgICdjLWJ1dHRvbi11bnN0eWxlZCBjLWljb25fYnV0dG9uIGMtaWNvbl9idXR0b24tLWxpZ2h0IGMtaWNvbl9idXR0b24tLXNpemVfbWVkaXVtIGMtdGV4dHlfaW5wdXRfX2J1dHRvbiBjLXRleHR5X2lucHV0X19idXR0b24tLXNlbmQnICtcbiAgICAgICAgICAgICAgKGNoYXQ/LnRyaW0oKSA/ICcnIDogJyBjLXRleHR5X2lucHV0X19idXR0b24tLWRpc2FibGVkJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGEtcWE9XCJ0ZXh0eV9zZW5kX2J1dHRvblwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiU2VuZCBtZXNzYWdlXCJcbiAgICAgICAgICAgIGRhdGEtc2s9XCJ0b29sdGlwX3BhcmVudFwiXG4gICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgIGRpc2FibGVkPXshY2hhdD8udHJpbSgpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImMtaWNvbiBjLWljb24tLXBhcGVycGxhbmUtZmlsbGVkXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICA8L1NlbmRCdXR0b24+XG4gICAgICAgIDwvVG9vbGJveD5cbiAgICAgIDwvRm9ybT5cbiAgICA8L0NoYXRBcmVhPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhdEJveDtcbiIsImltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcblxuZXhwb3J0IGNvbnN0IENoYXRXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgcGFkZGluZzogOHB4IDIwcHg7XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogI2VlZTtcbiAgfVxuXG4gICYgPiBkaXY6Zmlyc3Qtb2YtdHlwZSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICB3aWR0aDogMzZweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDhweDtcblxuICAgICYgaW1nIHtcbiAgICAgIHdpZHRoOiAzNnB4O1xuICAgICAgaGVpZ2h0OiAzNnB4O1xuICAgIH1cbiAgfVxuXG4gICYgPiBkaXY6bGFzdC1vZi10eXBlIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXg6IDE7XG4gIH1cblxuICAmIGEge1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICBjb2xvcjogZGVlcHNreWJsdWU7XG4gIH1cbmA7XG4iLCJpbXBvcnQgeyBDaGF0V3JhcHBlciB9IGZyb20gJ0Bjb21wb25lbnRzL0NoYXQvc3R5bGVzJztcbmltcG9ydCB7IElDaGF0LCBJRE0sIElVc2VyIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJztcbmltcG9ydCBncmF2YXRhciBmcm9tICdncmF2YXRhcic7XG5pbXBvcnQgUmVhY3QsIHsgRkMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IHJlZ2V4aWZ5U3RyaW5nIGZyb20gJ3JlZ2V4aWZ5LXN0cmluZyc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGRhdGE6IElETSB8IElDaGF0O1xufVxuXG5jb25zdCBDaGF0OiBGQzxQcm9wcz4gPSAoeyBkYXRhIH0pID0+IHtcbiAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHVzZVBhcmFtczx7IHdvcmtzcGFjZTogc3RyaW5nOyBjaGFubmVsOiBzdHJpbmcgfT4oKTtcbiAgY29uc3QgdXNlcjogSVVzZXIgPSAnU2VuZGVyJyBpbiBkYXRhID8gZGF0YS5TZW5kZXIgOiBkYXRhLlVzZXI7XG5cbiAgY29uc3QgcmVzdWx0ID0gcmVnZXhpZnlTdHJpbmcoe1xuICAgIHBhdHRlcm46IC9AXFxbKC4rPylcXF1cXCgoXFxkKVxcKS9nLFxuICAgIGRlY29yYXRvcihtYXRjaCwgaW5kZXgpIHtcbiAgICAgIGNvbnN0IGFycjogc3RyaW5nW10gPSBtYXRjaC5tYXRjaCgvQFxcWyguKz8pXFxdXFwoKFxcZClcXCkvKSE7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8TGluayBrZXk9e21hdGNoICsgaW5kZXh9IHRvPXtgL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vZG0vJHthcnJbMl19YH0+XG4gICAgICAgICAgQHthcnJbMV19XG4gICAgICAgIDwvTGluaz5cbiAgICAgICk7XG4gICAgfSxcbiAgICBpbnB1dDogZGF0YS5jb250ZW50LFxuICB9KTtcbiAgcmV0dXJuIChcbiAgICA8Q2hhdFdyYXBwZXI+XG4gICAgICA8ZGl2PlxuICAgICAgICA8aW1nIHNyYz17Z3JhdmF0YXIudXJsKHVzZXIuZW1haWwsIHsgczogJzM2cHgnIH0pfSBhbHQ9e3VzZXIubmlja25hbWV9IC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgc3R5bGU9e3sgZmxleFdyYXA6ICd3cmFwJyB9fT5cbiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXg6ICcwIDAgMTAwJScsIGFsaWduSXRlbXM6ICdjZW50ZXInIH19PlxuICAgICAgICAgIDxiIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiA1IH19Pnt1c2VyLm5pY2tuYW1lfTwvYj5cbiAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250U2l6ZTogMTIgfX0+e2RheWpzKGRhdGEuY3JlYXRlZEF0KS5mb3JtYXQoJ2g6bW0gQScpfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxwIHN0eWxlPXt7IGZsZXg6ICcwIDAgMTAwJScsIG1hcmdpbjogMCB9fT57cmVzdWx0fTwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvQ2hhdFdyYXBwZXI+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDaGF0O1xuIiwiaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuXG5leHBvcnQgY29uc3QgQ2hhdFpvbmUgPSBzdHlsZWQuZGl2YFxuICB3aWR0aDogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleDogMTtcbmA7XG5cbmV4cG9ydCBjb25zdCBTZWN0aW9uID0gc3R5bGVkLnNlY3Rpb25gXG4gIG1hcmdpbi10b3A6IDIwcHg7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlO1xuYDtcblxuZXhwb3J0IGNvbnN0IFN0aWNreUhlYWRlciA9IHN0eWxlZC5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBmbGV4OiAxO1xuICB3aWR0aDogMTAwJTtcbiAgcG9zaXRpb246IHN0aWNreTtcbiAgdG9wOiAxNHB4O1xuXG4gICYgYnV0dG9uIHtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgaGVpZ2h0OiAyOHB4O1xuICAgIGxpbmUtaGVpZ2h0OiAyN3B4O1xuICAgIHBhZGRpbmc6IDAgMTZweDtcbiAgICB6LWluZGV4OiAyO1xuICAgIC0tc2FmLTA6IHJnYmEodmFyKC0tc2tfZm9yZWdyb3VuZF9sb3csIDI5LCAyOCwgMjkpLCAwLjEzKTtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tc2FmLTApLCAwIDFweCAzcHggMCByZ2JhKDAsIDAsIDAsIDAuMDgpO1xuICAgIGJvcmRlci1yYWRpdXM6IDI0cHg7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHRvcDogLTEzcHg7XG4gICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIG91dGxpbmU6IG5vbmU7XG4gIH1cbmA7XG4iLCJpbXBvcnQgQ2hhdCBmcm9tICdAY29tcG9uZW50cy9DaGF0JztcbmltcG9ydCB7IENoYXRab25lLCBTZWN0aW9uLCBTdGlja3lIZWFkZXIgfSBmcm9tICdAY29tcG9uZW50cy9DaGF0TGlzdC9zdHlsZXMnO1xuaW1wb3J0IHsgSUNoYXQsIElETSB9IGZyb20gJ0B0eXBpbmdzL2RiJztcbmltcG9ydCBSZWFjdCwgeyBGQywgUmVmT2JqZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFNjcm9sbGJhcnMgfSBmcm9tICdyZWFjdC1jdXN0b20tc2Nyb2xsYmFycyc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHNjcm9sbGJhclJlZjogUmVmT2JqZWN0PFNjcm9sbGJhcnM+O1xuICBpc1JlYWNoaW5nRW5kPzogYm9vbGVhbjtcbiAgaXNFbXB0eTogYm9vbGVhbjtcbiAgY2hhdFNlY3Rpb25zOiB7IFtrZXk6IHN0cmluZ106IChJRE0gfCBJQ2hhdClbXSB9O1xuICBzZXRTaXplOiAoZjogKHNpemU6IG51bWJlcikgPT4gbnVtYmVyKSA9PiBQcm9taXNlPChJRE0gfCBJQ2hhdClbXVtdIHwgdW5kZWZpbmVkPjtcbn1cbmNvbnN0IENoYXRMaXN0OiBGQzxQcm9wcz4gPSAoeyBzY3JvbGxiYXJSZWYsIGlzUmVhY2hpbmdFbmQsIGlzRW1wdHksIGNoYXRTZWN0aW9ucywgc2V0U2l6ZSB9KSA9PiB7XG4gIGNvbnN0IG9uU2Nyb2xsID0gdXNlQ2FsbGJhY2soXG4gICAgKHZhbHVlcykgPT4ge1xuICAgICAgaWYgKHZhbHVlcy5zY3JvbGxUb3AgPT09IDAgJiYgIWlzUmVhY2hpbmdFbmQgJiYgIWlzRW1wdHkpIHtcbiAgICAgICAgc2V0U2l6ZSgoc2l6ZSkgPT4gc2l6ZSArIDEpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50Py5zY3JvbGxUb3Aoc2Nyb2xsYmFyUmVmLmN1cnJlbnQ/LmdldFNjcm9sbEhlaWdodCgpIC0gdmFsdWVzLnNjcm9sbEhlaWdodCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2lzUmVhY2hpbmdFbmQsIGlzRW1wdHldLFxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPENoYXRab25lPlxuICAgICAgPFNjcm9sbGJhcnMgYXV0b0hpZGUgcmVmPXtzY3JvbGxiYXJSZWZ9IG9uU2Nyb2xsRnJhbWU9e29uU2Nyb2xsfT5cbiAgICAgICAge09iamVjdC5lbnRyaWVzKGNoYXRTZWN0aW9ucykubWFwKChbZGF0ZSwgY2hhdHNdKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxTZWN0aW9uIGNsYXNzTmFtZT17YHNlY3Rpb24tJHtkYXRlfWB9IGtleT17ZGF0ZX0+XG4gICAgICAgICAgICAgIDxTdGlja3lIZWFkZXI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbj57ZGF0ZX08L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9TdGlja3lIZWFkZXI+XG4gICAgICAgICAgICAgIHtjaGF0cy5tYXAoKGNoYXQpID0+IChcbiAgICAgICAgICAgICAgICA8Q2hhdCBrZXk9e2NoYXQuaWR9IGRhdGE9e2NoYXR9IC8+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9TZWN0aW9uPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pfVxuICAgICAgPC9TY3JvbGxiYXJzPlxuICAgIDwvQ2hhdFpvbmU+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDaGF0TGlzdDtcbiIsImltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcblxuZXhwb3J0IGNvbnN0IEhlYWRlciA9IHN0eWxlZC5oZWFkZXJgXG4gIGhlaWdodDogNjRweDtcbiAgZGlzcGxheTogZmxleDtcbiAgd2lkdGg6IDEwMCU7XG4gIC0tc2FmLTA6IHJnYmEodmFyKC0tc2tfZm9yZWdyb3VuZF9sb3csIDI5LCAyOCwgMjkpLCAwLjEzKTtcbiAgYm94LXNoYWRvdzogMCAxcHggMCB2YXIoLS1zYWYtMCk7XG4gIHBhZGRpbmc6IDIwcHggMTZweCAyMHB4IDIwcHg7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuYDtcbiIsImltcG9ydCB7IElDaGF0LCBJRE0gfSBmcm9tICdAdHlwaW5ncy9kYic7XG5pbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtYWtlU2VjdGlvbjxUIGV4dGVuZHMgSURNIHwgSUNoYXQ+KGNoYXRMaXN0OiBUW10pIHtcbiAgY29uc3Qgc2VjdGlvbnM6IHsgW2tleTogc3RyaW5nXTogVFtdIH0gPSB7fTtcbiAgY2hhdExpc3QuZm9yRWFjaCgoY2hhdCkgPT4ge1xuICAgIGNvbnN0IG1vbnRoRGF0ZSA9IGRheWpzKGNoYXQuY3JlYXRlZEF0KS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzZWN0aW9uc1ttb250aERhdGVdKSkge1xuICAgICAgc2VjdGlvbnNbbW9udGhEYXRlXS5wdXNoKGNoYXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWN0aW9uc1ttb250aERhdGVdID0gW2NoYXRdO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBzZWN0aW9ucztcbn1cbiIsImltcG9ydCBDaGF0Qm94IGZyb20gJ0Bjb21wb25lbnRzL0NoYXRCb3gnO1xuaW1wb3J0IENoYXRMaXN0IGZyb20gJ0Bjb21wb25lbnRzL0NoYXRMaXN0JztcbmltcG9ydCBNb2RhbCBmcm9tICdAY29tcG9uZW50cy9Nb2RhbCc7XG5pbXBvcnQgdXNlSW5wdXQgZnJvbSAnQGhvb2tzL3VzZUlucHV0JztcbmltcG9ydCB1c2VTb2NrZXQgZnJvbSAnQGhvb2tzL3VzZVNvY2tldCc7XG5pbXBvcnQgeyBIZWFkZXIgfSBmcm9tICdAcGFnZXMvQ2hhbm5lbC9zdHlsZXMnO1xuaW1wb3J0IHsgQnV0dG9uLCBJbnB1dCwgTGFiZWwgfSBmcm9tICdAcGFnZXMvU2lnblVwL3N0eWxlcyc7XG5pbXBvcnQgeyBJQ2hhbm5lbCwgSUNoYXQsIElVc2VyIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IGZldGNoZXIgZnJvbSAnQHV0aWxzL2ZldGNoZXInO1xuaW1wb3J0IG1ha2VTZWN0aW9uIGZyb20gJ0B1dGlscy9tYWtlU2VjdGlvbic7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTY3JvbGxiYXJzIH0gZnJvbSAncmVhY3QtY3VzdG9tLXNjcm9sbGJhcnMnO1xuaW1wb3J0IHsgdXNlUGFyYW1zIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmltcG9ydCB7IHRvYXN0LCBUb2FzdENvbnRhaW5lciB9IGZyb20gJ3JlYWN0LXRvYXN0aWZ5JztcbmltcG9ydCB1c2VTV1IsIHsgdXNlU1dSSW5maW5pdGUgfSBmcm9tICdzd3InO1xuXG5jb25zdCBQQUdFX1NJWkUgPSAyMDtcbmNvbnN0IENoYW5uZWwgPSAoKSA9PiB7XG4gIGNvbnN0IHsgd29ya3NwYWNlLCBjaGFubmVsIH0gPSB1c2VQYXJhbXM8eyB3b3Jrc3BhY2U6IHN0cmluZzsgY2hhbm5lbDogc3RyaW5nIH0+KCk7XG4gIGNvbnN0IFtzb2NrZXRdID0gdXNlU29ja2V0KHdvcmtzcGFjZSk7XG4gIGNvbnN0IHsgZGF0YTogdXNlckRhdGEsIHJldmFsaWRhdGUgfSA9IHVzZVNXUjxJVXNlcj4oJy9hcGkvdXNlcicsIGZldGNoZXIpO1xuICBjb25zdCB7IGRhdGE6IGNoYW5uZWxEYXRhIH0gPSB1c2VTV1I8SUNoYW5uZWw+KGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vY2hhbm5lbC8ke2NoYW5uZWx9YCwgZmV0Y2hlcik7XG4gIGNvbnN0IHsgZGF0YTogY2hhdERhdGEsIHJldmFsaWRhdGU6IHJldmFsaWRhdGVDaGF0LCBtdXRhdGU6IG11dGF0ZUNoYXQsIHNldFNpemUgfSA9IHVzZVNXUkluZmluaXRlPElDaGF0W10+KFxuICAgIChpbmRleCkgPT4gYC9hcGkvd29ya3NwYWNlLyR7d29ya3NwYWNlfS9jaGFubmVsLyR7Y2hhbm5lbH0vY2hhdHM/cGVyUGFnZT0ke1BBR0VfU0laRX0mcGFnZT0ke2luZGV4ICsgMX1gLFxuICAgIGZldGNoZXIsXG4gICk7XG4gIGNvbnN0IHsgZGF0YTogY2hhbm5lbE1lbWJlcnNEYXRhLCByZXZhbGlkYXRlOiByZXZhbGlkYXRlTWVtYmVycyB9ID0gdXNlU1dSPElVc2VyW10+KFxuICAgIHVzZXJEYXRhID8gYC9hcGkvd29ya3NwYWNlLyR7d29ya3NwYWNlfS9jaGFubmVsLyR7Y2hhbm5lbH0vbWVtYmVyc2AgOiBudWxsLFxuICAgIGZldGNoZXIsXG4gICk7XG4gIGNvbnN0IFtjaGF0LCBvbkNoYW5nZUNoYXQsIHNldENoYXRdID0gdXNlSW5wdXQoJycpO1xuICBjb25zdCBbbmV3TWVtYmVyLCBvbkNoYW5nZU5ld01lbWJlciwgc2V0TmV3TWVtYmVyXSA9IHVzZUlucHV0KCcnKTtcbiAgY29uc3QgW3Nob3dJbnZpdGVDaGFubmVsTW9kYWwsIHNldFNob3dJbnZpdGVDaGFubmVsTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBzY3JvbGxiYXJSZWYgPSB1c2VSZWY8U2Nyb2xsYmFycz4obnVsbCk7XG5cbiAgY29uc3QgaXNFbXB0eSA9IGNoYXREYXRhPy5bMF0/Lmxlbmd0aCA9PT0gMDtcbiAgY29uc3QgaXNSZWFjaGluZ0VuZCA9IGlzRW1wdHkgfHwgKGNoYXREYXRhICYmIGNoYXREYXRhW2NoYXREYXRhLmxlbmd0aCAtIDFdPy5sZW5ndGggPCBQQUdFX1NJWkUpO1xuXG4gIGNvbnN0IG9uSW52aXRlTWVtYmVyID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghbmV3TWVtYmVyIHx8ICFuZXdNZW1iZXIudHJpbSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGF4aW9zXG4gICAgICAgIC5wb3N0KGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vY2hhbm5lbC8ke2NoYW5uZWx9L21lbWJlcmAsIHtcbiAgICAgICAgICBlbWFpbDogbmV3TWVtYmVyLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmV2YWxpZGF0ZU1lbWJlcnMoKTtcbiAgICAgICAgICBzZXRTaG93SW52aXRlQ2hhbm5lbE1vZGFsKGZhbHNlKTtcbiAgICAgICAgICBzZXROZXdNZW1iZXIoJycpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5kaXIoZXJyb3IpO1xuICAgICAgICAgIHRvYXN0LmVycm9yKGVycm9yLnJlc3BvbnNlPy5kYXRhLCB7IHBvc2l0aW9uOiAnYm90dG9tLWNlbnRlcicgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgW25ld01lbWJlcl0sXG4gICk7XG5cbiAgY29uc3Qgb25DbG9zZU1vZGFsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dJbnZpdGVDaGFubmVsTW9kYWwoZmFsc2UpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgb25TdWJtaXRGb3JtID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChjaGF0Py50cmltKCkgJiYgY2hhdERhdGEgJiYgY2hhbm5lbERhdGEgJiYgdXNlckRhdGEpIHtcbiAgICAgICAgY29uc3Qgc2F2ZWRDaGF0ID0gY2hhdDtcbiAgICAgICAgbXV0YXRlQ2hhdCgocHJldkNoYXREYXRhKSA9PiB7XG4gICAgICAgICAgcHJldkNoYXREYXRhWzBdLnVuc2hpZnQoe1xuICAgICAgICAgICAgaWQ6IChjaGF0RGF0YVswXVswXT8uaWQgfHwgMCkgKyAxLFxuICAgICAgICAgICAgY29udGVudDogc2F2ZWRDaGF0LFxuICAgICAgICAgICAgVXNlcklkOiB1c2VyRGF0YS5pZCxcbiAgICAgICAgICAgIFVzZXI6IHVzZXJEYXRhLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgQ2hhbm5lbElkOiBjaGFubmVsRGF0YS5pZCxcbiAgICAgICAgICAgIENoYW5uZWw6IGNoYW5uZWxEYXRhLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBwcmV2Q2hhdERhdGE7XG4gICAgICAgIH0sIGZhbHNlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBzZXRDaGF0KCcnKTtcbiAgICAgICAgICBpZiAoc2Nyb2xsYmFyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY3JvbGxUb0JvdHRvbSEnKTtcbiAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXhpb3NcbiAgICAgICAgICAucG9zdChgL2FwaS93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L2NoYW5uZWwvJHtjaGFubmVsfS9jaGF0YCwge1xuICAgICAgICAgICAgY29udGVudDogc2F2ZWRDaGF0LFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2NoYXQsIHdvcmtzcGFjZSwgY2hhbm5lbCwgY2hhbm5lbERhdGEsIHNjcm9sbGJhclJlZi5jdXJyZW50LCB1c2VyRGF0YSwgY2hhdERhdGFdLFxuICApO1xuXG4gIGNvbnN0IG9uTWVzc2FnZSA9IHVzZUNhbGxiYWNrKFxuICAgIChkYXRhOiBJQ2hhdCkgPT4ge1xuICAgICAgaWYgKGRhdGEuQ2hhbm5lbC5uYW1lID09PSBjaGFubmVsICYmIGRhdGEuVXNlcklkICE9PSB1c2VyRGF0YT8uaWQpIHtcbiAgICAgICAgbXV0YXRlQ2hhdCgoY2hhdERhdGEpID0+IHtcbiAgICAgICAgICBjaGF0RGF0YVswXS51bnNoaWZ0KGRhdGEpO1xuICAgICAgICAgIHJldHVybiBjaGF0RGF0YTtcbiAgICAgICAgfSwgZmFsc2UpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGlmIChzY3JvbGxiYXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBzY3JvbGxiYXJSZWYuY3VycmVudC5nZXRTY3JvbGxIZWlnaHQoKSA8XG4gICAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LmdldENsaWVudEhlaWdodCgpICsgc2Nyb2xsYmFyUmVmLmN1cnJlbnQuZ2V0U2Nyb2xsVG9wKCkgKyAxNTBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2Nyb2xsVG9Cb3R0b20hJyk7XG4gICAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0b2FzdC5zdWNjZXNzKCfsg4gg66mU7Iuc7KeA6rCAIOuPhOywqe2WiOyKteuLiOuLpC4nLCB7XG4gICAgICAgICAgICAgICAgb25DbGljaygpIHtcbiAgICAgICAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50Py5zY3JvbGxUb0JvdHRvbSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3Njcm9sbGJhclJlZi5jdXJyZW50LCB1c2VyRGF0YV0sXG4gICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzb2NrZXQ/Lm9uKCdtZXNzYWdlJywgb25NZXNzYWdlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc29ja2V0Py5vZmYoJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpO1xuICAgIH07XG4gIH0sIFtzY3JvbGxiYXJSZWYuY3VycmVudCwgc29ja2V0LCB1c2VyRGF0YV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNoYXREYXRhPy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnNvbGUubG9nKCd0b0JvdHRvbScsIGNoYXREYXRhKTtcbiAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50Py5zY3JvbGxUb0JvdHRvbSgpO1xuICAgIH1cbiAgfSwgW2NoYXREYXRhLCBzY3JvbGxiYXJSZWYuY3VycmVudF0pO1xuXG4gIGNvbnN0IG9uQ2xpY2tJbnZpdGVDaGFubmVsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dJbnZpdGVDaGFubmVsTW9kYWwodHJ1ZSk7XG4gIH0sIFtdKTtcblxuICAvLyBUT0RPOiBjaGFubmVsIOqygOyCrFxuXG4gIGNvbnN0IGNoYXRTZWN0aW9ucyA9IG1ha2VTZWN0aW9uKGNoYXREYXRhID8gKFtdIGFzIElDaGF0W10pLmNvbmNhdCguLi5jaGF0RGF0YSkucmV2ZXJzZSgpIDogW10pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhXcmFwOiAnd3JhcCcsIGhlaWdodDogJ2NhbGMoMTAwdmggLSAzOHB4KScsIGZsZXhGbG93OiAnY29sdW1uJyB9fT5cbiAgICAgIDxIZWFkZXI+XG4gICAgICAgIDxzcGFuPiN7Y2hhbm5lbH08L3NwYW4+XG4gICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4OiAxLCBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJywgYWxpZ25JdGVtczogJ2NlbnRlcicgfX0+XG4gICAgICAgICAgPHNwYW4+e2NoYW5uZWxNZW1iZXJzRGF0YT8ubGVuZ3RofTwvc3Bhbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrSW52aXRlQ2hhbm5lbH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImMtYnV0dG9uLXVuc3R5bGVkIHAtaWFfX3ZpZXdfaGVhZGVyX19idXR0b25cIlxuICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkFkZCBwZW9wbGUgdG8gI3JlYWN0LW5hdGl2ZVwiXG4gICAgICAgICAgICBkYXRhLXNrPVwidG9vbHRpcF9wYXJlbnRcIlxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiYy1pY29uIHAtaWFfX3ZpZXdfaGVhZGVyX19idXR0b25faWNvbiBjLWljb24tLWFkZC11c2VyXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0hlYWRlcj5cbiAgICAgIDxDaGF0TGlzdFxuICAgICAgICBzY3JvbGxiYXJSZWY9e3Njcm9sbGJhclJlZn1cbiAgICAgICAgaXNSZWFjaGluZ0VuZD17aXNSZWFjaGluZ0VuZH1cbiAgICAgICAgaXNFbXB0eT17aXNFbXB0eX1cbiAgICAgICAgY2hhdFNlY3Rpb25zPXtjaGF0U2VjdGlvbnN9XG4gICAgICAgIHNldFNpemU9e3NldFNpemV9XG4gICAgICAvPlxuICAgICAgPENoYXRCb3hcbiAgICAgICAgb25TdWJtaXRGb3JtPXtvblN1Ym1pdEZvcm19XG4gICAgICAgIGNoYXQ9e2NoYXR9XG4gICAgICAgIG9uQ2hhbmdlQ2hhdD17b25DaGFuZ2VDaGF0fVxuICAgICAgICBwbGFjZWhvbGRlcj17YE1lc3NhZ2UgIyR7Y2hhbm5lbH1gfVxuICAgICAgICBkYXRhPXtjaGFubmVsTWVtYmVyc0RhdGF9XG4gICAgICAvPlxuICAgICAgPE1vZGFsIHNob3c9e3Nob3dJbnZpdGVDaGFubmVsTW9kYWx9IG9uQ2xvc2VNb2RhbD17b25DbG9zZU1vZGFsfT5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e29uSW52aXRlTWVtYmVyfT5cbiAgICAgICAgICA8TGFiZWwgaWQ9XCJtZW1iZXItbGFiZWxcIj5cbiAgICAgICAgICAgIDxzcGFuPuyxhOuEkCDrqaTrsoQg7LSI64yAPC9zcGFuPlxuICAgICAgICAgICAgPElucHV0IGlkPVwibWVtYmVyXCIgdmFsdWU9e25ld01lbWJlcn0gb25DaGFuZ2U9e29uQ2hhbmdlTmV3TWVtYmVyfSAvPlxuICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgPEJ1dHRvbiB0eXBlPVwic3VibWl0XCI+7IOd7ISx7ZWY6riwPC9CdXR0b24+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8VG9hc3RDb250YWluZXIgcG9zaXRpb249XCJib3R0b20tY2VudGVyXCIgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENoYW5uZWw7XG4iLCJpbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5cbmV4cG9ydCBjb25zdCBIZWFkZXIgPSBzdHlsZWQuaGVhZGVyYFxuICBoZWlnaHQ6IDY0cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHdpZHRoOiAxMDAlO1xuICAtLXNhZi0wOiByZ2JhKHZhcigtLXNrX2ZvcmVncm91bmRfbG93LCAyOSwgMjgsIDI5KSwgMC4xMyk7XG4gIGJveC1zaGFkb3c6IDAgMXB4IDAgdmFyKC0tc2FmLTApO1xuICBwYWRkaW5nOiAyMHB4IDE2cHggMjBweCAyMHB4O1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAmIGltZyB7XG4gICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gIH1cbmA7XG4iLCJpbXBvcnQgQ2hhdEJveCBmcm9tICdAY29tcG9uZW50cy9DaGF0Qm94JztcbmltcG9ydCBDaGF0TGlzdCBmcm9tICdAY29tcG9uZW50cy9DaGF0TGlzdCc7XG5pbXBvcnQgdXNlSW5wdXQgZnJvbSAnQGhvb2tzL3VzZUlucHV0JztcbmltcG9ydCB1c2VTb2NrZXQgZnJvbSAnQGhvb2tzL3VzZVNvY2tldCc7XG5pbXBvcnQgeyBIZWFkZXIgfSBmcm9tICdAcGFnZXMvRGlyZWN0TWVzc2FnZS9zdHlsZXMnO1xuaW1wb3J0IHsgSURNIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IGZldGNoZXIgZnJvbSAnQHV0aWxzL2ZldGNoZXInO1xuaW1wb3J0IG1ha2VTZWN0aW9uIGZyb20gJ0B1dGlscy9tYWtlU2VjdGlvbic7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGdyYXZhdGFyIGZyb20gJ2dyYXZhdGFyJztcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTY3JvbGxiYXJzIH0gZnJvbSAncmVhY3QtY3VzdG9tLXNjcm9sbGJhcnMnO1xuaW1wb3J0IHsgdXNlUGFyYW1zIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSAncmVhY3QtdG9hc3RpZnknO1xuaW1wb3J0IHVzZVNXUiwgeyB1c2VTV1JJbmZpbml0ZSB9IGZyb20gJ3N3cic7XG5cbmNvbnN0IFBBR0VfU0laRSA9IDIwO1xuY29uc3QgRGlyZWN0TWVzc2FnZSA9ICgpID0+IHtcbiAgY29uc3QgeyB3b3Jrc3BhY2UsIGlkIH0gPSB1c2VQYXJhbXM8eyB3b3Jrc3BhY2U6IHN0cmluZzsgaWQ6IHN0cmluZyB9PigpO1xuICBjb25zdCBbc29ja2V0XSA9IHVzZVNvY2tldCh3b3Jrc3BhY2UpO1xuICBjb25zdCB7IGRhdGE6IG15RGF0YSB9ID0gdXNlU1dSKCcvYXBpL3VzZXInLCBmZXRjaGVyKTtcbiAgY29uc3QgeyBkYXRhOiB1c2VyRGF0YSB9ID0gdXNlU1dSKGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vdXNlci8ke2lkfWAsIGZldGNoZXIpO1xuICBjb25zdCB7IGRhdGE6IGNoYXREYXRhLCByZXZhbGlkYXRlOiByZXZhbGlkYXRlQ2hhdCwgbXV0YXRlOiBtdXRhdGVDaGF0LCBzZXRTaXplIH0gPSB1c2VTV1JJbmZpbml0ZTxJRE1bXT4oXG4gICAgKGluZGV4KSA9PiBgL2FwaS93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L2RtLyR7aWR9L2NoYXRzP3BlclBhZ2U9JHtQQUdFX1NJWkV9JnBhZ2U9JHtpbmRleCArIDF9YCxcbiAgICBmZXRjaGVyLFxuICApO1xuICBjb25zdCBbY2hhdCwgb25DaGFuZ2VDaGF0LCBzZXRDaGF0XSA9IHVzZUlucHV0KCcnKTtcbiAgY29uc3Qgc2Nyb2xsYmFyUmVmID0gdXNlUmVmPFNjcm9sbGJhcnM+KG51bGwpO1xuXG4gIGNvbnN0IGlzRW1wdHkgPSBjaGF0RGF0YT8uWzBdPy5sZW5ndGggPT09IDA7XG4gIGNvbnN0IGlzUmVhY2hpbmdFbmQgPSBpc0VtcHR5IHx8IChjaGF0RGF0YSAmJiBjaGF0RGF0YVtjaGF0RGF0YS5sZW5ndGggLSAxXT8ubGVuZ3RoIDwgUEFHRV9TSVpFKTtcblxuICBjb25zdCBvblN1Ym1pdEZvcm0gPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKGNoYXQ/LnRyaW0oKSAmJiBjaGF0RGF0YSkge1xuICAgICAgICBjb25zdCBzYXZlZENoYXQgPSBjaGF0O1xuICAgICAgICBtdXRhdGVDaGF0KChwcmV2Q2hhdERhdGEpID0+IHtcbiAgICAgICAgICBwcmV2Q2hhdERhdGFbMF0udW5zaGlmdCh7XG4gICAgICAgICAgICBpZDogKGNoYXREYXRhWzBdWzBdPy5pZCB8fCAwKSArIDEsXG4gICAgICAgICAgICBjb250ZW50OiBzYXZlZENoYXQsXG4gICAgICAgICAgICBTZW5kZXJJZDogbXlEYXRhLmlkLFxuICAgICAgICAgICAgU2VuZGVyOiBteURhdGEsXG4gICAgICAgICAgICBSZWNlaXZlcklkOiB1c2VyRGF0YS5pZCxcbiAgICAgICAgICAgIFJlY2VpdmVyOiB1c2VyRGF0YSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gcHJldkNoYXREYXRhO1xuICAgICAgICB9LCBmYWxzZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgc2V0Q2hhdCgnJyk7XG4gICAgICAgICAgaWYgKHNjcm9sbGJhclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2Nyb2xsVG9Cb3R0b20hJyk7XG4gICAgICAgICAgICBzY3JvbGxiYXJSZWYuY3VycmVudC5zY3JvbGxUb0JvdHRvbSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGF4aW9zXG4gICAgICAgICAgLnBvc3QoYC9hcGkvd29ya3NwYWNlLyR7d29ya3NwYWNlfS9kbS8ke2lkfS9jaGF0YCwge1xuICAgICAgICAgICAgY29udGVudDogY2hhdCxcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtjaGF0LCB3b3Jrc3BhY2UsIGlkLCBzY3JvbGxiYXJSZWYuY3VycmVudCwgdXNlckRhdGEsIGNoYXREYXRhXSxcbiAgKTtcblxuICBjb25zdCBvbk1lc3NhZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YTogSURNKSA9PiB7XG4gICAgICBpZiAoZGF0YS5TZW5kZXJJZCA9PT0gTnVtYmVyKGlkKSAmJiBteURhdGEuaWQgIT09IE51bWJlcihpZCkpIHtcbiAgICAgICAgbXV0YXRlQ2hhdCgoY2hhdERhdGEpID0+IHtcbiAgICAgICAgICBjaGF0RGF0YVswXS51bnNoaWZ0KGRhdGEpO1xuICAgICAgICAgIHJldHVybiBjaGF0RGF0YTtcbiAgICAgICAgfSwgZmFsc2UpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGlmIChzY3JvbGxiYXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBzY3JvbGxiYXJSZWYuY3VycmVudC5nZXRTY3JvbGxIZWlnaHQoKSA8XG4gICAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LmdldENsaWVudEhlaWdodCgpICsgc2Nyb2xsYmFyUmVmLmN1cnJlbnQuZ2V0U2Nyb2xsVG9wKCkgKyAxNTBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2Nyb2xsVG9Cb3R0b20hJyk7XG4gICAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0b2FzdC5zdWNjZXNzKCfsg4gg66mU7Iuc7KeA6rCAIOuPhOywqe2WiOyKteuLiOuLpC4nLCB7XG4gICAgICAgICAgICAgICAgb25DbGljaygpIHtcbiAgICAgICAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50Py5zY3JvbGxUb0JvdHRvbSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3Njcm9sbGJhclJlZi5jdXJyZW50LCBpZF0sXG4gICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzb2NrZXQ/Lm9uKCdkbScsIG9uTWVzc2FnZSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHNvY2tldD8ub2ZmKCdkbScsIG9uTWVzc2FnZSk7XG4gICAgfTtcbiAgfSwgW3Njcm9sbGJhclJlZi5jdXJyZW50LCBzb2NrZXQsIGlkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2hhdERhdGE/Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc29sZS5sb2coJ3RvQm90dG9tJywgY2hhdERhdGEpO1xuICAgICAgc2Nyb2xsYmFyUmVmLmN1cnJlbnQ/LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgfVxuICB9LCBbY2hhdERhdGEsIHNjcm9sbGJhclJlZi5jdXJyZW50XSk7XG5cbiAgaWYgKCF1c2VyRGF0YSB8fCAhbXlEYXRhKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBjaGF0U2VjdGlvbnMgPSBtYWtlU2VjdGlvbihjaGF0RGF0YSA/IChbXSBhcyBJRE1bXSkuY29uY2F0KC4uLmNoYXREYXRhKS5yZXZlcnNlKCkgOiBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleFdyYXA6ICd3cmFwJywgaGVpZ2h0OiAnY2FsYygxMDB2aCAtIDM4cHgpJywgZmxleEZsb3c6ICdjb2x1bW4nIH19PlxuICAgICAgPEhlYWRlcj5cbiAgICAgICAgPGltZyBzcmM9e2dyYXZhdGFyLnVybCh1c2VyRGF0YS5lbWFpbCwgeyBzOiAnMjRweCcgfSl9IGFsdD17dXNlckRhdGEubmlja25hbWV9IC8+XG4gICAgICAgIDxzcGFuPnt1c2VyRGF0YS5uaWNrbmFtZX08L3NwYW4+XG4gICAgICA8L0hlYWRlcj5cbiAgICAgIDxDaGF0TGlzdFxuICAgICAgICBzY3JvbGxiYXJSZWY9e3Njcm9sbGJhclJlZn1cbiAgICAgICAgaXNSZWFjaGluZ0VuZD17aXNSZWFjaGluZ0VuZH1cbiAgICAgICAgaXNFbXB0eT17aXNFbXB0eX1cbiAgICAgICAgY2hhdFNlY3Rpb25zPXtjaGF0U2VjdGlvbnN9XG4gICAgICAgIHNldFNpemU9e3NldFNpemV9XG4gICAgICAvPlxuICAgICAgPENoYXRCb3hcbiAgICAgICAgb25TdWJtaXRGb3JtPXtvblN1Ym1pdEZvcm19XG4gICAgICAgIGNoYXQ9e2NoYXR9XG4gICAgICAgIG9uQ2hhbmdlQ2hhdD17b25DaGFuZ2VDaGF0fVxuICAgICAgICBwbGFjZWhvbGRlcj17YE1lc3NhZ2UgJHt1c2VyRGF0YS5uaWNrbmFtZX1gfVxuICAgICAgICBkYXRhPXtbXX1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBEaXJlY3RNZXNzYWdlO1xuIiwiaW1wb3J0IENoYW5uZWxMaXN0IGZyb20gJ0Bjb21wb25lbnRzL0NoYW5uZWxMaXN0JztcbmltcG9ydCBETUxpc3QgZnJvbSAnQGNvbXBvbmVudHMvRE1MaXN0JztcbmltcG9ydCBNZW51IGZyb20gJ0Bjb21wb25lbnRzL01lbnUnO1xuaW1wb3J0IE1vZGFsIGZyb20gJ0Bjb21wb25lbnRzL01vZGFsJztcbmltcG9ydCB1c2VJbnB1dCBmcm9tICdAaG9va3MvdXNlSW5wdXQnO1xuaW1wb3J0IHVzZVNvY2tldCBmcm9tICdAaG9va3MvdXNlU29ja2V0JztcbmltcG9ydCBDaGFubmVsIGZyb20gJ0BwYWdlcy9DaGFubmVsJztcbmltcG9ydCBEaXJlY3RNZXNzYWdlIGZyb20gJ0BwYWdlcy9EaXJlY3RNZXNzYWdlJztcbmltcG9ydCB7IEJ1dHRvbiwgSW5wdXQsIExhYmVsIH0gZnJvbSAnQHBhZ2VzL1NpZ25VcC9zdHlsZXMnO1xuaW1wb3J0IHsgSUNoYW5uZWwsIElDaGF0LCBJRE0sIElVc2VyLCBJVXNlcldpdGhPbmxpbmUgfSBmcm9tICdAdHlwaW5ncy9kYic7XG5pbXBvcnQgZmV0Y2hlciBmcm9tICdAdXRpbHMvZmV0Y2hlcic7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGdyYXZhdGFyIGZyb20gJ2dyYXZhdGFyJztcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlSGlzdG9yeSwgdXNlTG9jYXRpb24sIHVzZVBhcmFtcywgdXNlUm91dGVNYXRjaCB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5pbXBvcnQgeyBMaW5rLCBOYXZMaW5rLCBSZWRpcmVjdCwgUm91dGUsIFN3aXRjaCB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IHsgdG9hc3QsIFRvYXN0Q29udGFpbmVyIH0gZnJvbSAncmVhY3QtdG9hc3RpZnknO1xuaW1wb3J0ICdyZWFjdC10b2FzdGlmeS9kaXN0L1JlYWN0VG9hc3RpZnkuY3NzJztcbmltcG9ydCBpbyBmcm9tICdzb2NrZXQuaW8tY2xpZW50JztcbmltcG9ydCB1c2VTV1IgZnJvbSAnc3dyJztcblxuaW1wb3J0IHtcbiAgQWRkQnV0dG9uLFxuICBDaGFubmVscyxcbiAgQ2hhdHMsXG4gIENvbGxhcHNlQnV0dG9uLFxuICBIZWFkZXIsXG4gIExvZ091dEJ1dHRvbixcbiAgTWVudVNjcm9sbCxcbiAgUHJvZmlsZUltZyxcbiAgUHJvZmlsZU1vZGFsLFxuICBSaWdodE1lbnUsXG4gIFdvcmtzcGFjZUJ1dHRvbixcbiAgV29ya3NwYWNlTW9kYWwsXG4gIFdvcmtzcGFjZU5hbWUsXG4gIFdvcmtzcGFjZXMsXG4gIFdvcmtzcGFjZVdyYXBwZXIsXG59IGZyb20gJy4vc3R5bGVzJztcblxuY29uc3QgV29ya3NwYWNlID0gKCkgPT4ge1xuICBjb25zdCBwYXJhbXMgPSB1c2VQYXJhbXM8eyB3b3Jrc3BhY2U/OiBzdHJpbmcgfT4oKTtcbiAgY29uc3QgbG9jYXRpb24gPSB1c2VMb2NhdGlvbigpO1xuICBjb25zdCByb3V0ZU1hdGNoID0gdXNlUm91dGVNYXRjaCgpO1xuICBjb25zdCBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpO1xuICAvLyBjb25zb2xlLmxvZygncGFyYW1zJywgcGFyYW1zLCAnbG9jYXRpb24nLCBsb2NhdGlvbiwgJ3JvdXRlTWF0Y2gnLCByb3V0ZU1hdGNoLCAnaGlzdG9yeScsIGhpc3RvcnkpO1xuICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gcGFyYW1zO1xuICBjb25zdCBbc29ja2V0LCBkaXNjb25uZWN0U29ja2V0XSA9IHVzZVNvY2tldCh3b3Jrc3BhY2UpO1xuICBjb25zdCB7IGRhdGE6IHVzZXJEYXRhLCByZXZhbGlkYXRlOiByZXZhbGlkYXRlVXNlciB9ID0gdXNlU1dSPElVc2VyIHwgZmFsc2U+KCcvYXBpL3VzZXInLCBmZXRjaGVyKTtcbiAgY29uc3QgeyBkYXRhOiBjaGFubmVsRGF0YSwgcmV2YWxpZGF0ZTogcmV2YWxpZGF0ZUNoYW5uZWwgfSA9IHVzZVNXUjxJQ2hhbm5lbFtdPihcbiAgICB1c2VyRGF0YSA/IGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vY2hhbm5lbHNgIDogbnVsbCxcbiAgICBmZXRjaGVyLFxuICApO1xuICBjb25zb2xlLmxvZygncmVyZW5kZXInLCAndXNlckRhdGEnLCB1c2VyRGF0YSwgJ2NoYW5uZWxEYXRhJywgY2hhbm5lbERhdGEpO1xuICBjb25zdCBbc2hvd0NyZWF0ZVdvcmtzcGFjZU1vZGFsLCBzZXRTaG93Q3JlYXRlV29ya3NwYWNlTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0ludml0ZVdvcmtzcGFjZU1vZGFsLCBzZXRTaG93SW52aXRlV29ya3NwYWNlTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0NyZWF0ZUNoYW5uZWxNb2RhbCwgc2V0U2hvd0NyZWF0ZUNoYW5uZWxNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93VXNlck1lbnUsIHNldFNob3dVc2VyTWVudV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93V29ya3NwYWNlTW9kYWwsIHNldFNob3dXb3Jrc3BhY2VNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtuZXdXb3Jrc3BhY2UsIG9uQ2hhbmdlTmV3V29ya3NwYWNlLCBzZXROZXdXb3Jrc3BhY2VdID0gdXNlSW5wdXQoJycpO1xuICBjb25zdCBbbmV3VXJsLCBvbkNoYW5nZU5ld1VybCwgc2V0TmV3VXJsXSA9IHVzZUlucHV0KCcnKTtcbiAgY29uc3QgW25ld0NoYW5uZWwsIG9uQ2hhbmdlTmV3Q2hhbm5lbCwgc2V0TmV3Q2hhbm5lbF0gPSB1c2VJbnB1dCgnJyk7XG4gIGNvbnN0IFtuZXdNZW1iZXIsIG9uQ2hhbmdlTmV3TWVtYmVyLCBzZXROZXdNZW1iZXJdID0gdXNlSW5wdXQoJycpO1xuXG4gIGNvbnN0IG9uTG9nT3V0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGF4aW9zXG4gICAgICAucG9zdCgnL2FwaS9sb2dvdXQnKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXZhbGlkYXRlVXNlcigpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5kaXIoZXJyb3IpO1xuICAgICAgICB0b2FzdC5lcnJvcihlcnJvci5yZXNwb25zZT8uZGF0YSwgeyBwb3NpdGlvbjogJ2JvdHRvbS1jZW50ZXInIH0pO1xuICAgICAgfSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBvbkNyZWF0ZVdvcmtzcGFjZSA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIW5ld1dvcmtzcGFjZSB8fCAhbmV3V29ya3NwYWNlLnRyaW0oKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIW5ld1VybCB8fCAhbmV3VXJsLnRyaW0oKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBheGlvc1xuICAgICAgICAucG9zdCgnL2FwaS93b3Jrc3BhY2UnLCB7XG4gICAgICAgICAgd29ya3NwYWNlOiBuZXdXb3Jrc3BhY2UsXG4gICAgICAgICAgdXJsOiBuZXdVcmwsXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICByZXZhbGlkYXRlVXNlcigpO1xuICAgICAgICAgIHNldFNob3dDcmVhdGVXb3Jrc3BhY2VNb2RhbChmYWxzZSk7XG4gICAgICAgICAgc2V0TmV3V29ya3NwYWNlKCcnKTtcbiAgICAgICAgICBzZXROZXdVcmwoJycpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5kaXIoZXJyb3IpO1xuICAgICAgICAgIHRvYXN0LmVycm9yKGVycm9yLnJlc3BvbnNlPy5kYXRhLCB7IHBvc2l0aW9uOiAnYm90dG9tLWNlbnRlcicgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgW25ld1dvcmtzcGFjZSwgbmV3VXJsXSxcbiAgKTtcbiAgY29uc3Qgb25DcmVhdGVDaGFubmVsID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghbmV3Q2hhbm5lbCB8fCAhbmV3Q2hhbm5lbC50cmltKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgYXhpb3NcbiAgICAgICAgLnBvc3QoYC9hcGkvd29ya3NwYWNlLyR7d29ya3NwYWNlfS9jaGFubmVsYCwge1xuICAgICAgICAgIG5hbWU6IG5ld0NoYW5uZWwsXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICByZXZhbGlkYXRlQ2hhbm5lbCgpO1xuICAgICAgICAgIHNldFNob3dDcmVhdGVDaGFubmVsTW9kYWwoZmFsc2UpO1xuICAgICAgICAgIHNldE5ld0NoYW5uZWwoJycpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5kaXIoZXJyb3IpO1xuICAgICAgICAgIHRvYXN0LmVycm9yKGVycm9yLnJlc3BvbnNlPy5kYXRhLCB7IHBvc2l0aW9uOiAnYm90dG9tLWNlbnRlcicgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgW25ld0NoYW5uZWxdLFxuICApO1xuICBjb25zdCBvbkludml0ZU1lbWJlciA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIW5ld01lbWJlciB8fCAhbmV3TWVtYmVyLnRyaW0oKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBheGlvc1xuICAgICAgICAucG9zdChgL2FwaS93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L21lbWJlcmAsIHtcbiAgICAgICAgICBlbWFpbDogbmV3TWVtYmVyLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmV2YWxpZGF0ZUNoYW5uZWwoKTtcbiAgICAgICAgICBzZXRTaG93SW52aXRlV29ya3NwYWNlTW9kYWwoZmFsc2UpO1xuICAgICAgICAgIHNldE5ld01lbWJlcignJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmRpcihlcnJvcik7XG4gICAgICAgICAgdG9hc3QuZXJyb3IoZXJyb3IucmVzcG9uc2U/LmRhdGEsIHsgcG9zaXRpb246ICdib3R0b20tY2VudGVyJyB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBbbmV3TWVtYmVyXSxcbiAgKTtcblxuICBjb25zdCBvbkNsaWNrQ3JlYXRlV29ya3NwYWNlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dDcmVhdGVXb3Jrc3BhY2VNb2RhbCh0cnVlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IG9uQ2xpY2tBZGRDaGFubmVsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dDcmVhdGVDaGFubmVsTW9kYWwodHJ1ZSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBvbkNsaWNrSW52aXRlV29ya3NwYWNlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dJbnZpdGVXb3Jrc3BhY2VNb2RhbCh0cnVlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IG9uQ2xvc2VNb2RhbCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93Q3JlYXRlV29ya3NwYWNlTW9kYWwoZmFsc2UpO1xuICAgIHNldFNob3dDcmVhdGVDaGFubmVsTW9kYWwoZmFsc2UpO1xuICAgIHNldFNob3dJbnZpdGVXb3Jrc3BhY2VNb2RhbChmYWxzZSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBvbkNsaWNrVXNlclByb2ZpbGUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2hvd1VzZXJNZW51KChwcmV2KSA9PiAhcHJldik7XG4gIH0sIFtdKTtcblxuICBjb25zdCB0b2dnbGVXb3Jrc3BhY2VNb2RhbCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93V29ya3NwYWNlTW9kYWwoKHByZXYpID0+ICFwcmV2KTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnNvbGUuaW5mbygnZGlzY29ubmVjdCBzb2NrZXQnLCB3b3Jrc3BhY2UpO1xuICAgICAgZGlzY29ubmVjdFNvY2tldCgpO1xuICAgIH07XG4gIH0sIFt3b3Jrc3BhY2VdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2hhbm5lbERhdGEgJiYgdXNlckRhdGEpIHtcbiAgICAgIGNvbnNvbGUuaW5mbygn66Gc6re47J247ZWY7J6QJyk7XG4gICAgICBzb2NrZXQ/LmVtaXQoJ2xvZ2luJywgeyBpZDogdXNlckRhdGE/LmlkLCBjaGFubmVsczogY2hhbm5lbERhdGEubWFwKCh2KSA9PiB2LmlkKSB9KTtcbiAgICB9XG4gIH0sIFt1c2VyRGF0YSwgY2hhbm5lbERhdGFdKTtcblxuICBpZiAodXNlckRhdGEgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIDxSZWRpcmVjdCB0bz1cIi9sb2dpblwiIC8+O1xuICB9XG4gIGlmICh1c2VyRGF0YSAmJiAhdXNlckRhdGEuV29ya3NwYWNlcy5maW5kKCh2KSA9PiB2LnVybCA9PT0gd29ya3NwYWNlKSkge1xuICAgIHJldHVybiA8UmVkaXJlY3QgdG89XCIvd29ya3NwYWNlL3NsZWFjdC9jaGFubmVsL+ydvOuwmFwiIC8+O1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPEhlYWRlcj5cbiAgICAgICAge3VzZXJEYXRhICYmIChcbiAgICAgICAgICA8UmlnaHRNZW51PlxuICAgICAgICAgICAgPHNwYW4gb25DbGljaz17b25DbGlja1VzZXJQcm9maWxlfT5cbiAgICAgICAgICAgICAgPFByb2ZpbGVJbWcgc3JjPXtncmF2YXRhci51cmwodXNlckRhdGEuZW1haWwsIHsgczogJzI4cHgnIH0pfSBhbHQ9e3VzZXJEYXRhLm5pY2tuYW1lfSAvPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAge3Nob3dVc2VyTWVudSAmJiAoXG4gICAgICAgICAgICAgIDxNZW51IHN0eWxlPXt7IHJpZ2h0OiAwLCB0b3A6IDM4IH19IHNob3c9e3Nob3dVc2VyTWVudX0gb25DbG9zZU1vZGFsPXtvbkNsaWNrVXNlclByb2ZpbGV9PlxuICAgICAgICAgICAgICAgIDxQcm9maWxlTW9kYWwgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnIH19PlxuICAgICAgICAgICAgICAgICAgPGltZyBzcmM9e2dyYXZhdGFyLnVybCh1c2VyRGF0YS5lbWFpbCwgeyBzOiAnMzZweCcgfSl9IGFsdD17dXNlckRhdGEubmlja25hbWV9IC8+XG4gICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsIG1hcmdpbkxlZnQ6IDEwIH19PlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cInByb2ZpbGUtbmFtZVwiPnt1c2VyRGF0YS5uaWNrbmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwicHJvZmlsZS1hY3RpdmVcIj5BY3RpdmU8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L1Byb2ZpbGVNb2RhbD5cbiAgICAgICAgICAgICAgICA8TG9nT3V0QnV0dG9uIG9uQ2xpY2s9e29uTG9nT3V0fT7roZzqt7jslYTsm4M8L0xvZ091dEJ1dHRvbj5cbiAgICAgICAgICAgICAgPC9NZW51PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L1JpZ2h0TWVudT5cbiAgICAgICAgKX1cbiAgICAgIDwvSGVhZGVyPlxuICAgICAgPFdvcmtzcGFjZVdyYXBwZXI+XG4gICAgICAgIDxXb3Jrc3BhY2VzPlxuICAgICAgICAgIHt1c2VyRGF0YT8uV29ya3NwYWNlcy5tYXAoKHdzKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8TGluayBrZXk9e3dzLmlkfSB0bz17YC93b3Jrc3BhY2UvJHt3cy51cmx9L2NoYW5uZWwv7J2867CYYH0+XG4gICAgICAgICAgICAgICAgPFdvcmtzcGFjZUJ1dHRvbj57d3MubmFtZS5zbGljZSgwLCAxKS50b1VwcGVyQ2FzZSgpfTwvV29ya3NwYWNlQnV0dG9uPlxuICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICAgIDxBZGRCdXR0b24gb25DbGljaz17b25DbGlja0NyZWF0ZVdvcmtzcGFjZX0+KzwvQWRkQnV0dG9uPlxuICAgICAgICA8L1dvcmtzcGFjZXM+XG4gICAgICAgIDxDaGFubmVscz5cbiAgICAgICAgICA8V29ya3NwYWNlTmFtZSBvbkNsaWNrPXt0b2dnbGVXb3Jrc3BhY2VNb2RhbH0+XG4gICAgICAgICAgICB7dXNlckRhdGE/LldvcmtzcGFjZXMuZmluZCgodikgPT4gdi51cmwgPT09IHdvcmtzcGFjZSk/Lm5hbWV9XG4gICAgICAgICAgPC9Xb3Jrc3BhY2VOYW1lPlxuICAgICAgICAgIDxNZW51U2Nyb2xsPlxuICAgICAgICAgICAgPE1lbnUgc2hvdz17c2hvd1dvcmtzcGFjZU1vZGFsfSBvbkNsb3NlTW9kYWw9e3RvZ2dsZVdvcmtzcGFjZU1vZGFsfSBzdHlsZT17eyB0b3A6IDk1LCBsZWZ0OiA4MCB9fT5cbiAgICAgICAgICAgICAgPFdvcmtzcGFjZU1vZGFsPlxuICAgICAgICAgICAgICAgIDxoMj57dXNlckRhdGE/LldvcmtzcGFjZXMuZmluZCgodikgPT4gdi51cmwgPT09IHdvcmtzcGFjZSk/Lm5hbWV9PC9oMj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uQ2xpY2tJbnZpdGVXb3Jrc3BhY2V9PuybjO2BrOyKpO2OmOydtOyKpOyXkCDsgqzsmqnsnpAg7LSI64yAPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsaWNrQWRkQ2hhbm5lbH0+7LGE64SQIOunjOuTpOq4sDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25Mb2dPdXR9PuuhnOq3uOyVhOybgzwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L1dvcmtzcGFjZU1vZGFsPlxuICAgICAgICAgICAgPC9NZW51PlxuICAgICAgICAgICAgPENoYW5uZWxMaXN0IHVzZXJEYXRhPXt1c2VyRGF0YX0gY2hhbm5lbERhdGE9e2NoYW5uZWxEYXRhfSAvPlxuICAgICAgICAgICAgPERNTGlzdCB1c2VyRGF0YT17dXNlckRhdGF9IC8+XG4gICAgICAgICAgPC9NZW51U2Nyb2xsPlxuICAgICAgICA8L0NoYW5uZWxzPlxuICAgICAgICA8Q2hhdHM+XG4gICAgICAgICAgPFN3aXRjaD5cbiAgICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiL3dvcmtzcGFjZS86d29ya3NwYWNlL2NoYW5uZWwvOmNoYW5uZWxcIiBjb21wb25lbnQ9e0NoYW5uZWx9IC8+XG4gICAgICAgICAgICA8Um91dGUgcGF0aD1cIi93b3Jrc3BhY2UvOndvcmtzcGFjZS9kbS86aWRcIiBjb21wb25lbnQ9e0RpcmVjdE1lc3NhZ2V9IC8+XG4gICAgICAgICAgPC9Td2l0Y2g+XG4gICAgICAgIDwvQ2hhdHM+XG4gICAgICA8L1dvcmtzcGFjZVdyYXBwZXI+XG4gICAgICA8TW9kYWwgc2hvdz17c2hvd0NyZWF0ZVdvcmtzcGFjZU1vZGFsfSBvbkNsb3NlTW9kYWw9e29uQ2xvc2VNb2RhbH0+XG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXtvbkNyZWF0ZVdvcmtzcGFjZX0+XG4gICAgICAgICAgPExhYmVsIGlkPVwid29ya3NwYWNlLWxhYmVsXCI+XG4gICAgICAgICAgICA8c3Bhbj7sm4ztgazsiqTtjpjsnbTsiqQg7J2066aEPC9zcGFuPlxuICAgICAgICAgICAgPElucHV0IGlkPVwid29ya3NwYWNlXCIgdmFsdWU9e25ld1dvcmtzcGFjZX0gb25DaGFuZ2U9e29uQ2hhbmdlTmV3V29ya3NwYWNlfSAvPlxuICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgPExhYmVsIGlkPVwid29ya3NwYWNlLXVybC1sYWJlbFwiPlxuICAgICAgICAgICAgPHNwYW4+7JuM7YGs7Iqk7Y6Y7J207IqkIHVybDwvc3Bhbj5cbiAgICAgICAgICAgIDxJbnB1dCBpZD1cIndvcmtzcGFjZS11cmxcIiB2YWx1ZT17bmV3VXJsfSBvbkNoYW5nZT17b25DaGFuZ2VOZXdVcmx9IC8+XG4gICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJzdWJtaXRcIj7sg53shLHtlZjquLA8L0J1dHRvbj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbCBzaG93PXtzaG93Q3JlYXRlQ2hhbm5lbE1vZGFsfSBvbkNsb3NlTW9kYWw9e29uQ2xvc2VNb2RhbH0+XG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXtvbkNyZWF0ZUNoYW5uZWx9PlxuICAgICAgICAgIDxMYWJlbCBpZD1cImNoYW5uZWwtbGFiZWxcIj5cbiAgICAgICAgICAgIDxzcGFuPuyxhOuEkCDsnbTrpoQ8L3NwYW4+XG4gICAgICAgICAgICA8SW5wdXQgaWQ9XCJjaGFubmVsXCIgdmFsdWU9e25ld0NoYW5uZWx9IG9uQ2hhbmdlPXtvbkNoYW5nZU5ld0NoYW5uZWx9IC8+XG4gICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICA8QnV0dG9uPuyDneyEse2VmOq4sDwvQnV0dG9uPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L01vZGFsPlxuICAgICAgPE1vZGFsIHNob3c9e3Nob3dJbnZpdGVXb3Jrc3BhY2VNb2RhbH0gb25DbG9zZU1vZGFsPXtvbkNsb3NlTW9kYWx9PlxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17b25JbnZpdGVNZW1iZXJ9PlxuICAgICAgICAgIDxMYWJlbCBpZD1cIm1lbWJlci1sYWJlbFwiPlxuICAgICAgICAgICAgPHNwYW4+7J2066mU7J28PC9zcGFuPlxuICAgICAgICAgICAgPElucHV0IGlkPVwibWVtYmVyXCIgdHlwZT1cImVtYWlsXCIgdmFsdWU9e25ld01lbWJlcn0gb25DaGFuZ2U9e29uQ2hhbmdlTmV3TWVtYmVyfSAvPlxuICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgPEJ1dHRvbiB0eXBlPVwic3VibWl0XCI+7LSI64yA7ZWY6riwPC9CdXR0b24+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8VG9hc3RDb250YWluZXIgcG9zaXRpb249XCJib3R0b20tY2VudGVyXCIgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFdvcmtzcGFjZTtcbiJdLCJzb3VyY2VSb290IjoiIn0=